<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="proviola.css">
<link href="coqdoc.css" type="text/css" rel="stylesheet">
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script><script type="text/javascript">
      $(document).ready(function() {
        $(".command").mouseenter(function() {
          $(this).next(".output").fadeIn(5);
                   }).mouseleave(function() {
          $(this).next(".output").fadeOut(0);})
      });
    </script>
</head>
<body><div>

<div>
</div>

<div>

<h1 class="libtitle">Library f_term</h1>

<div>
<span class="command">
</span><div class="output"><pre></pre></div>
</div>

<div>
<a name="lab5"></a><h1 class="section">Term definition for PTSf and de Bruijn manipulation .</h1>

</div>
<div>
<span class="command">

<br>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="base.html#"><span class="id" type="library">base</span></a>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Lists.List.html#"><span class="id" type="library">List</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#"><span class="id" type="library">Lt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Le.html#"><span class="id" type="library">Le</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Gt.html#"><span class="id" type="library">Gt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#"><span class="id" type="library">Plus</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#"><span class="id" type="library">Minus</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Peano_dec.html#"><span class="id" type="library">Peano_dec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#"><span class="id" type="library">Compare_dec</span></a>.</span><div class="output"><pre></pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Module</span> <span class="id" type="keyword">Type</span> <a name="f_term_mod"><span class="id" type="module">f_term_mod</span></a> (<span class="id" type="var">X</span>: <a class="idref" href="base.html#"><span class="id" type="module">term_sig</span></a>).</span><div class="output"><pre>Interactive Module Type f_term_mod started

</pre></div>
<span class="command"><br>
  <span class="id" type="keyword">Import</span> <span class="id" type="var">X</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
</span><div class="output"><pre></pre></div>
</div>

<div>
Term syntax, extended with convertibility proofs .
</div>
<div>
<span class="command">

<br>
<span class="id" type="keyword">Inductive</span> <a name="f_term_mod.Term"><span class="id" type="inductive">Term</span></a> : <span class="id" type="keyword">Set</span>:=<br>
 | <a name="f_term_mod.Var"><span class="id" type="constructor">Var</span></a>    : <a class="idref" href="base.html#Vars"><span class="id" type="definition">Vars</span></a>  -&gt; <a class="idref" href="f_term.html#Term"><span class="id" type="inductive">Term</span></a><br>
 | <span class="id" type="keyword">Sort</span>   : <a class="idref" href="f_term.html#X.Sorts"><span class="id" type="axiom">Sorts</span></a> -&gt; <a class="idref" href="f_term.html#Term"><span class="id" type="inductive">Term</span></a><br>
 | <a name="f_term_mod.Prod"><span class="id" type="constructor">Prod</span></a>   : <a class="idref" href="f_term.html#Term"><span class="id" type="inductive">Term</span></a>  -&gt; <a class="idref" href="f_term.html#Term"><span class="id" type="inductive">Term</span></a> -&gt; <a class="idref" href="f_term.html#Term"><span class="id" type="inductive">Term</span></a><br>
 | <a name="f_term_mod.Abs"><span class="id" type="constructor">Abs</span></a>    : <a class="idref" href="f_term.html#Term"><span class="id" type="inductive">Term</span></a>  -&gt; <a class="idref" href="f_term.html#Term"><span class="id" type="inductive">Term</span></a> -&gt; <a class="idref" href="f_term.html#Term"><span class="id" type="inductive">Term</span></a><br>
 | <a name="f_term_mod.App"><span class="id" type="constructor">App</span></a>    : <a class="idref" href="f_term.html#Term"><span class="id" type="inductive">Term</span></a>  -&gt; <a class="idref" href="f_term.html#Term"><span class="id" type="inductive">Term</span></a> -&gt; <a class="idref" href="f_term.html#Term"><span class="id" type="inductive">Term</span></a><br>
 | <a name="f_term_mod.Conv"><span class="id" type="constructor">Conv</span></a>   : <a class="idref" href="f_term.html#Term"><span class="id" type="inductive">Term</span></a>  -&gt; <a class="idref" href="f_term.html#Prf"><span class="id" type="inductive">Prf</span></a>  -&gt; <a class="idref" href="f_term.html#Term"><span class="id" type="inductive">Term</span></a><br>
<span class="id" type="keyword">with</span> <a name="f_term_mod.Prf"><span class="id" type="inductive">Prf</span></a> : <span class="id" type="keyword">Set</span> :=<br>
 | <a name="f_term_mod.Refl"><span class="id" type="constructor">Refl</span></a>   : <a class="idref" href="f_term.html#Term"><span class="id" type="inductive">Term</span></a>  -&gt; <a class="idref" href="f_term.html#Prf"><span class="id" type="inductive">Prf</span></a><br>
 | <a name="f_term_mod.Sym"><span class="id" type="constructor">Sym</span></a>    : <a class="idref" href="f_term.html#Prf"><span class="id" type="inductive">Prf</span></a>   -&gt; <a class="idref" href="f_term.html#Prf"><span class="id" type="inductive">Prf</span></a><br>
 | <a name="f_term_mod.Trans"><span class="id" type="constructor">Trans</span></a>  : <a class="idref" href="f_term.html#Prf"><span class="id" type="inductive">Prf</span></a>   -&gt; <a class="idref" href="f_term.html#Prf"><span class="id" type="inductive">Prf</span></a>  -&gt; <a class="idref" href="f_term.html#Prf"><span class="id" type="inductive">Prf</span></a><br>
 | <a name="f_term_mod.Beta"><span class="id" type="constructor">Beta</span></a>   : <a class="idref" href="f_term.html#Term"><span class="id" type="inductive">Term</span></a>  -&gt; <a class="idref" href="f_term.html#Prf"><span class="id" type="inductive">Prf</span></a><br>
 | <a name="f_term_mod.ProdEq"><span class="id" type="constructor">ProdEq</span></a> : <a class="idref" href="f_term.html#Prf"><span class="id" type="inductive">Prf</span></a>   -&gt; <a class="idref" href="f_term.html#Term"><span class="id" type="inductive">Term</span></a> -&gt; <a class="idref" href="f_term.html#Prf"><span class="id" type="inductive">Prf</span></a> -&gt; <a class="idref" href="f_term.html#Prf"><span class="id" type="inductive">Prf</span></a><br>
 | <a name="f_term_mod.AbsEq"><span class="id" type="constructor">AbsEq</span></a>  : <a class="idref" href="f_term.html#Prf"><span class="id" type="inductive">Prf</span></a>   -&gt; <a class="idref" href="f_term.html#Term"><span class="id" type="inductive">Term</span></a> -&gt; <a class="idref" href="f_term.html#Prf"><span class="id" type="inductive">Prf</span></a> -&gt; <a class="idref" href="f_term.html#Prf"><span class="id" type="inductive">Prf</span></a><br>
 | <a name="f_term_mod.AppEq"><span class="id" type="constructor">AppEq</span></a>  : <a class="idref" href="f_term.html#Prf"><span class="id" type="inductive">Prf</span></a>   -&gt; <a class="idref" href="f_term.html#Prf"><span class="id" type="inductive">Prf</span></a>  -&gt; <a class="idref" href="f_term.html#Prf"><span class="id" type="inductive">Prf</span></a><br>
 | <a name="f_term_mod.Iota"><span class="id" type="constructor">Iota</span></a>   : <a class="idref" href="f_term.html#Term"><span class="id" type="inductive">Term</span></a>  -&gt; <a class="idref" href="f_term.html#Prf"><span class="id" type="inductive">Prf</span></a><br>
.</span><div class="output"><pre>Term, Prf are defined
Term_rect is defined
Term_ind is defined
Term_rec is defined
Prf_rect is defined
Prf_ind is defined
Prf_rec is defined

</pre></div>
<span class="command"><br>

<br>

<br>
<span class="id" type="keyword">Notation</span> <a name="f_term_mod.:F_scope:'!'_x"><span class="id" type="notation">"</span></a>! s" := (<span class="id" type="keyword">Sort</span> <span class="id" type="var">s</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 1) : <span class="id" type="var">F_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Notation</span> <a name="f_term_mod.:F_scope:'#'_x"><span class="id" type="notation">"</span></a># v" := (<a class="idref" href="f_term.html#f_term_mod.Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">v</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 1) : <span class="id" type="var">F_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Notation</span> <a name="f_term_mod.:F_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">"</span></a>'Π' ( U ) , V " := (<a class="idref" href="f_term.html#f_term_mod.Prod"><span class="id" type="constructor">Prod</span></a> <span class="id" type="var">U</span> <span class="id" type="var">V</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 20, <span class="id" type="var">U</span>, <span class="id" type="var">V</span> <span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 30) : <span class="id" type="var">F_scope</span>.</span><div class="output"><pre>Identifier 'Π' now a keyword

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Notation</span> <a name="f_term_mod.:F_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">"</span></a>'λ' [ U ] , v " := (<a class="idref" href="f_term.html#f_term_mod.Abs"><span class="id" type="constructor">Abs</span></a> <span class="id" type="var">U</span> <span class="id" type="var">v</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 20, <span class="id" type="var">U</span> , <span class="id" type="var">v</span> <span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 30) : <span class="id" type="var">F_scope</span>.</span><div class="output"><pre>Identifier 'λ' now a keyword

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Notation</span> <a name="f_term_mod.:F_scope:x_'%C2%B7'_x"><span class="id" type="notation">"</span></a>x · y" := (<a class="idref" href="f_term.html#f_term_mod.App"><span class="id" type="constructor">App</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 15, <span class="id" type="tactic">left</span> <span class="id" type="keyword">associativity</span>) : <span class="id" type="var">F_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Notation</span> <a name="f_term_mod.:F_scope:x_'%E2%88%BD'_x"><span class="id" type="notation">"</span></a>A ∽ H" := (<a class="idref" href="f_term.html#f_term_mod.Conv"><span class="id" type="constructor">Conv</span></a> <span class="id" type="var">A</span> <span class="id" type="var">H</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 15) : <span class="id" type="var">F_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Notation</span> <a name="f_term_mod.:F_scope:'%CF%81'_x"><span class="id" type="notation">"</span></a>'ρ' A" := (<a class="idref" href="f_term.html#f_term_mod.Refl"><span class="id" type="constructor">Refl</span></a> <span class="id" type="var">A</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 6) : <span class="id" type="var">F_scope</span>.</span><div class="output"><pre>Identifier 'ρ' now a keyword

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Notation</span> <a name="f_term_mod.:F_scope:x_'%E2%80%A0'"><span class="id" type="notation">"</span></a>H †" := (<a class="idref" href="f_term.html#f_term_mod.Sym"><span class="id" type="constructor">Sym</span></a> <span class="id" type="var">H</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 6) : <span class="id" type="var">F_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Notation</span> <a name="f_term_mod.:F_scope:x_'%E2%80%A2'_x"><span class="id" type="notation">"</span></a>H1 • H2" := (<a class="idref" href="f_term.html#f_term_mod.Trans"><span class="id" type="constructor">Trans</span></a> <span class="id" type="var">H1</span> <span class="id" type="var">H2</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 15, <span class="id" type="tactic">left</span> <span class="id" type="keyword">associativity</span>) : <span class="id" type="var">F_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Notation</span> <a name="f_term_mod.:F_scope:'%CE%B2'_x"><span class="id" type="notation">"</span></a>'β' A" := (<a class="idref" href="f_term.html#f_term_mod.Beta"><span class="id" type="constructor">Beta</span></a> <span class="id" type="var">A</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 6) : <span class="id" type="var">F_scope</span>.</span><div class="output"><pre>Identifier 'β' now a keyword

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Notation</span> <a name="f_term_mod.:F_scope:'%7B'_x_','_'%5B'_x_'%5D'_x_'%7D'"><span class="id" type="notation">"</span></a>{ H1 , [ A ] H2 }" := (<a class="idref" href="f_term.html#f_term_mod.ProdEq"><span class="id" type="constructor">ProdEq</span></a> <span class="id" type="var">H1</span> <span class="id" type="var">A</span> <span class="id" type="var">H2</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 15) : <span class="id" type="var">F_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Notation</span> <a name="f_term_mod.:F_scope:'%E2%9F%A8'_x_','_'%5B'_x_'%5D'_x_'%E2%9F%A9'"><span class="id" type="notation">"</span></a>⟨ H1 , [ A ] H2 ⟩" := (<a class="idref" href="f_term.html#f_term_mod.AbsEq"><span class="id" type="constructor">AbsEq</span></a> <span class="id" type="var">H1</span> <span class="id" type="var">A</span> <span class="id" type="var">H2</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 15, <span class="id" type="tactic">left</span> <span class="id" type="keyword">associativity</span>) : <span class="id" type="var">F_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Notation</span> <a name="f_term_mod.:F_scope:x_'%C2%B7h'_x"><span class="id" type="notation">"</span></a>H1 ·h H2" := (<a class="idref" href="f_term.html#f_term_mod.AppEq"><span class="id" type="constructor">AppEq</span></a> <span class="id" type="var">H1</span> <span class="id" type="var">H2</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 15, <span class="id" type="tactic">left</span> <span class="id" type="keyword">associativity</span>) : <span class="id" type="var">F_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Notation</span> <a name="f_term_mod.:F_scope:'%CE%B9'_x"><span class="id" type="notation">"</span></a>'ι' A" := (<a class="idref" href="f_term.html#f_term_mod.Iota"><span class="id" type="constructor">Iota</span></a> <span class="id" type="var">A</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 6) : <span class="id" type="var">F_scope</span>.</span><div class="output"><pre>Identifier 'ι' now a keyword

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Reserved Notation</span> " t ↑  x # n " (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 5, <span class="id" type="var">x</span> <span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 0, <span class="id" type="tactic">left</span> <span class="id" type="keyword">associativity</span>).</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Reserved Notation</span> " t ↑h x # n " (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 5, <span class="id" type="var">x</span> <span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 0, <span class="id" type="tactic">left</span> <span class="id" type="keyword">associativity</span>).</span><div class="output"><pre></pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Delimit</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">F_scope</span> <span class="id" type="keyword">with</span> <span class="id" type="var">F</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Open</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">F_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Scheme</span> <a name="f_term_mod.Term_ind'"><span class="id" type="definition">Term_ind'</span></a> := <span class="id" type="keyword">Induction</span> <span class="id" type="keyword">for</span> <a class="idref" href="f_term.html#f_term_mod.Term"><span class="id" type="inductive">Term</span></a> <span class="id" type="keyword">Sort</span> <span class="id" type="keyword">Prop</span><br>
      <span class="id" type="keyword">with</span> <a name="f_term_mod.Prf_ind'"><span class="id" type="definition">Prf_ind'</span></a> := <span class="id" type="keyword">Induction</span> <span class="id" type="keyword">for</span> <a class="idref" href="f_term.html#f_term_mod.Prf"><span class="id" type="inductive">Prf</span></a> <span class="id" type="keyword">Sort</span> <span class="id" type="keyword">Prop</span>.</span><div class="output"><pre>Prf_ind' is defined
Term_ind' is defined
Term_ind', Prf_ind' are recursively defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="var">Combined</span> <span class="id" type="keyword">Scheme</span> <a name="f_term_mod.Term_induc"><span class="id" type="definition">Term_induc</span></a> <span class="id" type="var">from</span> <a class="idref" href="f_term.html#f_term_mod.Term_ind'"><span class="id" type="definition">Term_ind'</span></a>, <a class="idref" href="f_term.html#f_term_mod.Prf_ind'"><span class="id" type="definition">Prf_ind'</span></a>.</span><div class="output"><pre>Term_induc is defined
Term_induc is recursively defined

</pre></div>
<span class="command"><br>

<br>
</span><div class="output"><pre></pre></div>
</div>

<div>
In order to deal with variable bindings and captures, we need a lift
function to deal with free and bounded variables.

<div> </div>

   M ↑ n  m recursivly adds n to all variables that are
   above m in M. H ↑h n  m does the same for convertibility proofs
</div>
<div>
<span class="command">
<span class="id" type="keyword">Fixpoint</span> <a name="f_term_mod.lift_rec"><span class="id" type="definition">lift_rec</span></a> (<span class="id" type="var">n</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) (<span class="id" type="var">k</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) (<span class="id" type="var">T</span>:<a class="idref" href="f_term.html#f_term_mod.Term"><span class="id" type="inductive">Term</span></a>) {<span class="id" type="keyword">struct</span> <span class="id" type="var">T</span>} := <span class="id" type="keyword">match</span> <a class="idref" href="f_term.html#T"><span class="id" type="variable">T</span></a> <span class="id" type="keyword">with</span><br>
   | <a class="idref" href="f_term.html#f_term_mod.:F_scope:'#'_x"><span class="id" type="notation">#</span></a> <span class="id" type="var">x</span> =&gt;  <span class="id" type="keyword">if</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> <span class="id" type="var">x</span> <span class="id" type="keyword">then</span> <a class="idref" href="f_term.html#f_term_mod.Var"><span class="id" type="constructor">Var</span></a> (<a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">x</span>) <span class="id" type="keyword">else</span> <a class="idref" href="f_term.html#f_term_mod.Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">x</span><br>
   | <a class="idref" href="f_term.html#f_term_mod.:F_scope:'!'_x"><span class="id" type="notation">!</span></a> <span class="id" type="var">s</span> =&gt; <span class="id" type="keyword">Sort</span> <span class="id" type="var">s</span><br>
   | <span class="id" type="var">M</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%C2%B7'_x"><span class="id" type="notation">·</span></a> <span class="id" type="var">N</span> =&gt;  <a class="idref" href="f_term.html#f_term_mod.App"><span class="id" type="constructor">App</span></a> (<span class="id" type="var">M</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a>) (<span class="id" type="var">N</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a>)<br>
   | <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">Π</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">(</span></a> <span class="id" type="var">A</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">),</span></a> <span class="id" type="var">B</span> =&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">Π</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">(</span></a><span class="id" type="var">A</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">),</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">(</span></a><span class="id" type="var">B</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">)</span></a><br>
   | <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">λ</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">[</span></a> <span class="id" type="var">A</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">],</span></a> <span class="id" type="var">M</span> =&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">λ</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">[</span></a><span class="id" type="var">A</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">],</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">(</span></a><span class="id" type="var">M</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">)</span></a> <br>
   | <span class="id" type="var">A</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%88%BD'_x"><span class="id" type="notation">∽</span></a> <span class="id" type="var">H</span> =&gt; <span class="id" type="var">A</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%88%BD'_x"><span class="id" type="notation">∽</span></a> <span class="id" type="var">H</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a><br>
 <span class="id" type="keyword">end</span>  <br>
   <span class="id" type="keyword">where</span> <a name="f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">"</span></a>t ↑ n # k" := (<a class="idref" href="f_term.html#lift_rec"><span class="id" type="definition">lift_rec</span></a> <span class="id" type="var">n</span> <span class="id" type="var">k</span> <span class="id" type="var">t</span>) : <span class="id" type="var">F_scope</span><br>
<span class="id" type="keyword">with</span> <a name="f_term_mod.lift_rec_h"><span class="id" type="definition">lift_rec_h</span></a> (<span class="id" type="var">n</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) (<span class="id" type="var">k</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) (<span class="id" type="var">H</span>:<a class="idref" href="f_term.html#f_term_mod.Prf"><span class="id" type="inductive">Prf</span></a>) {<span class="id" type="keyword">struct</span> <span class="id" type="var">H</span>} := <span class="id" type="keyword">match</span> <a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <span class="id" type="keyword">with</span><br>
   | <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CF%81'_x"><span class="id" type="notation">ρ</span></a> <span class="id" type="var">A</span> =&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CF%81'_x"><span class="id" type="notation">ρ</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CF%81'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">A</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CF%81'_x"><span class="id" type="notation">)</span></a><br>
   | <span class="id" type="var">H</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%80%A0'"><span class="id" type="notation">†</span></a> =&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%80%A0'"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%80%A0'"><span class="id" type="notation">)†</span></a><br>
   | <span class="id" type="var">H</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%80%A2'_x"><span class="id" type="notation">•</span></a><span class="id" type="var">K</span> =&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%80%A2'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%80%A2'_x"><span class="id" type="notation">)•(</span></a><span class="id" type="var">K</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%80%A2'_x"><span class="id" type="notation">)</span></a><br>
   | <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%B2'_x"><span class="id" type="notation">β</span></a> <span class="id" type="var">A</span> =&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%B2'_x"><span class="id" type="notation">β</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%B2'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">A</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%B2'_x"><span class="id" type="notation">)</span></a><br>
   | <span class="id" type="var">H</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%C2%B7h'_x"><span class="id" type="notation">·</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%C2%B7h'_x"><span class="id" type="notation">h</span></a> <span class="id" type="var">K</span> =&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%C2%B7h'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%C2%B7h'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%C2%B7h'_x"><span class="id" type="notation">·</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%C2%B7h'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%C2%B7h'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">K</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%C2%B7h'_x"><span class="id" type="notation">)</span></a><br>
   | <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%7B'_x_','_'%5B'_x_'%5D'_x_'%7D'"><span class="id" type="notation">{</span></a><span class="id" type="var">H</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%7B'_x_','_'%5B'_x_'%5D'_x_'%7D'"><span class="id" type="notation">,[</span></a><span class="id" type="var">A</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%7B'_x_','_'%5B'_x_'%5D'_x_'%7D'"><span class="id" type="notation">]</span></a><span class="id" type="var">K</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%7B'_x_','_'%5B'_x_'%5D'_x_'%7D'"><span class="id" type="notation">}</span></a> =&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%7B'_x_','_'%5B'_x_'%5D'_x_'%7D'"><span class="id" type="notation">{</span></a><a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%7B'_x_','_'%5B'_x_'%5D'_x_'%7D'"><span class="id" type="notation">,[</span></a><span class="id" type="var">A</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%7B'_x_','_'%5B'_x_'%5D'_x_'%7D'"><span class="id" type="notation">]</span></a><span class="id" type="var">K</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">)</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%7B'_x_','_'%5B'_x_'%5D'_x_'%7D'"><span class="id" type="notation">}</span></a><br>
   | <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%E2%9F%A8'_x_','_'%5B'_x_'%5D'_x_'%E2%9F%A9'"><span class="id" type="notation">⟨</span></a><span class="id" type="var">H</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%E2%9F%A8'_x_','_'%5B'_x_'%5D'_x_'%E2%9F%A9'"><span class="id" type="notation">,[</span></a><span class="id" type="var">A</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%E2%9F%A8'_x_','_'%5B'_x_'%5D'_x_'%E2%9F%A9'"><span class="id" type="notation">]</span></a><span class="id" type="var">K</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%E2%9F%A8'_x_','_'%5B'_x_'%5D'_x_'%E2%9F%A9'"><span class="id" type="notation">⟩</span></a> =&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%E2%9F%A8'_x_','_'%5B'_x_'%5D'_x_'%E2%9F%A9'"><span class="id" type="notation">⟨</span></a><a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%E2%9F%A8'_x_','_'%5B'_x_'%5D'_x_'%E2%9F%A9'"><span class="id" type="notation">,[</span></a><span class="id" type="var">A</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%E2%9F%A8'_x_','_'%5B'_x_'%5D'_x_'%E2%9F%A9'"><span class="id" type="notation">]</span></a><span class="id" type="var">K</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">)</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%E2%9F%A8'_x_','_'%5B'_x_'%5D'_x_'%E2%9F%A9'"><span class="id" type="notation">⟩</span></a><br>
   | <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%B9'_x"><span class="id" type="notation">ι</span></a> <span class="id" type="var">A</span> =&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%B9'_x"><span class="id" type="notation">ι</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%B9'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">A</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%B9'_x"><span class="id" type="notation">)</span></a><br>
 <span class="id" type="keyword">end</span>  <br>
 <span class="id" type="keyword">where</span> <a name="f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">"</span></a>t ↑h n # k" := (<a class="idref" href="f_term.html#lift_rec_h"><span class="id" type="definition">lift_rec_h</span></a> <span class="id" type="var">n</span> <span class="id" type="var">k</span> <span class="id" type="var">t</span>) : <span class="id" type="var">F_scope</span>.</span><div class="output"><pre>lift_rec, lift_rec_h are recursively defined (decreasing respectively on 3rd,
3rd arguments)

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Notation</span> <a name="f_term_mod.:F_scope:x_'%E2%86%91'_x"><span class="id" type="notation">"</span></a> t ↑  n " := (<a class="idref" href="f_term.html#f_term_mod.lift_rec"><span class="id" type="definition">lift_rec</span></a>   <span class="id" type="var">n</span> 0 <span class="id" type="var">t</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 5, <span class="id" type="var">n</span> <span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 0, <span class="id" type="tactic">left</span> <span class="id" type="keyword">associativity</span>) : <span class="id" type="var">F_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Notation</span> <a name="f_term_mod.:F_scope:x_'%E2%86%91h'_x"><span class="id" type="notation">"</span></a> t ↑h n " := (<a class="idref" href="f_term.html#f_term_mod.lift_rec_h"><span class="id" type="definition">lift_rec_h</span></a> <span class="id" type="var">n</span> 0 <span class="id" type="var">t</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 5, <span class="id" type="var">n</span> <span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 0, <span class="id" type="tactic">left</span> <span class="id" type="keyword">associativity</span>) : <span class="id" type="var">F_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>

<br>
</span><div class="output"><pre></pre></div>
</div>

<div>
Some basic properties of the lift function. That is everything we will
ever need to handle de Bruijn indexes 
</div>
<div>
<span class="command">

<br>
<span class="id" type="keyword">Lemma</span> <a name="f_term_mod.inv_lift"><span class="id" type="lemma">inv_lift</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span>, <a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a>  <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#m"><span class="id" type="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a>  <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#m"><span class="id" type="variable">m</span></a> -&gt; <a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">/\</span></a><br>
                 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span>, <a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#m"><span class="id" type="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#m"><span class="id" type="variable">m</span></a> -&gt; <a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 16)
  
  ============================
   (forall (M N : Term) (n m : nat), M ↑  n # m = N ↑  n # m -&gt; M = N) /\
   (forall (M N : Prf) (n m : nat), M ↑h n # m = N ↑h n # m -&gt; M = N)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="f_term.html#f_term_mod.Term_induc"><span class="id" type="definition">Term_induc</span></a>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">destruct</span> <span class="id" type="var">N</span>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">destruct</span> <span class="id" type="var">K</span>;<span class="id" type="tactic">intros</span>;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *;<br>
<br>
<span class="id" type="tactic">try</span> <span class="id" type="tactic">discriminate</span>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">intuition</span>;<br>
<br>
(<span class="id" type="tactic">try</span> (<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">m</span> <span class="id" type="var">v</span>) ; <span class="id" type="tactic">discriminate</span>));<br>
<br>
<span class="id" type="tactic">try</span> (<span class="id" type="tactic">injection</span> <span class="id" type="var">H2</span>;<span class="id" type="tactic">intros</span>;<span class="id" type="tactic">rewrite</span> (<span class="id" type="var">H</span> <span class="id" type="var">N1</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">H5</span>);<span class="id" type="tactic">rewrite</span> (<span class="id" type="var">H0</span> <span class="id" type="var">t0</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">H4</span>);<span class="id" type="tactic">rewrite</span> (<span class="id" type="var">H1</span> <span class="id" type="var">N2</span> <span class="id" type="var">n</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">m</span>) <span class="id" type="var">H3</span>);<span class="id" type="tactic">reflexivity</span>);<br>
<br>
<span class="id" type="tactic">try</span> (<span class="id" type="tactic">injection</span> <span class="id" type="var">H1</span>;<span class="id" type="tactic">intros</span>;<span class="id" type="tactic">rewrite</span> (<span class="id" type="var">H</span> <span class="id" type="var">N1</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">H3</span>)||<span class="id" type="tactic">rewrite</span> (<span class="id" type="var">H</span> <span class="id" type="var">N</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">H3</span>);<span class="id" type="tactic">rewrite</span> (<span class="id" type="var">H0</span> <span class="id" type="var">N2</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">H2</span>)<br>
   ||<span class="id" type="tactic">rewrite</span> (<span class="id" type="var">H0</span> <span class="id" type="var">N2</span> <span class="id" type="var">n</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">m</span>) <span class="id" type="var">H2</span>)||<span class="id" type="tactic">rewrite</span> (<span class="id" type="var">H0</span> <span class="id" type="var">p0</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">H2</span>);<span class="id" type="tactic">reflexivity</span>);<br>
<br>
<span class="id" type="tactic">try</span> (<span class="id" type="tactic">injection</span> <span class="id" type="var">H0</span>;<span class="id" type="tactic">intros</span>;<span class="id" type="tactic">rewrite</span> (<span class="id" type="var">H</span> <span class="id" type="var">t0</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">H1</span>)||<span class="id" type="tactic">rewrite</span> (<span class="id" type="var">H</span> <span class="id" type="var">N</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">H1</span>);<span class="id" type="tactic">reflexivity</span>).</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 768)
  
  v : Vars
  v0 : Vars
  n : nat
  m : nat
  H : (if le_gt_dec m v then #(n + v) else #v) =
      (if le_gt_dec m v0 then #(n + v0) else #v0)
  ============================
   #v = #v0

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">m</span> <span class="id" type="var">v</span>); <span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">m</span> <span class="id" type="var">v0</span>); <span class="id" type="tactic">injection</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 2807)
  
  v : Vars
  v0 : Vars
  n : nat
  m : nat
  l : m &lt;= v
  l0 : m &lt;= v0
  H : #(n + v) = #(n + v0)
  H0 : n + v = n + v0
  ============================
   #v = #v0

subgoal 2 (ID 2816) is:
 #v = #(n + v)
subgoal 3 (ID 2822) is:
 #(n + v0) = #v0
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_reg_l"><span class="id" type="lemma">plus_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H0</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 2816)
  
  v : Vars
  n : nat
  m : nat
  l : m &lt;= v
  g : m &gt; n + v
  H : #(n + v) = #(n + v)
  ============================
   #v = #(n + v)

subgoal 2 (ID 2822) is:
 #(n + v0) = #v0
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">m</span>). </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 2895)
  
  v : Vars
  n : nat
  m : nat
  l : m &lt;= v
  g : m &gt; n + v
  H : #(n + v) = #(n + v)
  ============================
   m &lt; m

subgoal 2 (ID 2822) is:
 #(n + v0) = #v0
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 2896)
  
  v : Vars
  n : nat
  m : nat
  l : m &lt;= v
  g : m &gt; n + v
  H : #(n + v) = #(n + v)
  ============================
   m &lt;= v

subgoal 2 (ID 2897) is:
 v &lt; m
subgoal 3 (ID 2822) is:
 #(n + v0) = #v0
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 2897)
  
  v : Vars
  n : nat
  m : nat
  l : m &lt;= v
  g : m &gt; n + v
  H : #(n + v) = #(n + v)
  ============================
   v &lt; m

subgoal 2 (ID 2822) is:
 #(n + v0) = #v0
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">induction</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 2822)
  
  v0 : Vars
  n : nat
  m : nat
  l : m &lt;= v0
  g : m &gt; n + v0
  H : #(n + v0) = #(n + v0)
  ============================
   #(n + v0) = #v0

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v0</span>). </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 2935)
  
  v0 : Vars
  n : nat
  m : nat
  l : m &lt;= v0
  g : m &gt; n + v0
  H : #(n + v0) = #(n + v0)
  ============================
   v0 &lt; v0

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">m</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 2936)
  
  v0 : Vars
  n : nat
  m : nat
  l : m &lt;= v0
  g : m &gt; n + v0
  H : #(n + v0) = #(n + v0)
  ============================
   v0 &lt; m

subgoal 2 (ID 2937) is:
 m &lt;= v0
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">induction</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 2937)
  
  v0 : Vars
  n : nat
  m : nat
  l : m &lt;= v0
  g : m &gt; n + v0
  H : #(n + v0) = #(n + v0)
  ============================
   m &lt;= v0

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>inv_lift is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="f_term_mod.lift_rec0"><span class="id" type="lemma">lift_rec0</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">n</span>, <a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> 0 <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">H</span> <span class="id" type="var">n</span>, <a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> 0 <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 2981)
  
  ============================
   (forall (M : Term) (n : nat), M ↑  0 # n = M) /\
   (forall (H : Prf) (n : nat), H ↑h 0 # n = H)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="f_term.html#f_term_mod.Term_induc"><span class="id" type="definition">Term_induc</span></a>;<span class="id" type="tactic">intros</span>;<span class="id" type="tactic">simpl</span>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H1</span>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H2</span>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3056)
  
  v : Vars
  n : nat
  ============================
   (if le_gt_dec n v then #v else #v) = #v

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">n</span> <span class="id" type="var">v</span>); <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>lift_rec0 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="f_term_mod.lift0"><span class="id" type="lemma">lift0</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">M</span>, <a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x"><span class="id" type="notation">↑</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">H</span>, <a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x"><span class="id" type="notation">h</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3122)
  
  ============================
   (forall M : Term, M ↑  0 = M) /\ (forall H : Prf, H ↑h 0 = H)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> <a class="idref" href="f_term.html#f_term_mod.lift_rec0"><span class="id" type="lemma">lift_rec0</span></a>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>lift0 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="f_term_mod.liftP1"><span class="id" type="lemma">liftP1</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span> <span class="id" type="var">k</span>, <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a>  <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a>  <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a>  <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">/\</span></a><br>
               <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">H</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span> <span class="id" type="var">k</span>, <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3155)
  
  ============================
   (forall (M : Term) (i j k : nat),
    M ↑  j # i ↑  k # (j + i) = M ↑  (j + k) # i) /\
   (forall (H : Prf) (i j k : nat),
    H ↑h j # i ↑h k # (j + i) = H ↑h (j + k) # i)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="f_term.html#f_term_mod.Term_induc"><span class="id" type="definition">Term_induc</span></a>;<span class="id" type="tactic">intros</span>;<span class="id" type="tactic">simpl</span>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">H</span>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">H0</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">H1</span>;<br>
<span class="id" type="tactic">try</span> (<span class="id" type="tactic">replace</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>);<span class="id" type="tactic">try</span> <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3296)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  ============================
   (if le_gt_dec i v then #(j + v) else #v) ↑  k # (j + i) =
   (if le_gt_dec i v then #(j + k + v) else #v)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>;<span class="id" type="tactic">simpl</span>;<span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>; <br>
<span class="id" type="tactic">try</span> (<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_assoc"><span class="id" type="lemma">plus_assoc</span></a>;<span class="id" type="tactic">replace</span> (<span class="id" type="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>) <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">k</span>) <span class="id" type="tactic">by</span> (<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a>));<span class="id" type="tactic">try</span> <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 3533)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  l : i &lt;= v
  g : j + i &gt; j + v
  ============================
   #(j + v) = #(j + k + v)

subgoal 2 (ID 3542) is:
 #(k + v) = #v
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Gt.html#plus_gt_reg_l"><span class="id" type="lemma">plus_gt_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 3555)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  l : i &lt;= v
  g : i &gt; v
  ============================
   #(j + v) = #(j + k + v)

subgoal 2 (ID 3542) is:
 #(k + v) = #v
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 3556)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  l : i &lt;= v
  g : i &gt; v
  ============================
   v &lt; v

subgoal 2 (ID 3542) is:
 #(k + v) = #v
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3542)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  g : i &gt; v
  l : j + i &lt;= v
  ============================
   #(k + v) = #v

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3559)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  g : i &gt; v
  l : j + i &lt;= v
  ============================
   v &lt; v

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3561)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  g : i &gt; v
  l : j + i &lt;= v
  ============================
   i &lt;= v

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">induction</span> <span class="id" type="var">j</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>liftP1 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="f_term_mod.liftP2"><span class="id" type="lemma">liftP2</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span> <span class="id" type="var">k</span> <span class="id" type="var">n</span>, <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> -&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)/\</span></a><br>
              <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">H</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span> <span class="id" type="var">k</span> <span class="id" type="var">n</span>, <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> -&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3614)
  
  ============================
   (forall (M : Term) (i j k n : nat),
    i &lt;= n -&gt; M ↑  j # i ↑  k # (j + n) = M ↑  k # n ↑  j # i) /\
   (forall (H : Prf) (i j k n : nat),
    i &lt;= n -&gt; H ↑h j # i ↑h k # (j + n) = H ↑h k # n ↑h j # i)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="f_term.html#f_term_mod.Term_induc"><span class="id" type="definition">Term_induc</span></a>;<span class="id" type="tactic">intros</span>;<span class="id" type="tactic">simpl</span>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)) <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>;<br>
<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span> <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span> <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H1</span> <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3761)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  ============================
   (if le_gt_dec i v then #(j + v) else #v) ↑  k # (j + n) =
   (if le_gt_dec n v then #(k + v) else #v) ↑  j # i

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">v</span>); <span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">n</span> <span class="id" type="var">v</span>); <span class="id" type="tactic">simpl</span>;<span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>;<span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">intuition</span>;<br>
[|<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>); <span class="id" type="tactic">try</span> (<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>;<span class="id" type="tactic">trivial</span>;<span class="id" type="tactic">try</span> (<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Le.html#le_trans"><span class="id" type="lemma">le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span>;<span class="id" type="tactic">trivial</span>;<span class="id" type="tactic">fail</span>);<span class="id" type="tactic">fail</span>); <br>
<span class="id" type="tactic">try</span> (<span class="id" type="tactic">try</span> (<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Gt.html#plus_gt_reg_l"><span class="id" type="lemma">plus_gt_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>);<span class="id" type="tactic">try</span> (<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_le_reg_l"><span class="id" type="lemma">plus_le_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>); <span class="id" type="tactic">try</span> (<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Le.html#le_trans"><span class="id" type="lemma">le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span>;<span class="id" type="tactic">trivial</span>);<span class="id" type="tactic">fail</span>)..].</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 6403)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  l1 : j + n &lt;= j + v
  l2 : i &lt;= k + v
  ============================
   #(k + (j + v)) = #(j + (k + v))

subgoal 2 (ID 6902) is:
 v &lt; v
subgoal 3 (ID 6960) is:
 v &lt; v
(dependent evars:)

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="tactic">rewrite</span> 2! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_assoc"><span class="id" type="lemma">plus_assoc</span></a>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 6971)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  l1 : j + n &lt;= j + v
  l2 : i &lt;= k + v
  ============================
   #(k + j + v) = #(j + k + v)

subgoal 2 (ID 6902) is:
 v &lt; v
subgoal 3 (ID 6960) is:
 v &lt; v
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">replace</span> (<span class="id" type="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>) <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">k</span>) <span class="id" type="tactic">by</span> (<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a>). </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 6975)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  l1 : j + n &lt;= j + v
  l2 : i &lt;= k + v
  ============================
   #(j + k + v) = #(j + k + v)

subgoal 2 (ID 6902) is:
 v &lt; v
subgoal 3 (ID 6960) is:
 v &lt; v
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 6902)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  l1 : j + n &lt;= j + v
  g : i &gt; k + v
  ============================
   v &lt; v

subgoal 2 (ID 6960) is:
 v &lt; v
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>;<span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 6977)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  l1 : j + n &lt;= j + v
  g : i &gt; k + v
  ============================
   v &lt; i

subgoal 2 (ID 6960) is:
 v &lt; v
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">induction</span> <span class="id" type="var">k</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 6960)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  g0 : n &gt; v
  l : j + n &lt;= v
  g1 : i &gt; v
  ============================
   v &lt; v

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span>;<span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 7017)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  g0 : n &gt; v
  l : j + n &lt;= v
  g1 : i &gt; v
  ============================
   n &lt;= v

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">induction</span> <span class="id" type="var">l</span>;<span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>liftP2 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="f_term_mod.liftP3"><span class="id" type="lemma">liftP3</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">i</span> <span class="id" type="var">k</span> <span class="id" type="var">j</span> <span class="id" type="var">n</span> , <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> -&gt; <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">)</span></a> -&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a>  <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a>  <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a>  <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">/\</span></a><br>
               <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">H</span> <span class="id" type="var">i</span> <span class="id" type="var">k</span> <span class="id" type="var">j</span> <span class="id" type="var">n</span> , <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> -&gt; <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">)</span></a> -&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 7130)
  
  ============================
   (forall (M : Term) (i k j n : nat),
    i &lt;= k -&gt; k &lt;= i + n -&gt; M ↑  n # i ↑  j # k = M ↑  (j + n) # i) /\
   (forall (H : Prf) (i k j n : nat),
    i &lt;= k -&gt; k &lt;= i + n -&gt; H ↑h n # i ↑h j # k = H ↑h (j + n) # i)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="f_term.html#f_term_mod.Term_induc"><span class="id" type="definition">Term_induc</span></a>;<span class="id" type="tactic">intros</span>;<span class="id" type="tactic">simpl</span>;<br>
<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>; <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H1</span>;<span class="id" type="tactic">intuition</span>;<br>
<span class="id" type="tactic">try</span> <span class="id" type="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>));<span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 9117)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   (if le_gt_dec i v then #(n + v) else #v) ↑  j # k =
   (if le_gt_dec i v then #(j + n + v) else #v)

(dependent evars:)

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">v</span>); <span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 9203)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  ============================
   (if le_gt_dec k (n + v) then #(j + (n + v)) else #(n + v)) = #(j + n + v)

subgoal 2 (ID 9204) is:
 (if le_gt_dec k v then #(j + v) else #v) = #v
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">k</span> (<span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>)); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 9214)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  g : k &gt; n + v
  ============================
   #(n + v) = #(j + n + v)

subgoal 2 (ID 9204) is:
 (if le_gt_dec k v then #(j + v) else #v) = #v
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)). </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 9262)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  g : k &gt; n + v
  ============================
   i + n &lt; i + n

subgoal 2 (ID 9204) is:
 (if le_gt_dec k v then #(j + v) else #v) = #v
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">k</span>;<span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 9263)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  g : k &gt; n + v
  ============================
   i + n &lt; k

subgoal 2 (ID 9204) is:
 (if le_gt_dec k v then #(j + v) else #v) = #v
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>);<span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 9265)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  g : k &gt; n + v
  ============================
   i + n &lt;= n + v

subgoal 2 (ID 9204) is:
 (if le_gt_dec k v then #(j + v) else #v) = #v
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a>;<span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 9204)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  ============================
   (if le_gt_dec k v then #(j + v) else #v) = #v

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">k</span> <span class="id" type="var">v</span>); <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 9294)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt;= v
  ============================
   #(j + v) = #v

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">k</span>).</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 9320)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt;= v
  ============================
   k &lt; k

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>;<span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 9321)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt;= v
  ============================
   k &lt; i

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>;<span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>liftP3 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="f_term_mod.lift_lift"><span class="id" type="lemma">lift_lift</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span>, <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x"><span class="id" type="notation">↑</span></a>  <a class="idref" href="f_term.html#m"><span class="id" type="variable">m</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x"><span class="id" type="notation">↑</span></a>  <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x"><span class="id" type="notation">↑</span></a>  <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#m"><span class="id" type="variable">m</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">/\</span></a><br>
                  <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">H</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span>, <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#m"><span class="id" type="variable">m</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#m"><span class="id" type="variable">m</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 9333)
  
  ============================
   (forall (M : Term) (n m : nat), M ↑  m ↑  n = M ↑  (n + m)) /\
   (forall (H : Prf) (n m : nat), H ↑h m ↑h n = H ↑h (n + m))

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> <a class="idref" href="f_term.html#f_term_mod.liftP3"><span class="id" type="lemma">liftP3</span></a>;<span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>lift_lift is defined

</pre></div>
<span class="command"><br>

<br>
</span><div class="output"><pre></pre></div>
</div>

<div>
We will consider the usual implicit substitution without variable capture
(this is where the lift operator comes in handy).

<div> </div>

M <span class="inlinecode"></span> <span class="inlinecode"><a class="idref" href="env.html#n"><span class="id" type="variable">n</span></a></span> <span class="inlinecode">←</span> <span class="inlinecode"><a class="idref" href="f_equivalence.html#N"><span class="id" type="variable">N</span></a></span> <span class="inlinecode"></span> replaces the variable n in M by the term N and M <span class="inlinecode"></span> <span class="inlinecode"><a class="idref" href="env.html#n"><span class="id" type="variable">n</span></a></span> <span class="inlinecode">←<span class="id" type="var">h</span></span> <span class="inlinecode"><a class="idref" href="f_equivalence.html#N"><span class="id" type="variable">N</span></a></span> <span class="inlinecode"></span> does the same for convertibility proofs.
  
</div>
<div>
<span class="command">

<br>
<span class="id" type="keyword">Reserved Notation</span> "t [ x ←  u ]" (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 5, <span class="id" type="var">x</span> <span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 0, <span class="id" type="tactic">left</span> <span class="id" type="keyword">associativity</span>).</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Reserved Notation</span> "t [ x ←h u ]" (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 5, <span class="id" type="var">x</span> <span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 0, <span class="id" type="tactic">left</span> <span class="id" type="keyword">associativity</span>).</span><div class="output"><pre></pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Fixpoint</span> <a name="f_term_mod.subst_rec"><span class="id" type="definition">subst_rec</span></a> <span class="id" type="var">U</span> <span class="id" type="var">T</span> <span class="id" type="var">n</span> {<span class="id" type="keyword">struct</span> <span class="id" type="var">T</span>} :=<br>
 <span class="id" type="keyword">match</span> <a class="idref" href="f_term.html#T"><span class="id" type="variable">T</span></a> <span class="id" type="keyword">with</span><br>
   | <a class="idref" href="f_term.html#f_term_mod.:F_scope:'#'_x"><span class="id" type="notation">#</span></a> <span class="id" type="var">x</span> =&gt; <span class="id" type="keyword">match</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">x</span> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a>) <span class="id" type="keyword">with</span><br>
      | <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Specif.html#inleft"><span class="id" type="constructor">inleft</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Specif.html#left"><span class="id" type="constructor">left</span></a> <span class="id" type="var">_</span>) =&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:'#'_x"><span class="id" type="notation">#</span></a> <span class="id" type="var">x</span>     <br>
      | <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Specif.html#inleft"><span class="id" type="constructor">inleft</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Specif.html#right"><span class="id" type="constructor">right</span></a> <span class="id" type="var">_</span>) =&gt; <a class="idref" href="f_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a>  <br>
      | <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Specif.html#inright"><span class="id" type="constructor">inright</span></a> <span class="id" type="var">_</span> =&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'#'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a> 1<a class="idref" href="f_term.html#f_term_mod.:F_scope:'#'_x"><span class="id" type="notation">)</span></a>     <br>
      <span class="id" type="keyword">end</span><br>
   | <a class="idref" href="f_term.html#f_term_mod.:F_scope:'!'_x"><span class="id" type="notation">!</span></a> <span class="id" type="var">s</span> =&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:'!'_x"><span class="id" type="notation">!</span></a> <span class="id" type="var">s</span><br>
   | <span class="id" type="var">M</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%C2%B7'_x"><span class="id" type="notation">·</span></a> <span class="id" type="var">N</span> =&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%C2%B7'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">M</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="f_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%C2%B7'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%C2%B7'_x"><span class="id" type="notation">·</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%C2%B7'_x"><span class="id" type="notation">(</span></a> <span class="id" type="var">N</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="f_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%C2%B7'_x"><span class="id" type="notation">)</span></a> <br>
   | <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">Π</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">(</span></a> <span class="id" type="var">A</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">),</span></a> <span class="id" type="var">B</span> =&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">Π</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">(</span></a> <span class="id" type="var">A</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="f_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">),</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">(</span></a><span class="id" type="var">B</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="f_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">)</span></a> <br>
   | <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">λ</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">[</span></a> <span class="id" type="var">A</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">],</span></a> <span class="id" type="var">M</span> =&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">λ</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">[</span></a> <span class="id" type="var">A</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="f_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">],</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">(</span></a><span class="id" type="var">M</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="f_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">)</span></a> <br>
   | <span class="id" type="var">A</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%88%BD'_x"><span class="id" type="notation">∽</span></a> <span class="id" type="var">H</span> =&gt; <span class="id" type="var">A</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="f_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%88%BD'_x"><span class="id" type="notation">∽</span></a> <span class="id" type="var">H</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">]</span></a><br>
<span class="id" type="keyword">end</span><br>
      <span class="id" type="keyword">where</span> <a name="f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">"</span></a> t [ n ← w ] " := (<a class="idref" href="f_term.html#subst_rec"><span class="id" type="definition">subst_rec</span></a> <span class="id" type="var">w</span> <span class="id" type="var">t</span> <span class="id" type="var">n</span>) : <span class="id" type="var">F_scope</span><br>
<span class="id" type="keyword">with</span> <a name="f_term_mod.subst_rec_h"><span class="id" type="definition">subst_rec_h</span></a> <span class="id" type="var">U</span> <span class="id" type="var">H</span> <span class="id" type="var">n</span> {<span class="id" type="keyword">struct</span> <span class="id" type="var">H</span>} := <span class="id" type="keyword">match</span> <a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <span class="id" type="keyword">with</span><br>
   | <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CF%81'_x"><span class="id" type="notation">ρ</span></a> <span class="id" type="var">A</span> =&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CF%81'_x"><span class="id" type="notation">ρ</span></a> <span class="id" type="var">A</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="f_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><br>
   | <span class="id" type="var">H</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%80%A0'"><span class="id" type="notation">†</span></a> =&gt; <a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%80%A0'"><span class="id" type="notation">†</span></a><br>
   | <span class="id" type="var">H</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%80%A2'_x"><span class="id" type="notation">•</span></a><span class="id" type="var">K</span> =&gt; <a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%80%A2'_x"><span class="id" type="notation">•</span></a><span class="id" type="var">K</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">]</span></a><br>
   | <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%B2'_x"><span class="id" type="notation">β</span></a> <span class="id" type="var">A</span> =&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%B2'_x"><span class="id" type="notation">β</span></a> <span class="id" type="var">A</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="f_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><br>
   | <span class="id" type="var">H</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%C2%B7h'_x"><span class="id" type="notation">·</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%C2%B7h'_x"><span class="id" type="notation">h</span></a> <span class="id" type="var">K</span> =&gt; <a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%C2%B7h'_x"><span class="id" type="notation">·</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%C2%B7h'_x"><span class="id" type="notation">h</span></a> <span class="id" type="var">K</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">]</span></a><br>
   | <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%7B'_x_','_'%5B'_x_'%5D'_x_'%7D'"><span class="id" type="notation">{</span></a><span class="id" type="var">H</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%7B'_x_','_'%5B'_x_'%5D'_x_'%7D'"><span class="id" type="notation">,[</span></a><span class="id" type="var">A</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%7B'_x_','_'%5B'_x_'%5D'_x_'%7D'"><span class="id" type="notation">]</span></a><span class="id" type="var">K</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%7B'_x_','_'%5B'_x_'%5D'_x_'%7D'"><span class="id" type="notation">}</span></a> =&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%7B'_x_','_'%5B'_x_'%5D'_x_'%7D'"><span class="id" type="notation">{</span></a><a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%7B'_x_','_'%5B'_x_'%5D'_x_'%7D'"><span class="id" type="notation">,[</span></a><span class="id" type="var">A</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="f_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%7B'_x_','_'%5B'_x_'%5D'_x_'%7D'"><span class="id" type="notation">]</span></a><span class="id" type="var">K</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%7B'_x_','_'%5B'_x_'%5D'_x_'%7D'"><span class="id" type="notation">}</span></a><br>
   | <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%E2%9F%A8'_x_','_'%5B'_x_'%5D'_x_'%E2%9F%A9'"><span class="id" type="notation">⟨</span></a><span class="id" type="var">H</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%E2%9F%A8'_x_','_'%5B'_x_'%5D'_x_'%E2%9F%A9'"><span class="id" type="notation">,[</span></a><span class="id" type="var">A</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%E2%9F%A8'_x_','_'%5B'_x_'%5D'_x_'%E2%9F%A9'"><span class="id" type="notation">]</span></a><span class="id" type="var">K</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%E2%9F%A8'_x_','_'%5B'_x_'%5D'_x_'%E2%9F%A9'"><span class="id" type="notation">⟩</span></a> =&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%E2%9F%A8'_x_','_'%5B'_x_'%5D'_x_'%E2%9F%A9'"><span class="id" type="notation">⟨</span></a><a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%E2%9F%A8'_x_','_'%5B'_x_'%5D'_x_'%E2%9F%A9'"><span class="id" type="notation">,[</span></a><span class="id" type="var">A</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="f_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%E2%9F%A8'_x_','_'%5B'_x_'%5D'_x_'%E2%9F%A9'"><span class="id" type="notation">]</span></a><span class="id" type="var">K</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'%E2%9F%A8'_x_','_'%5B'_x_'%5D'_x_'%E2%9F%A9'"><span class="id" type="notation">⟩</span></a><br>
   | <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%B9'_x"><span class="id" type="notation">ι</span></a> <span class="id" type="var">A</span> =&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:'%CE%B9'_x"><span class="id" type="notation">ι</span></a> <span class="id" type="var">A</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="f_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><br>
<span class="id" type="keyword">end</span><br>
      <span class="id" type="keyword">where</span> <a name="f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">"</span></a> t [ n ←h w ] " := (<a class="idref" href="f_term.html#subst_rec_h"><span class="id" type="definition">subst_rec_h</span></a> <span class="id" type="var">w</span> <span class="id" type="var">t</span> <span class="id" type="var">n</span>) : <span class="id" type="var">F_scope</span>.</span><div class="output"><pre>subst_rec, subst_rec_h are recursively defined
(decreasing respectively on 2nd, 2nd arguments)

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Notation</span> <a name="f_term_mod.:F_scope:x_'%5B'_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">"</span></a> t [ ← w ] " := (<a class="idref" href="f_term.html#f_term_mod.subst_rec"><span class="id" type="definition">subst_rec</span></a>   <span class="id" type="var">w</span> <span class="id" type="var">t</span> 0) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 5) : <span class="id" type="var">F_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Notation</span> <a name="f_term_mod.:F_scope:x_'%5B'_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">"</span></a> t [ ←h w ] " := (<a class="idref" href="f_term.html#f_term_mod.subst_rec_h"><span class="id" type="definition">subst_rec_h</span></a> <span class="id" type="var">w</span> <span class="id" type="var">t</span> 0) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 5) : <span class="id" type="var">F_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>

<br>
</span><div class="output"><pre></pre></div>
</div>

<div>
Some basic properties of the substitution function. Again, we will only need
a few functions to deal with indexes. 
</div>
<div>
<span class="command">

<br>
<span class="id" type="keyword">Lemma</span> <a name="f_term_mod.substP1"><span class="id" type="lemma">substP1</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span> <span class="id" type="var">k</span>, <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a> <a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a>  <a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a>  <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a>  <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a>)<a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a>  <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)/\</span></a><br>
               <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">H</span> <span class="id" type="var">N</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span> <span class="id" type="var">k</span>, <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">(</span></a> <a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a>)<a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">)</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 9390)
  
  ============================
   (forall (M N : Term) (i j k : nat),
    M [j ←  N] ↑  k # (j + i) = M ↑  k # (S (j + i)) [j ←  N ↑  k # i]) /\
   (forall (H : Prf) (N : Term) (i j k : nat),
    H [j ←h N] ↑h k # (j + i) = H ↑h k # (S (j + i)) [j ←h N ↑  k # i])

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="f_term.html#f_term_mod.Term_induc"><span class="id" type="definition">Term_induc</span></a>;<span class="id" type="tactic">intros</span>;<br>
[|<span class="id" type="tactic">simpl</span>;<br>
<span class="id" type="tactic">try</span> <span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>))) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)+</span></a><span class="id" type="var">i</span>)) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>;<br>
<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>; <span class="id" type="tactic">intuition</span>;<br>
<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">H0</span> <span class="id" type="var">N</span> <span class="id" type="var">i</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">j</span>)  <span class="id" type="var">k</span> );<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">H1</span> <span class="id" type="var">N</span> <span class="id" type="var">i</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">j</span>) <span class="id" type="var">k</span>);<span class="id" type="tactic">intuition</span>..].</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 9409)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   #v [j ←  N] ↑  k # (j + i) = #v ↑  k # (S (j + i)) [j ←  N ↑  k # i]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span> (<a class="idref" href="f_term.html#f_term_mod.:F_scope:'#'_x"><span class="id" type="notation">#</span></a><span class="id" type="var">v</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><span class="id" type="var">j</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <span class="id" type="var">N</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <span class="id" type="var">k</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a>).</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 9776)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑  j
   | inright _ =&gt; #(v - 1)
   end ↑  k # (j + i) = #v ↑  k # (S (j + i)) [j ←  N ↑  k # i]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">change</span> (<a class="idref" href="f_term.html#f_term_mod.:F_scope:'#'_x"><span class="id" type="notation">#</span></a><span class="id" type="var">v</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <span class="id" type="var">k</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)<a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="keyword">with</span>  (<span class="id" type="keyword">if</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)) <span class="id" type="var">v</span> <span class="id" type="keyword">then</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'#'_x"><span class="id" type="notation">#(</span></a><span class="id" type="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span><a class="idref" href="f_term.html#f_term_mod.:F_scope:'#'_x"><span class="id" type="notation">)</span></a> <span class="id" type="keyword">else</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'#'_x"><span class="id" type="notation">#</span></a><span class="id" type="var">v</span>).</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 9779)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑  j
   | inright _ =&gt; #(v - 1)
   end ↑  k # (j + i) =
   (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">j</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 9793)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  ============================
   #v ↑  k # (j + i) =
   (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]

subgoal 2 (ID 9794) is:
 N ↑  j ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
subgoal 3 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)) <span class="id" type="var">v</span>).</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 9804)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  l0 : S (j + i) &lt;= v
  ============================
   #v ↑  k # (j + i) = #(k + v) [j ←  N ↑  k # i]

subgoal 2 (ID 9805) is:
 #v ↑  k # (j + i) = #v [j ←  N ↑  k # i]
subgoal 3 (ID 9794) is:
 N ↑  j ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
subgoal 4 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 9806)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  l0 : S (j + i) &lt;= v
  ============================
   v &lt; v

subgoal 2 (ID 9805) is:
 #v ↑  k # (j + i) = #v [j ←  N ↑  k # i]
subgoal 3 (ID 9794) is:
 N ↑  j ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
subgoal 4 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">j</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 9808)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  l0 : S (j + i) &lt;= v
  ============================
   j &lt;= v

subgoal 2 (ID 9805) is:
 #v ↑  k # (j + i) = #v [j ←  N ↑  k # i]
subgoal 3 (ID 9794) is:
 N ↑  j ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
subgoal 4 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Le.html#le_trans"><span class="id" type="lemma">le_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 9805)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  ============================
   #v ↑  k # (j + i) = #v [j ←  N ↑  k # i]

subgoal 2 (ID 9794) is:
 N ↑  j ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
subgoal 3 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 9843)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  ============================
   (if le_gt_dec (j + i) v then #(k + v) else #v) =
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑  k # i ↑  j
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 9794) is:
 N ↑  j ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
subgoal 3 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>) <span class="id" type="var">v</span>).</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 9852)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v
  ============================
   #(k + v) =
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑  k # i ↑  j
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 9853) is:
 #v =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 9794) is:
 N ↑  j ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
subgoal 4 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 9854)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v
  ============================
   v &lt; v

subgoal 2 (ID 9853) is:
 #v =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 9794) is:
 N ↑  j ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
subgoal 4 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">j</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 9856)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v
  ============================
   j &lt;= v

subgoal 2 (ID 9853) is:
 #v =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 9794) is:
 N ↑  j ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
subgoal 4 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Le.html#le_trans"><span class="id" type="lemma">le_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 9853)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  g0 : j + i &gt; v
  ============================
   #v =
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑  k # i ↑  j
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 9794) is:
 N ↑  j ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
subgoal 3 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">j</span>) <span class="id" type="keyword">as</span> [[] | ]. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 9900)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  g0 : j + i &gt; v
  l0 : v &lt; j
  ============================
   #v = #v

subgoal 2 (ID 9901) is:
 #v = N ↑  k # i ↑  j
subgoal 3 (ID 9902) is:
 #v = #(v - 1)
subgoal 4 (ID 9794) is:
 N ↑  j ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
subgoal 5 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 9901)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  g0 : j + i &gt; v
  e : v = j
  ============================
   #v = N ↑  k # i ↑  j

subgoal 2 (ID 9902) is:
 #v = #(v - 1)
subgoal 3 (ID 9794) is:
 N ↑  j ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
subgoal 4 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 9909)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; j
  g : S (j + i) &gt; j
  g0 : j + i &gt; j
  ============================
   #j = N ↑  k # i ↑  j

subgoal 2 (ID 9902) is:
 #v = #(v - 1)
subgoal 3 (ID 9794) is:
 N ↑  j ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
subgoal 4 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>);<span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 9902)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  g0 : j + i &gt; v
  l0 : j &lt; v
  ============================
   #v = #(v - 1)

subgoal 2 (ID 9794) is:
 N ↑  j ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
subgoal 3 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>); <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 9794)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  e : v = j
  ============================
   N ↑  j ↑  k # (j + i) =
   (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]

subgoal 2 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)) <span class="id" type="var">v</span>). </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 9922)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  e : v = j
  l : S (j + i) &lt;= v
  ============================
   N ↑  j ↑  k # (j + i) = #(k + v) [j ←  N ↑  k # i]

subgoal 2 (ID 9923) is:
 N ↑  j ↑  k # (j + i) = #v [j ←  N ↑  k # i]
subgoal 3 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 9928)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : S (j + i) &lt;= j
  ============================
   N ↑  j ↑  k # (j + i) = #(k + j) [j ←  N ↑  k # i]

subgoal 2 (ID 9923) is:
 N ↑  j ↑  k # (j + i) = #v [j ←  N ↑  k # i]
subgoal 3 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>). </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 9929)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : S (j + i) &lt;= j
  ============================
   j &lt; j

subgoal 2 (ID 9923) is:
 N ↑  j ↑  k # (j + i) = #v [j ←  N ↑  k # i]
subgoal 3 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)). </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 9930)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : S (j + i) &lt;= j
  ============================
   j &lt; S (j + i)

subgoal 2 (ID 9931) is:
 S (j + i) &lt;= j
subgoal 3 (ID 9923) is:
 N ↑  j ↑  k # (j + i) = #v [j ←  N ↑  k # i]
subgoal 4 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 9931)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : S (j + i) &lt;= j
  ============================
   S (j + i) &lt;= j

subgoal 2 (ID 9923) is:
 N ↑  j ↑  k # (j + i) = #v [j ←  N ↑  k # i]
subgoal 3 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 9923)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  e : v = j
  g : S (j + i) &gt; v
  ============================
   N ↑  j ↑  k # (j + i) = #v [j ←  N ↑  k # i]

subgoal 2 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 9974)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  e : v = j
  g : S (j + i) &gt; v
  ============================
   N ↑  j ↑  k # (j + i) =
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑  k # i ↑  j
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">j</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 9988)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  e : v = j
  g : S (j + i) &gt; v
  l : v &lt; j
  ============================
   N ↑  j ↑  k # (j + i) = #v

subgoal 2 (ID 9989) is:
 N ↑  j ↑  k # (j + i) = N ↑  k # i ↑  j
subgoal 3 (ID 9990) is:
 N ↑  j ↑  k # (j + i) = #(v - 1)
subgoal 4 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 9996)
  
  N : Term
  i : nat
  j : nat
  k : nat
  g : S (j + i) &gt; j
  l : j &lt; j
  ============================
   N ↑  j ↑  k # (j + i) = #j

subgoal 2 (ID 9989) is:
 N ↑  j ↑  k # (j + i) = N ↑  k # i ↑  j
subgoal 3 (ID 9990) is:
 N ↑  j ↑  k # (j + i) = #(v - 1)
subgoal 4 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 9989)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  e : v = j
  g : S (j + i) &gt; v
  e0 : v = j
  ============================
   N ↑  j ↑  k # (j + i) = N ↑  k # i ↑  j

subgoal 2 (ID 9990) is:
 N ↑  j ↑  k # (j + i) = #(v - 1)
subgoal 3 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="f_term.html#f_term_mod.liftP2"><span class="id" type="lemma">liftP2</span></a>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 9990)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  e : v = j
  g : S (j + i) &gt; v
  l : j &lt; v
  ============================
   N ↑  j ↑  k # (j + i) = #(v - 1)

subgoal 2 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 10018)
  
  N : Term
  i : nat
  j : nat
  k : nat
  g : S (j + i) &gt; j
  l : j &lt; j
  ============================
   N ↑  j ↑  k # (j + i) = #(j - 1)

subgoal 2 (ID 9795) is:
 #(v - 1) ↑  k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 9795)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  ============================
   #(v - 1) ↑  k # (j + i) =
   (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ←  N ↑  k # i]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)) <span class="id" type="var">v</span>).</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 10028)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  ============================
   #(v - 1) ↑  k # (j + i) = #(k + v) [j ←  N ↑  k # i]

subgoal 2 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 10030)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  ============================
   (if le_gt_dec (j + i) (v - 1) then #(k + (v - 1)) else #(v - 1)) =
   match lt_eq_lt_dec (k + v) j with
   | inleft (left _) =&gt; #(k + v)
   | inleft (right _) =&gt; N ↑  k # i ↑  j
   | inright _ =&gt; #(k + v - 1)
   end

subgoal 2 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>) (<span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a>1)). </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 10039)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  l1 : j + i &lt;= v - 1
  ============================
   #(k + (v - 1)) =
   match lt_eq_lt_dec (k + v) j with
   | inleft (left _) =&gt; #(k + v)
   | inleft (right _) =&gt; N ↑  k # i ↑  j
   | inright _ =&gt; #(k + v - 1)
   end

subgoal 2 (ID 10040) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 3 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>) <span class="id" type="var">j</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 10054)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  l1 : j + i &lt;= v - 1
  l2 : k + v &lt; j
  ============================
   #(k + (v - 1)) = #(k + v)

subgoal 2 (ID 10055) is:
 #(k + (v - 1)) = N ↑  k # i ↑  j
subgoal 3 (ID 10056) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 4 (ID 10040) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 5 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>). </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 10057)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  l1 : j + i &lt;= v - 1
  l2 : k + v &lt; j
  ============================
   j &lt; j

subgoal 2 (ID 10055) is:
 #(k + (v - 1)) = N ↑  k # i ↑  j
subgoal 3 (ID 10056) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 4 (ID 10040) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 5 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 10058)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  l1 : j + i &lt;= v - 1
  l2 : k + v &lt; j
  ============================
   j &lt; v

subgoal 2 (ID 10059) is:
 v &lt;= j
subgoal 3 (ID 10055) is:
 #(k + (v - 1)) = N ↑  k # i ↑  j
subgoal 4 (ID 10056) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 5 (ID 10040) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 6 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 10059)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  l1 : j + i &lt;= v - 1
  l2 : k + v &lt; j
  ============================
   v &lt;= j

subgoal 2 (ID 10055) is:
 #(k + (v - 1)) = N ↑  k # i ↑  j
subgoal 3 (ID 10056) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 4 (ID 10040) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 5 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">induction</span> <span class="id" type="var">k</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 10055)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  l1 : j + i &lt;= v - 1
  e : k + v = j
  ============================
   #(k + (v - 1)) = N ↑  k # i ↑  j

subgoal 2 (ID 10056) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 3 (ID 10040) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 4 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 10113)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  l : k + v &lt; v
  l0 : S (k + v + i) &lt;= v
  l1 : k + v + i &lt;= v - 1
  ============================
   #(k + (v - 1)) = N ↑  k # i ↑  (k + v)

subgoal 2 (ID 10056) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 3 (ID 10040) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 4 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 10114)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  l : k + v &lt; v
  l0 : S (k + v + i) &lt;= v
  l1 : k + v + i &lt;= v - 1
  ============================
   v &lt; v

subgoal 2 (ID 10056) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 3 (ID 10040) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 4 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)). </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 10115)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  l : k + v &lt; v
  l0 : S (k + v + i) &lt;= v
  l1 : k + v + i &lt;= v - 1
  ============================
   v &lt; S (k + v + i)

subgoal 2 (ID 10116) is:
 S (k + v + i) &lt;= v
subgoal 3 (ID 10056) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 4 (ID 10040) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 5 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 10116)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  l : k + v &lt; v
  l0 : S (k + v + i) &lt;= v
  l1 : k + v + i &lt;= v - 1
  ============================
   S (k + v + i) &lt;= v

subgoal 2 (ID 10056) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 3 (ID 10040) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 4 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 10056)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  l1 : j + i &lt;= v - 1
  l2 : j &lt; k + v
  ============================
   #(k + (v - 1)) = #(k + v - 1)

subgoal 2 (ID 10040) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 3 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 10180)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; 0
  l0 : S (j + i) &lt;= 0
  l1 : j + i &lt;= 0 - 1
  l2 : j &lt; k + 0
  ============================
   #(k + (0 - 1)) = #(k + 0 - 1)

subgoal 2 (ID 10186) is:
 #(k + (S v - 1)) = #(k + S v - 1)
subgoal 3 (ID 10040) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 4 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_O"><span class="id" type="abbreviation">lt_n_O</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 10186)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  l0 : S (j + i) &lt;= S v
  l1 : j + i &lt;= S v - 1
  l2 : j &lt; k + S v
  ============================
   #(k + (S v - 1)) = #(k + S v - 1)

subgoal 2 (ID 10040) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 3 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- 2! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 10190)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  l0 : S (j + i) &lt;= S v
  l1 : j + i &lt;= S v - 1
  l2 : j &lt; k + S v
  ============================
   #(k + pred (S v)) = #(pred (k + S v))

subgoal 2 (ID 10040) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 3 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">replace</span> (<span class="id" type="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">v</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>)) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 10194)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  l0 : S (j + i) &lt;= S v
  l1 : j + i &lt;= S v - 1
  l2 : j &lt; k + S v
  ============================
   #(k + pred (S v)) = #(pred (S (k + v)))

subgoal 2 (ID 10040) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 3 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 10209)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  l0 : S (j + i) &lt;= S v
  l1 : j + i &lt;= S v - 1
  l2 : j &lt; k + S v
  ============================
   #(k + v) = #(k + v)

subgoal 2 (ID 10040) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 3 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 10040)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  g : j + i &gt; v - 1
  ============================
   #(v - 1) =
   match lt_eq_lt_dec (k + v) j with
   | inleft (left _) =&gt; #(k + v)
   | inleft (right _) =&gt; N ↑  k # i ↑  j
   | inright _ =&gt; #(k + v - 1)
   end

subgoal 2 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 10210)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  g : j + i &gt; v - 1
  ============================
   v &lt; v

subgoal 2 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)). </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 10211)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  g : j + i &gt; v - 1
  ============================
   v &lt; S (j + i)

subgoal 2 (ID 10212) is:
 S (j + i) &lt;= v
subgoal 3 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 10221)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; 0
  l0 : S (j + i) &lt;= 0
  g : j + i &gt; 0 - 1
  ============================
   0 &lt; S (j + i)

subgoal 2 (ID 10226) is:
 S v &lt; S (j + i)
subgoal 3 (ID 10212) is:
 S (j + i) &lt;= v
subgoal 4 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_O"><span class="id" type="abbreviation">lt_n_O</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 10226)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  l0 : S (j + i) &lt;= S v
  g : j + i &gt; S v - 1
  ============================
   S v &lt; S (j + i)

subgoal 2 (ID 10212) is:
 S (j + i) &lt;= v
subgoal 3 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 10230)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  l0 : S (j + i) &lt;= S v
  g : j + i &gt; pred (S v)
  ============================
   S v &lt; S (j + i)

subgoal 2 (ID 10212) is:
 S (j + i) &lt;= v
subgoal 3 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 10231)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  l0 : S (j + i) &lt;= S v
  g : j + i &gt; v
  ============================
   S v &lt; S (j + i)

subgoal 2 (ID 10212) is:
 S (j + i) &lt;= v
subgoal 3 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 10212)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  g : j + i &gt; v - 1
  ============================
   S (j + i) &lt;= v

subgoal 2 (ID 10029) is:
 #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 10029)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  ============================
   #(v - 1) ↑  k # (j + i) = #v [j ←  N ↑  k # i]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 10244)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  ============================
   (if le_gt_dec (j + i) (v - 1) then #(k + (v - 1)) else #(v - 1)) =
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑  k # i ↑  j
   | inright _ =&gt; #(v - 1)
   end

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>) (<span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a>1)). </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 10253)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v - 1
  ============================
   #(k + (v - 1)) =
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑  k # i ↑  j
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 10254) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(v - 1)
 end
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">j</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 10268)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v - 1
  l1 : v &lt; j
  ============================
   #(k + (v - 1)) = #v

subgoal 2 (ID 10269) is:
 #(k + (v - 1)) = N ↑  k # i ↑  j
subgoal 3 (ID 10270) is:
 #(k + (v - 1)) = #(v - 1)
subgoal 4 (ID 10254) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(v - 1)
 end
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>); <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 10269)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v - 1
  e : v = j
  ============================
   #(k + (v - 1)) = N ↑  k # i ↑  j

subgoal 2 (ID 10270) is:
 #(k + (v - 1)) = #(v - 1)
subgoal 3 (ID 10254) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(v - 1)
 end
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 10280)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; j
  g : S (j + i) &gt; j
  l0 : j + i &lt;= j - 1
  ============================
   #(k + (j - 1)) = N ↑  k # i ↑  j

subgoal 2 (ID 10270) is:
 #(k + (v - 1)) = #(v - 1)
subgoal 3 (ID 10254) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(v - 1)
 end
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 10270)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v - 1
  l1 : j &lt; v
  ============================
   #(k + (v - 1)) = #(v - 1)

subgoal 2 (ID 10254) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(v - 1)
 end
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 10282)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v - 1
  l1 : j &lt; v
  ============================
   v &lt; v

subgoal 2 (ID 10254) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(v - 1)
 end
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)). </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 10283)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v - 1
  l1 : j &lt; v
  ============================
   v &lt; S (j + i)

subgoal 2 (ID 10284) is:
 S (j + i) &lt;= v
subgoal 3 (ID 10254) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(v - 1)
 end
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 10284)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v - 1
  l1 : j &lt; v
  ============================
   S (j + i) &lt;= v

subgoal 2 (ID 10254) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(v - 1)
 end
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 10294)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; 0
  g : S (j + i) &gt; 0
  l0 : j + i &lt;= 0 - 1
  l1 : j &lt; 0
  ============================
   S (j + i) &lt;= 0

subgoal 2 (ID 10300) is:
 S (j + i) &lt;= S v
subgoal 3 (ID 10254) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(v - 1)
 end
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_O"><span class="id" type="abbreviation">lt_n_O</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 10300)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  g : S (j + i) &gt; S v
  l0 : j + i &lt;= S v - 1
  l1 : j &lt; S v
  ============================
   S (j + i) &lt;= S v

subgoal 2 (ID 10254) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(v - 1)
 end
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 10304)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  g : S (j + i) &gt; S v
  l0 : j + i &lt;= pred (S v)
  l1 : j &lt; S v
  ============================
   S (j + i) &lt;= S v

subgoal 2 (ID 10254) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(v - 1)
 end
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 10305)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  g : S (j + i) &gt; S v
  l0 : j + i &lt;= v
  l1 : j &lt; S v
  ============================
   S (j + i) &lt;= S v

subgoal 2 (ID 10254) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑  k # i ↑  j
 | inright _ =&gt; #(v - 1)
 end
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 10254)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  g0 : j + i &gt; v - 1
  ============================
   #(v - 1) =
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑  k # i ↑  j
   | inright _ =&gt; #(v - 1)
   end

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a>) <span class="id" type="keyword">as</span> [[] | ]. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 10331)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  g0 : j + i &gt; v - 1
  l0 : v &lt; j
  ============================
   #(v - 1) = #v

subgoal 2 (ID 10332) is:
 #(v - 1) = N ↑  k # i ↑  j
subgoal 3 (ID 10333) is:
 #(v - 1) = #(v - 1)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>); <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 10332)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  g0 : j + i &gt; v - 1
  e : v = j
  ============================
   #(v - 1) = N ↑  k # i ↑  j

subgoal 2 (ID 10333) is:
 #(v - 1) = #(v - 1)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 10343)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; j
  g : S (j + i) &gt; j
  g0 : j + i &gt; j - 1
  ============================
   #(j - 1) = N ↑  k # i ↑  j

subgoal 2 (ID 10333) is:
 #(v - 1) = #(v - 1)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>); <span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 10333)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  g0 : j + i &gt; v - 1
  l0 : j &lt; v
  ============================
   #(v - 1) = #(v - 1)

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>substP1 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="f_term_mod.substP2"><span class="id" type="lemma">substP2</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span> <span class="id" type="var">n</span>, <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> -&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a>  <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a>  <a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a> <a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a>  <a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a>  <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)/\</span></a><br>
               <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">H</span> <span class="id" type="var">N</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span> <span class="id" type="var">n</span>, <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> -&gt; <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">(</span></a> <a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 10357)
  
  ============================
   (forall (M N : Term) (i j n : nat),
    i &lt;= n -&gt; M ↑  j # i [(j + n) ←  N] = M [n ←  N] ↑  j # i) /\
   (forall (H : Prf) (N : Term) (i j n : nat),
    i &lt;= n -&gt; H ↑h j # i [(j + n) ←h N] = H [n ←h N] ↑h j # i)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="f_term.html#f_term_mod.Term_induc"><span class="id" type="definition">Term_induc</span></a>;<span class="id" type="tactic">intros</span>;<span class="id" type="tactic">simpl</span>;<br>
<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>; <span class="id" type="tactic">intuition</span>;<br>
<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">H0</span> <span class="id" type="var">N</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>) <span class="id" type="var">j</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)); <span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">H1</span> <span class="id" type="var">N</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>) <span class="id" type="var">j</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)); <span class="id" type="tactic">intuition</span>;<br>
<span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)) <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 10862)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  ============================
   (if le_gt_dec i v then #(j + v) else #v) [(j + n) ←  N] =
   match lt_eq_lt_dec v n with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑  n
   | inright _ =&gt; #(v - 1)
   end ↑  j # i

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">try</span> <span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>))) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)+</span></a><span class="id" type="var">i</span>)) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>;<br>
<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>; <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H1</span>; <span class="id" type="tactic">intuition</span>;<br>
<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">H0</span> <span class="id" type="var">N</span> <span class="id" type="var">i</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">j</span>)  <span class="id" type="var">k</span> );<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">H1</span> <span class="id" type="var">N</span> <span class="id" type="var">i</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">j</span>) <span class="id" type="var">k</span>);<span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 10967)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  ============================
   (if le_gt_dec i v then #(j + v) else #v) [(j + n) ←  N] =
   match lt_eq_lt_dec v n with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑  n
   | inright _ =&gt; #(v - 1)
   end ↑  j # i

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">v</span>); <span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">n</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 11036)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  ============================
   #(j + v) [(j + n) ←  N] = #v ↑  j # i

subgoal 2 (ID 11037) is:
 #(j + v) [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 3 (ID 11038) is:
 #(j + v) [(j + n) ←  N] = #(v - 1) ↑  j # i
subgoal 4 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 5 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 6 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 11055)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑  (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = (if le_gt_dec i v then #(j + v) else #v)

subgoal 2 (ID 11037) is:
 #(j + v) [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 3 (ID 11038) is:
 #(j + v) [(j + n) ←  N] = #(v - 1) ↑  j # i
subgoal 4 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 5 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 6 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">v</span>). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 11064)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  l1 : i &lt;= v
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑  (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #(j + v)

subgoal 2 (ID 11065) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑  (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #v
subgoal 3 (ID 11037) is:
 #(j + v) [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 4 (ID 11038) is:
 #(j + v) [(j + n) ←  N] = #(v - 1) ↑  j # i
subgoal 5 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 6 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 7 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>) (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>9 subgoals, subgoal 1 (ID 11079)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  l1 : i &lt;= v
  l2 : j + v &lt; j + n
  ============================
   #(j + v) = #(j + v)

subgoal 2 (ID 11080) is:
 N ↑  (j + n) = #(j + v)
subgoal 3 (ID 11081) is:
 #(j + v - 1) = #(j + v)
subgoal 4 (ID 11065) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑  (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #v
subgoal 5 (ID 11037) is:
 #(j + v) [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 6 (ID 11038) is:
 #(j + v) [(j + n) ←  N] = #(v - 1) ↑  j # i
subgoal 7 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 8 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 9 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 11080)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  l1 : i &lt;= v
  e : j + v = j + n
  ============================
   N ↑  (j + n) = #(j + v)

subgoal 2 (ID 11081) is:
 #(j + v - 1) = #(j + v)
subgoal 3 (ID 11065) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑  (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #v
subgoal 4 (ID 11037) is:
 #(j + v) [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 5 (ID 11038) is:
 #(j + v) [(j + n) ←  N] = #(v - 1) ↑  j # i
subgoal 6 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 7 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 8 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_reg_l"><span class="id" type="lemma">plus_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">e</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 11084)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  l1 : i &lt;= v
  e : v = n
  ============================
   N ↑  (j + n) = #(j + v)

subgoal 2 (ID 11081) is:
 #(j + v - 1) = #(j + v)
subgoal 3 (ID 11065) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑  (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #v
subgoal 4 (ID 11037) is:
 #(j + v) [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 5 (ID 11038) is:
 #(j + v) [(j + n) ←  N] = #(v - 1) ↑  j # i
subgoal 6 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 7 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 8 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 11091)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  l0 : n &lt; n
  l1 : i &lt;= n
  ============================
   N ↑  (j + n) = #(j + n)

subgoal 2 (ID 11081) is:
 #(j + v - 1) = #(j + v)
subgoal 3 (ID 11065) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑  (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #v
subgoal 4 (ID 11037) is:
 #(j + v) [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 5 (ID 11038) is:
 #(j + v) [(j + n) ←  N] = #(v - 1) ↑  j # i
subgoal 6 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 7 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 8 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 11081)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  l1 : i &lt;= v
  l2 : j + n &lt; j + v
  ============================
   #(j + v - 1) = #(j + v)

subgoal 2 (ID 11065) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑  (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #v
subgoal 3 (ID 11037) is:
 #(j + v) [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 4 (ID 11038) is:
 #(j + v) [(j + n) ←  N] = #(v - 1) ↑  j # i
subgoal 5 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 6 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 7 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_lt_reg_l"><span class="id" type="lemma">plus_lt_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l2</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 11094)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  l1 : i &lt;= v
  l2 : n &lt; v
  ============================
   #(j + v - 1) = #(j + v)

subgoal 2 (ID 11065) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑  (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #v
subgoal 3 (ID 11037) is:
 #(j + v) [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 4 (ID 11038) is:
 #(j + v) [(j + n) ←  N] = #(v - 1) ↑  j # i
subgoal 5 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 6 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 7 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_asym"><span class="id" type="lemma">lt_asym</span></a> <span class="id" type="var">v</span> <span class="id" type="var">n</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 11065)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  g : i &gt; v
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑  (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #v

subgoal 2 (ID 11037) is:
 #(j + v) [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 3 (ID 11038) is:
 #(j + v) [(j + n) ←  N] = #(v - 1) ↑  j # i
subgoal 4 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 5 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 6 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 11097)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  g : i &gt; v
  ============================
   i &lt; i

subgoal 2 (ID 11037) is:
 #(j + v) [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 3 (ID 11038) is:
 #(j + v) [(j + n) ←  N] = #(v - 1) ↑  j # i
subgoal 4 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 5 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 6 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 11037)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  e : v = n
  ============================
   #(j + v) [(j + n) ←  N] = N ↑  n ↑  j # i

subgoal 2 (ID 11038) is:
 #(j + v) [(j + n) ←  N] = #(v - 1) ↑  j # i
subgoal 3 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 4 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 5 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 11104)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  ============================
   #(j + n) [(j + n) ←  N] = N ↑  n ↑  j # i

subgoal 2 (ID 11038) is:
 #(j + v) [(j + n) ←  N] = #(v - 1) ↑  j # i
subgoal 3 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 4 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 5 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 11105)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  ============================
   match lt_eq_lt_dec (j + n) (j + n) with
   | inleft (left _) =&gt; #(j + n)
   | inleft (right _) =&gt; N ↑  (j + n)
   | inright _ =&gt; #(j + n - 1)
   end = N ↑  n ↑  j # i

subgoal 2 (ID 11038) is:
 #(j + v) [(j + n) ←  N] = #(v - 1) ↑  j # i
subgoal 3 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 4 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 5 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>) (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 11119)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  l0 : j + n &lt; j + n
  ============================
   #(j + n) = N ↑  n ↑  j # i

subgoal 2 (ID 11120) is:
 N ↑  (j + n) = N ↑  n ↑  j # i
subgoal 3 (ID 11121) is:
 #(j + n - 1) = N ↑  n ↑  j # i
subgoal 4 (ID 11038) is:
 #(j + v) [(j + n) ←  N] = #(v - 1) ↑  j # i
subgoal 5 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 6 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 7 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l0</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 11120)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  e : j + n = j + n
  ============================
   N ↑  (j + n) = N ↑  n ↑  j # i

subgoal 2 (ID 11121) is:
 #(j + n - 1) = N ↑  n ↑  j # i
subgoal 3 (ID 11038) is:
 #(j + v) [(j + n) ←  N] = #(v - 1) ↑  j # i
subgoal 4 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 5 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 6 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">symmetry</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 11125)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  e : j + n = j + n
  ============================
   N ↑  n ↑  j # i = N ↑  (j + n)

subgoal 2 (ID 11121) is:
 #(j + n - 1) = N ↑  n ↑  j # i
subgoal 3 (ID 11038) is:
 #(j + v) [(j + n) ←  N] = #(v - 1) ↑  j # i
subgoal 4 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 5 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 6 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="f_term.html#f_term_mod.liftP3"><span class="id" type="lemma">liftP3</span></a>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 11121)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  l0 : j + n &lt; j + n
  ============================
   #(j + n - 1) = N ↑  n ↑  j # i

subgoal 2 (ID 11038) is:
 #(j + v) [(j + n) ←  N] = #(v - 1) ↑  j # i
subgoal 3 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 4 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 5 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l0</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 11038)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  ============================
   #(j + v) [(j + n) ←  N] = #(v - 1) ↑  j # i

subgoal 2 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 3 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 4 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 11144)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑  (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = (if le_gt_dec i (v - 1) then #(j + (v - 1)) else #(v - 1))

subgoal 2 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 3 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 4 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">i</span> (<span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a>1)). </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 11153)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  l1 : i &lt;= v - 1
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑  (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #(j + (v - 1))

subgoal 2 (ID 11154) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑  (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 3 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 4 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 5 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>) (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>))<span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 11168)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  l1 : i &lt;= v - 1
  l2 : j + v &lt; j + n
  ============================
   #(j + v) = #(j + (v - 1))

subgoal 2 (ID 11169) is:
 N ↑  (j + n) = #(j + (v - 1))
subgoal 3 (ID 11170) is:
 #(j + v - 1) = #(j + (v - 1))
subgoal 4 (ID 11154) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑  (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 5 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 6 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 7 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_lt_reg_l"><span class="id" type="lemma">plus_lt_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l2</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 11172)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  l1 : i &lt;= v - 1
  l2 : v &lt; n
  ============================
   #(j + v) = #(j + (v - 1))

subgoal 2 (ID 11169) is:
 N ↑  (j + n) = #(j + (v - 1))
subgoal 3 (ID 11170) is:
 #(j + v - 1) = #(j + (v - 1))
subgoal 4 (ID 11154) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑  (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 5 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 6 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 7 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_asym"><span class="id" type="lemma">lt_asym</span></a>  <span class="id" type="var">v</span> <span class="id" type="var">n</span> ); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 11169)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  l1 : i &lt;= v - 1
  e : j + v = j + n
  ============================
   N ↑  (j + n) = #(j + (v - 1))

subgoal 2 (ID 11170) is:
 #(j + v - 1) = #(j + (v - 1))
subgoal 3 (ID 11154) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑  (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 4 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 5 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 6 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_reg_l"><span class="id" type="lemma">plus_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">e</span>; <span class="id" type="tactic">subst</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 11183)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  l0 : n &lt; n
  l1 : i &lt;= n - 1
  ============================
   N ↑  (j + n) = #(j + (n - 1))

subgoal 2 (ID 11170) is:
 #(j + v - 1) = #(j + (v - 1))
subgoal 3 (ID 11154) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑  (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 4 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 5 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 6 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 11170)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  l1 : i &lt;= v - 1
  l2 : j + n &lt; j + v
  ============================
   #(j + v - 1) = #(j + (v - 1))

subgoal 2 (ID 11154) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑  (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 3 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 4 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 5 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 11194)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= 0
  l0 : n &lt; 0
  l1 : i &lt;= 0 - 1
  l2 : j + n &lt; j + 0
  ============================
   #(j + 0 - 1) = #(j + (0 - 1))

subgoal 2 (ID 11200) is:
 #(j + S v - 1) = #(j + (S v - 1))
subgoal 3 (ID 11154) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑  (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 4 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 5 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 6 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_O"><span class="id" type="abbreviation">lt_n_O</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l0</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 11200)
  
  v : nat
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= S v
  l0 : n &lt; S v
  l1 : i &lt;= S v - 1
  l2 : j + n &lt; j + S v
  ============================
   #(j + S v - 1) = #(j + (S v - 1))

subgoal 2 (ID 11154) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑  (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 3 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 4 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 5 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- 2! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 11204)
  
  v : nat
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= S v
  l0 : n &lt; S v
  l1 : i &lt;= S v - 1
  l2 : j + n &lt; j + S v
  ============================
   #(pred (j + S v)) = #(j + pred (S v))

subgoal 2 (ID 11154) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑  (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 3 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 4 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 5 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">replace</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">v</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>)) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 11208)
  
  v : nat
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= S v
  l0 : n &lt; S v
  l1 : i &lt;= S v - 1
  l2 : j + n &lt; j + S v
  ============================
   #(pred (S (j + v))) = #(j + pred (S v))

subgoal 2 (ID 11154) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑  (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 3 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 4 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 5 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 11224)
  
  v : nat
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= S v
  l0 : n &lt; S v
  l1 : i &lt;= S v - 1
  l2 : j + n &lt; j + S v
  ============================
   #(j + v) = #(j + v)

subgoal 2 (ID 11154) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑  (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 3 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 4 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 5 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 11154)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  g : i &gt; v - 1
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑  (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #(v - 1)

subgoal 2 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 3 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 4 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#gt"><span class="id" type="definition">gt</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>. </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 11225)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  g : v - 1 &lt; i
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑  (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #(v - 1)

subgoal 2 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 3 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 4 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#lt"><span class="id" type="definition">lt</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>. </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 11226)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  g : S (v - 1) &lt;= i
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑  (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #(v - 1)

subgoal 2 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 3 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 4 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 11228)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  g : S (pred v) &lt;= i
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑  (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #(v - 1)

subgoal 2 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 3 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 4 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#S_pred"><span class="id" type="lemma">S_pred</span></a>  <span class="id" type="var">v</span> <span class="id" type="var">n</span> <span class="id" type="var">l0</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 11230)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  g : v &lt;= i
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑  (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #(v - 1)

subgoal 2 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 3 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 4 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>). </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 11231)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  g : v &lt;= i
  ============================
   n &lt; n

subgoal 2 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 3 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 4 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 11233)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  g : v &lt;= i
  ============================
   v &lt;= n

subgoal 2 (ID 11052) is:
 #v [(j + n) ←  N] = #v ↑  j # i
subgoal 3 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 4 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Le.html#le_trans"><span class="id" type="lemma">le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 11052)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  ============================
   #v [(j + n) ←  N] = #v ↑  j # i

subgoal 2 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 3 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 11236)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  ============================
   match lt_eq_lt_dec v (j + n) with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑  (j + n)
   | inright _ =&gt; #(v - 1)
   end = (if le_gt_dec i v then #(j + v) else #v)

subgoal 2 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 3 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">v</span>). </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 11245)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  l0 : i &lt;= v
  ============================
   match lt_eq_lt_dec v (j + n) with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑  (j + n)
   | inright _ =&gt; #(v - 1)
   end = #(j + v)

subgoal 2 (ID 11246) is:
 match lt_eq_lt_dec v (j + n) with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑  (j + n)
 | inright _ =&gt; #(v - 1)
 end = #v
subgoal 3 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 4 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 11247)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  l0 : i &lt;= v
  ============================
   i &lt; i

subgoal 2 (ID 11246) is:
 match lt_eq_lt_dec v (j + n) with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑  (j + n)
 | inright _ =&gt; #(v - 1)
 end = #v
subgoal 3 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 4 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 11246)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  g0 : i &gt; v
  ============================
   match lt_eq_lt_dec v (j + n) with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑  (j + n)
   | inright _ =&gt; #(v - 1)
   end = #v

subgoal 2 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 3 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)) <span class="id" type="keyword">as</span> [[] | ]. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 11263)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  g0 : i &gt; v
  l0 : v &lt; j + n
  ============================
   #v = #v

subgoal 2 (ID 11264) is:
 N ↑  (j + n) = #v
subgoal 3 (ID 11265) is:
 #(v - 1) = #v
subgoal 4 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 5 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 11264)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  g0 : i &gt; v
  e : v = j + n
  ============================
   N ↑  (j + n) = #v

subgoal 2 (ID 11265) is:
 #(v - 1) = #v
subgoal 3 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 4 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 11273)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; j + n
  l : j + n &lt; n
  g0 : i &gt; j + n
  ============================
   N ↑  (j + n) = #(j + n)

subgoal 2 (ID 11265) is:
 #(v - 1) = #v
subgoal 3 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 4 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>). </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 11274)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; j + n
  l : j + n &lt; n
  g0 : i &gt; j + n
  ============================
   n &lt; n

subgoal 2 (ID 11265) is:
 #(v - 1) = #v
subgoal 3 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 4 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 11265)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  g0 : i &gt; v
  l0 : j + n &lt; v
  ============================
   #(v - 1) = #v

subgoal 2 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 3 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>). </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 11286)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  g0 : i &gt; v
  l0 : j + n &lt; v
  ============================
   n &lt; n

subgoal 2 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 3 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 11287)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  g0 : i &gt; v
  l0 : j + n &lt; v
  ============================
   n &lt; v

subgoal 2 (ID 11288) is:
 v &lt; n
subgoal 3 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 4 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>); <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 11288)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  g0 : i &gt; v
  l0 : j + n &lt; v
  ============================
   v &lt; n

subgoal 2 (ID 11053) is:
 #v [(j + n) ←  N] = N ↑  n ↑  j # i
subgoal 3 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 11053)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  e : v = n
  ============================
   #v [(j + n) ←  N] = N ↑  n ↑  j # i

subgoal 2 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 11302)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  e : v = n
  ============================
   match lt_eq_lt_dec v (j + n) with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑  (j + n)
   | inright _ =&gt; #(v - 1)
   end = N ↑  n ↑  j # i

subgoal 2 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 11307)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; n
  ============================
   match lt_eq_lt_dec n (j + n) with
   | inleft (left _) =&gt; #n
   | inleft (right _) =&gt; N ↑  (j + n)
   | inright _ =&gt; #(n - 1)
   end = N ↑  n ↑  j # i

subgoal 2 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>). </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 11308)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; n
  ============================
   n &lt; n

subgoal 2 (ID 11054) is:
 #v [(j + n) ←  N] = #(v - 1) ↑  j # i
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 11054)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt; v
  ============================
   #v [(j + n) ←  N] = #(v - 1) ↑  j # i

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 11311)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt; v
  ============================
   match lt_eq_lt_dec v (j + n) with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑  (j + n)
   | inright _ =&gt; #(v - 1)
   end = (if le_gt_dec i (v - 1) then #(j + (v - 1)) else #(v - 1))

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>). </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 11312)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt; v
  ============================
   n &lt; n

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 11314)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt; v
  ============================
   v &lt;= n

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Le.html#le_trans"><span class="id" type="lemma">le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>substP2 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="f_term_mod.substP3"><span class="id" type="lemma">substP3</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">i</span> <span class="id" type="var">k</span> <span class="id" type="var">n</span>, <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> -&gt; <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> -&gt;  <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a>  <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a>  <a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a>  <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)/\</span></a><br>
               <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">H</span> <span class="id" type="var">N</span> <span class="id" type="var">i</span> <span class="id" type="var">k</span> <span class="id" type="var">n</span>, <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> -&gt; <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> -&gt;  <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 11359)
  
  ============================
   (forall (M N : Term) (i k n : nat),
    i &lt;= k -&gt; k &lt;= i + n -&gt; M ↑  (S n) # i [k ←  N] = M ↑  n # i) /\
   (forall (H : Prf) (N : Term) (i k n : nat),
    i &lt;= k -&gt; k &lt;= i + n -&gt; H ↑h (S n) # i [k ←h N] = H ↑h n # i)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="f_term.html#f_term_mod.Term_induc"><span class="id" type="definition">Term_induc</span></a>;<span class="id" type="tactic">intros</span>;<span class="id" type="tactic">simpl</span>;<br>
<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>; <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H1</span>; <span class="id" type="tactic">intuition</span>; <br>
<span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <span class="id" type="var">n</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>));<span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 13502)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   (if le_gt_dec i v then #(S (n + v)) else #v) [k ←  N] =
   (if le_gt_dec i v then #(n + v) else #v)

(dependent evars:)

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">v</span>).</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 13604)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  ============================
   #(S (n + v)) [k ←  N] = #(n + v)

subgoal 2 (ID 13605) is:
 #v [k ←  N] = #v
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">unfold</span> <a class="idref" href="f_term.html#f_term_mod.subst_rec"><span class="id" type="definition">subst_rec</span></a>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 13606)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  ============================
   match lt_eq_lt_dec (S (n + v)) k with
   | inleft (left _) =&gt; #(S (n + v))
   | inleft (right _) =&gt; N ↑  k
   | inright _ =&gt; #(S (n + v) - 1)
   end = #(n + v)

subgoal 2 (ID 13605) is:
 #v [k ←  N] = #v
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>)) <span class="id" type="var">k</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 13620)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : S (n + v) &lt; k
  ============================
   #(S (n + v)) = #(n + v)

subgoal 2 (ID 13621) is:
 N ↑  k = #(n + v)
subgoal 3 (ID 13622) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 4 (ID 13605) is:
 #v [k ←  N] = #v
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)). </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 13623)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : S (n + v) &lt; k
  ============================
   i + n &lt; i + n

subgoal 2 (ID 13621) is:
 N ↑  k = #(n + v)
subgoal 3 (ID 13622) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 4 (ID 13605) is:
 #v [k ←  N] = #v
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">k</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 13624)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : S (n + v) &lt; k
  ============================
   i + n &lt; k

subgoal 2 (ID 13621) is:
 N ↑  k = #(n + v)
subgoal 3 (ID 13622) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 4 (ID 13605) is:
 #v [k ←  N] = #v
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>). </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 13682)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : S (n + v) &lt; k
  ============================
   i + n &lt;= v + n

subgoal 2 (ID 13683) is:
 v + n &lt; k
subgoal 3 (ID 13621) is:
 N ↑  k = #(n + v)
subgoal 4 (ID 13622) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 5 (ID 13605) is:
 #v [k ←  N] = #v
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 13683)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : S (n + v) &lt; k
  ============================
   v + n &lt; k

subgoal 2 (ID 13621) is:
 N ↑  k = #(n + v)
subgoal 3 (ID 13622) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 4 (ID 13605) is:
 #v [k ←  N] = #v
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 13621)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  e : S (n + v) = k
  ============================
   N ↑  k = #(n + v)

subgoal 2 (ID 13622) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 3 (ID 13605) is:
 #v [k ←  N] = #v
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 13731)
  
  v : Vars
  N : Term
  i : nat
  n : nat
  l : i &lt;= v
  H : i &lt;= S (n + v)
  H0 : S (n + v) &lt;= i + n
  ============================
   N ↑  (S (n + v)) = #(n + v)

subgoal 2 (ID 13622) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 3 (ID 13605) is:
 #v [k ←  N] = #v
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">replace</span> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>) <span class="id" type="keyword">with</span> (<span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H0</span> <span class="id" type="tactic">by</span> (<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a>) . </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 13736)
  
  v : Vars
  N : Term
  i : nat
  n : nat
  l : i &lt;= v
  H : i &lt;= S (n + v)
  H0 : S (n + v) &lt;= n + i
  ============================
   N ↑  (S (n + v)) = #(n + v)

subgoal 2 (ID 13622) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 3 (ID 13605) is:
 #v [k ←  N] = #v
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>)) <span class="id" type="keyword">with</span> (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">v</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H0</span> <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 13742)
  
  v : Vars
  N : Term
  i : nat
  n : nat
  l : i &lt;= v
  H : i &lt;= S (n + v)
  H0 : n + S v &lt;= n + i
  ============================
   N ↑  (S (n + v)) = #(n + v)

subgoal 2 (ID 13622) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 3 (ID 13605) is:
 #v [k ←  N] = #v
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_le_reg_l"><span class="id" type="lemma">plus_le_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H0</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 13758)
  
  v : Vars
  N : Term
  i : nat
  n : nat
  l : i &lt;= v
  H : i &lt;= S (n + v)
  H0 : S v &lt;= i
  ============================
   N ↑  (S (n + v)) = #(n + v)

subgoal 2 (ID 13622) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 3 (ID 13605) is:
 #v [k ←  N] = #v
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 13759)
  
  v : Vars
  N : Term
  i : nat
  n : nat
  l : i &lt;= v
  H : i &lt;= S (n + v)
  H0 : S v &lt;= i
  ============================
   i &lt; i

subgoal 2 (ID 13622) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 3 (ID 13605) is:
 #v [k ←  N] = #v
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 13622)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : k &lt; S (n + v)
  ============================
   #(S (n + v) - 1) = #(n + v)

subgoal 2 (ID 13605) is:
 #v [k ←  N] = #v
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 13762)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : k &lt; S (n + v)
  ============================
   #(n + v - 0) = #(n + v)

subgoal 2 (ID 13605) is:
 #v [k ←  N] = #v
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#minus_n_O"><span class="id" type="lemma">minus_n_O</span></a>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 13763)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : k &lt; S (n + v)
  ============================
   #(n + v) = #(n + v)

subgoal 2 (ID 13605) is:
 #v [k ←  N] = #v
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 13605)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  ============================
   #v [k ←  N] = #v

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 13764)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  ============================
   match lt_eq_lt_dec v k with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑  k
   | inright _ =&gt; #(v - 1)
   end = #v

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">k</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 13778)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : v &lt; k
  ============================
   #v = #v

subgoal 2 (ID 13779) is:
 N ↑  k = #v
subgoal 3 (ID 13780) is:
 #(v - 1) = #v
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">reflexivity</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 13779)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  e : v = k
  ============================
   N ↑  k = #v

subgoal 2 (ID 13780) is:
 #(v - 1) = #v
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 13786)
  
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; k
  ============================
   N ↑  k = #k

subgoal 2 (ID 13780) is:
 #(v - 1) = #v
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 13787)
  
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; k
  ============================
   i &lt; i

subgoal 2 (ID 13780) is:
 #(v - 1) = #v
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">k</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 13780)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt; v
  ============================
   #(v - 1) = #v

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">k</span>). </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 13790)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt; v
  ============================
   k &lt; k

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 13792)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt; v
  ============================
   v &lt; k

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>substP3 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="f_term_mod.substP4"><span class="id" type="lemma">substP4</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">P</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span>, <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">])</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="f_term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a>) <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="f_term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">])</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="f_term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)/\</span></a><br>
               <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">H</span> <span class="id" type="var">N</span> <span class="id" type="var">P</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span>, <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">])</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a>) <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">])</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="f_term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 13807)
  
  ============================
   (forall (M N P : Term) (i j : nat),
    M [i ←  N] [(i + j) ←  P] = M [(S (i + j)) ←  P] [i ←  N [j ←  P]]) /\
   (forall (H : Prf) (N P : Term) (i j : nat),
    H [i ←h N] [(i + j) ←h P] = H [(S (i + j)) ←h P] [i ←h N [j ←  P]])

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="f_term.html#f_term_mod.Term_induc"><span class="id" type="definition">Term_induc</span></a>;<span class="id" type="tactic">intros</span>;<span class="id" type="tactic">simpl</span>;<br>
[|(<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">intuition</span>;<span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>))) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)+</span></a> <span class="id" type="var">j</span>)) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>; <br>
<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">H0</span>; <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)+</span></a> <span class="id" type="var">j</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>; <br>
<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H1</span>; <span class="id" type="tactic">intuition</span>)..].</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 13924)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  ============================
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑  i
   | inright _ =&gt; #(v - 1)
   end [(i + j) ←  P] =
   match lt_eq_lt_dec v (S (i + j)) with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; P ↑  (S (i + j))
   | inright _ =&gt; #(v - 1)
   end [i ←  N [j ←  P]]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">i</span>) <span class="id" type="keyword">as</span> [[] | ] ; <span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>))) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>9 subgoals, subgoal 1 (ID 14186)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  ============================
   #v [(i + j) ←  P] = #v [i ←  N [j ←  P]]

subgoal 2 (ID 14187) is:
 #v [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 3 (ID 14188) is:
 #v [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 4 (ID 14202) is:
 N ↑  i [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 5 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 6 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 7 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 8 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 9 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>9 subgoals, subgoal 1 (ID 14221)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  ============================
   match lt_eq_lt_dec v (i + j) with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; P ↑  (i + j)
   | inright _ =&gt; #(v - 1)
   end =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 14187) is:
 #v [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 3 (ID 14188) is:
 #v [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 4 (ID 14202) is:
 N ↑  i [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 5 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 6 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 7 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 8 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 9 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) <span class="id" type="keyword">as</span> [[] | ]. </span><div class="output"><pre>11 subgoals, subgoal 1 (ID 14235)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : v &lt; i + j
  ============================
   #v =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 14236) is:
 P ↑  (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 14237) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 14187) is:
 #v [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 5 (ID 14188) is:
 #v [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 6 (ID 14202) is:
 N ↑  i [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 7 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 8 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 9 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 10 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 11 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">i</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>13 subgoals, subgoal 1 (ID 14251)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : v &lt; i + j
  l2 : v &lt; i
  ============================
   #v = #v

subgoal 2 (ID 14252) is:
 #v = N [j ←  P] ↑  i
subgoal 3 (ID 14253) is:
 #v = #(v - 1)
subgoal 4 (ID 14236) is:
 P ↑  (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 5 (ID 14237) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 6 (ID 14187) is:
 #v [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 7 (ID 14188) is:
 #v [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 8 (ID 14202) is:
 N ↑  i [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 9 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 10 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 11 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 12 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 13 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>12 subgoals, subgoal 1 (ID 14252)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : v &lt; i + j
  e : v = i
  ============================
   #v = N [j ←  P] ↑  i

subgoal 2 (ID 14253) is:
 #v = #(v - 1)
subgoal 3 (ID 14236) is:
 P ↑  (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 14237) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 5 (ID 14187) is:
 #v [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 6 (ID 14188) is:
 #v [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 7 (ID 14202) is:
 N ↑  i [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 8 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 9 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 10 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 11 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 12 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>12 subgoals, subgoal 1 (ID 14260)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; i
  l0 : i &lt; S (i + j)
  l1 : i &lt; i + j
  ============================
   #i = N [j ←  P] ↑  i

subgoal 2 (ID 14253) is:
 #v = #(v - 1)
subgoal 3 (ID 14236) is:
 P ↑  (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 14237) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 5 (ID 14187) is:
 #v [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 6 (ID 14188) is:
 #v [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 7 (ID 14202) is:
 N ↑  i [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 8 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 9 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 10 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 11 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 12 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l</span>. </span><div class="output"><pre>11 subgoals, subgoal 1 (ID 14253)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : v &lt; i + j
  l2 : i &lt; v
  ============================
   #v = #(v - 1)

subgoal 2 (ID 14236) is:
 P ↑  (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 14237) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 14187) is:
 #v [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 5 (ID 14188) is:
 #v [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 6 (ID 14202) is:
 N ↑  i [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 7 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 8 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 9 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 10 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 11 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> ( <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_asym"><span class="id" type="lemma">lt_asym</span></a> <span class="id" type="var">v</span> <span class="id" type="var">i</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>10 subgoals, subgoal 1 (ID 14236)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  e : v = i + j
  ============================
   P ↑  (i + j) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 14237) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 14187) is:
 #v [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 4 (ID 14188) is:
 #v [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 5 (ID 14202) is:
 N ↑  i [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 6 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 7 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 8 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 9 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 10 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 14270)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i + j &lt; i
  l0 : i + j &lt; S (i + j)
  ============================
   P ↑  (i + j) =
   match lt_eq_lt_dec (i + j) i with
   | inleft (left _) =&gt; #(i + j)
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(i + j - 1)
   end

subgoal 2 (ID 14237) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 14187) is:
 #v [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 4 (ID 14188) is:
 #v [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 5 (ID 14202) is:
 N ↑  i [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 6 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 7 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 8 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 9 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 10 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l</span>. </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 14272)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : j + i &lt; i
  l0 : i + j &lt; S (i + j)
  ============================
   P ↑  (i + j) =
   match lt_eq_lt_dec (i + j) i with
   | inleft (left _) =&gt; #(i + j)
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(i + j - 1)
   end

subgoal 2 (ID 14237) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 14187) is:
 #v [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 4 (ID 14188) is:
 #v [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 5 (ID 14202) is:
 N ↑  i [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 6 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 7 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 8 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 9 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 10 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 14273)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : j + i &lt; i
  l0 : i + j &lt; S (i + j)
  ============================
   i &lt; i

subgoal 2 (ID 14237) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 14187) is:
 #v [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 4 (ID 14188) is:
 #v [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 5 (ID 14202) is:
 N ↑  i [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 6 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 7 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 8 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 9 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 10 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">induction</span> <span class="id" type="var">j</span>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>9 subgoals, subgoal 1 (ID 14237)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : i + j &lt; v
  ============================
   #(v - 1) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 14187) is:
 #v [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 3 (ID 14188) is:
 #v [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 4 (ID 14202) is:
 N ↑  i [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 5 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 6 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 7 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 8 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 9 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 14324)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : i + j &lt; v
  ============================
   i &lt; i

subgoal 2 (ID 14187) is:
 #v [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 3 (ID 14188) is:
 #v [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 4 (ID 14202) is:
 N ↑  i [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 5 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 6 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 7 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 8 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 9 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>;<span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 14325)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : i + j &lt; v
  ============================
   i &lt;= v

subgoal 2 (ID 14187) is:
 #v [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 3 (ID 14188) is:
 #v [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 4 (ID 14202) is:
 N ↑  i [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 5 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 6 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 7 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 8 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 9 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>9 subgoals, subgoal 1 (ID 14347)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : j + i &lt; v
  ============================
   i &lt;= v

subgoal 2 (ID 14187) is:
 #v [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 3 (ID 14188) is:
 #v [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 4 (ID 14202) is:
 N ↑  i [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 5 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 6 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 7 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 8 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 9 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">induction</span> <span class="id" type="var">j</span>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 14187)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  e : v = S (i + j)
  ============================
   #v [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]

subgoal 2 (ID 14188) is:
 #v [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 3 (ID 14202) is:
 N ↑  i [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 4 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 5 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 6 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 7 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 8 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 14443)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : S (i + j) &lt; i
  ============================
   #(S (i + j)) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]

subgoal 2 (ID 14188) is:
 #v [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 3 (ID 14202) is:
 N ↑  i [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 4 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 5 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 6 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 7 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 8 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 14444)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : S (i + j) &lt; i
  ============================
   i &lt; i

subgoal 2 (ID 14188) is:
 #v [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 3 (ID 14202) is:
 N ↑  i [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 4 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 5 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 6 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 7 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 8 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 14188)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : S (i + j) &lt; v
  ============================
   #v [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]

subgoal 2 (ID 14202) is:
 N ↑  i [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 3 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 4 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 5 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 6 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 7 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 14489)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : S (i + j) &lt; v
  ============================
   i &lt; i

subgoal 2 (ID 14202) is:
 N ↑  i [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 3 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 4 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 5 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 6 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 7 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)); <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 14491)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : S (i + j) &lt; v
  ============================
   S (i + j) &lt; i

subgoal 2 (ID 14202) is:
 N ↑  i [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 3 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 4 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 5 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 6 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 7 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 14202)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  e : v = i
  l : v &lt; S (i + j)
  ============================
   N ↑  i [(i + j) ←  P] = #v [i ←  N [j ←  P]]

subgoal 2 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 3 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 4 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 5 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 6 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 14592)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  e : v = i
  l : v &lt; S (i + j)
  ============================
   N ↑  i [(i + j) ←  P] =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 3 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 4 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 5 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 6 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 14597)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  ============================
   N ↑  i [(i + j) ←  P] =
   match lt_eq_lt_dec i i with
   | inleft (left _) =&gt; #i
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(i - 1)
   end

subgoal 2 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 3 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 4 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 5 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 6 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">i</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 14611)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  l0 : i &lt; i
  ============================
   N ↑  i [(i + j) ←  P] = #i

subgoal 2 (ID 14612) is:
 N ↑  i [(i + j) ←  P] = N [j ←  P] ↑  i
subgoal 3 (ID 14613) is:
 N ↑  i [(i + j) ←  P] = #(i - 1)
subgoal 4 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 5 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 6 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 7 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 8 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>); <span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 14612)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  e : i = i
  ============================
   N ↑  i [(i + j) ←  P] = N [j ←  P] ↑  i

subgoal 2 (ID 14613) is:
 N ↑  i [(i + j) ←  P] = #(i - 1)
subgoal 3 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 4 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 5 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 6 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 7 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="f_term.html#f_term_mod.substP2"><span class="id" type="lemma">substP2</span></a>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 14613)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  l0 : i &lt; i
  ============================
   N ↑  i [(i + j) ←  P] = #(i - 1)

subgoal 2 (ID 14203) is:
 N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 3 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 4 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 5 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 6 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 14203)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  e : v = i
  e0 : v = S (i + j)
  ============================
   N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]

subgoal 2 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 3 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 4 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 5 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 14633)
  
  N : Term
  P : Term
  i : nat
  j : nat
  e0 : i = S (i + j)
  ============================
   N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]

subgoal 2 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 3 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 4 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 5 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">e0</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 14635)
  
  N : Term
  P : Term
  i : nat
  j : nat
  e0 : i = S (j + i)
  ============================
   N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]

subgoal 2 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 3 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 4 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 5 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#succ_plus_discr"><span class="id" type="lemma">succ_plus_discr</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">e0</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 14637)
  
  N : Term
  P : Term
  i : nat
  j : nat
  e0 : False
  ============================
   N ↑  i [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]

subgoal 2 (ID 14204) is:
 N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
subgoal 3 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 4 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 5 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> <span class="id" type="var">e0</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 14204)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  e : v = i
  l : S (i + j) &lt; v
  ============================
   N ↑  i [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]

subgoal 2 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 3 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 4 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 14642)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : S (i + j) &lt; i
  ============================
   N ↑  i [(i + j) ←  P] = #(i - 1) [i ←  N [j ←  P]]

subgoal 2 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 3 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 4 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 14643)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : S (i + j) &lt; i
  ============================
   i &lt; i

subgoal 2 (ID 14218) is:
 #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]
subgoal 3 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 4 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 14218)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  ============================
   #(v - 1) [(i + j) ←  P] = #v [i ←  N [j ←  P]]

subgoal 2 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 3 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 14671)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  ============================
   match lt_eq_lt_dec (v - 1) (i + j) with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; P ↑  (i + j)
   | inright _ =&gt; #(v - 1 - 1)
   end =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 3 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a>1) (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) <span class="id" type="keyword">as</span>  [[] | ]. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 14685)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : v - 1 &lt; i + j
  ============================
   #(v - 1) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 14686) is:
 P ↑  (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 14687) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 5 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">i</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 14701)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : v - 1 &lt; i + j
  l2 : v &lt; i
  ============================
   #(v - 1) = #v

subgoal 2 (ID 14702) is:
 #(v - 1) = N [j ←  P] ↑  i
subgoal 3 (ID 14703) is:
 #(v - 1) = #(v - 1)
subgoal 4 (ID 14686) is:
 P ↑  (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 5 (ID 14687) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 6 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 7 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_asym"><span class="id" type="lemma">lt_asym</span></a> <span class="id" type="var">v</span> <span class="id" type="var">i</span>); <span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 14702)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : v - 1 &lt; i + j
  e : v = i
  ============================
   #(v - 1) = N [j ←  P] ↑  i

subgoal 2 (ID 14703) is:
 #(v - 1) = #(v - 1)
subgoal 3 (ID 14686) is:
 P ↑  (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 14687) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 5 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 6 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 14712)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; i
  l0 : i &lt; S (i + j)
  l1 : i - 1 &lt; i + j
  ============================
   #(i - 1) = N [j ←  P] ↑  i

subgoal 2 (ID 14703) is:
 #(v - 1) = #(v - 1)
subgoal 3 (ID 14686) is:
 P ↑  (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 14687) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 5 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 6 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 14703)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : v - 1 &lt; i + j
  l2 : i &lt; v
  ============================
   #(v - 1) = #(v - 1)

subgoal 2 (ID 14686) is:
 P ↑  (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 14687) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 5 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 14686)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  e : v - 1 = i + j
  ============================
   P ↑  (i + j) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 14687) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 4 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">e</span> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>. </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 14715)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (v - 1)
  e : v - 1 = i + j
  ============================
   P ↑  (i + j) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 14687) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 4 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 14717)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (pred v)
  e : v - 1 = i + j
  ============================
   P ↑  (i + j) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 14687) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 4 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#S_pred"><span class="id" type="lemma">S_pred</span></a>  <span class="id" type="var">v</span> <span class="id" type="var">i</span> <span class="id" type="var">l</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>. </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 14719)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; v
  e : v - 1 = i + j
  ============================
   P ↑  (i + j) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 14687) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 4 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 14687)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : i + j &lt; v - 1
  ============================
   #(v - 1 - 1) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 3 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_S"><span class="id" type="lemma">lt_n_S</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 14722)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : S (i + j) &lt; S (v - 1)
  ============================
   #(v - 1 - 1) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 3 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>).</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 14723)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : S (i + j) &lt; S (v - 1)
  ============================
   v &lt; v

subgoal 2 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 3 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 14725)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : S (i + j) &lt; S (v - 1)
  ============================
   S (i + j) &lt; v

subgoal 2 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 3 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 14727)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : S (i + j) &lt; S (pred v)
  ============================
   S (i + j) &lt; v

subgoal 2 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 3 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#S_pred"><span class="id" type="lemma">S_pred</span></a>  <span class="id" type="var">v</span> <span class="id" type="var">i</span> <span class="id" type="var">l</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 14729)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : S (i + j) &lt; v
  ============================
   S (i + j) &lt; v

subgoal 2 (ID 14219) is:
 #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 3 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 14219)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  e : v = S (i + j)
  ============================
   #(v - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]

subgoal 2 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 14734)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  ============================
   #(S (i + j) - 1) [(i + j) ←  P] = P ↑  (S (i + j)) [i ←  N [j ←  P]]

subgoal 2 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 14735)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  ============================
   match lt_eq_lt_dec (i + j - 0) (i + j) with
   | inleft (left _) =&gt; #(i + j - 0)
   | inleft (right _) =&gt; P ↑  (i + j)
   | inright _ =&gt; #(i + j - 0 - 1)
   end = P ↑  (S (i + j)) [i ←  N [j ←  P]]

subgoal 2 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#minus_n_O"><span class="id" type="lemma">minus_n_O</span></a>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 14736)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  ============================
   match lt_eq_lt_dec (i + j) (i + j) with
   | inleft (left _) =&gt; #(i + j)
   | inleft (right _) =&gt; P ↑  (i + j)
   | inright _ =&gt; #(i + j - 1)
   end = P ↑  (S (i + j)) [i ←  N [j ←  P]]

subgoal 2 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>) (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 14750)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  l0 : i + j &lt; i + j
  ============================
   #(i + j) = P ↑  (S (i + j)) [i ←  N [j ←  P]]

subgoal 2 (ID 14751) is:
 P ↑  (i + j) = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 3 (ID 14752) is:
 #(i + j - 1) = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 4 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) ; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 14751)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  e : i + j = i + j
  ============================
   P ↑  (i + j) = P ↑  (S (i + j)) [i ←  N [j ←  P]]

subgoal 2 (ID 14752) is:
 #(i + j - 1) = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 3 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">symmetry</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 14755)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  e : i + j = i + j
  ============================
   P ↑  (S (i + j)) [i ←  N [j ←  P]] = P ↑  (i + j)

subgoal 2 (ID 14752) is:
 #(i + j - 1) = P ↑  (S (i + j)) [i ←  N [j ←  P]]
subgoal 3 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="f_term.html#f_term_mod.substP3"><span class="id" type="lemma">substP3</span></a>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 14752)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  l0 : i + j &lt; i + j
  ============================
   #(i + j - 1) = P ↑  (S (i + j)) [i ←  N [j ←  P]]

subgoal 2 (ID 14220) is:
 #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) ; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 14220)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  ============================
   #(v - 1) [(i + j) ←  P] = #(v - 1) [i ←  N [j ←  P]]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 14780)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  ============================
   match lt_eq_lt_dec (v - 1) (i + j) with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; P ↑  (i + j)
   | inright _ =&gt; #(v - 1 - 1)
   end =
   match lt_eq_lt_dec (v - 1) i with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(v - 1 - 1)
   end

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a>1) (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) <span class="id" type="keyword">as</span>  [[] | ].</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 14794)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : v - 1 &lt; i + j
  ============================
   #(v - 1) =
   match lt_eq_lt_dec (v - 1) i with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(v - 1 - 1)
   end

subgoal 2 (ID 14795) is:
 P ↑  (i + j) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 14796) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1 - 1)
 end
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 14797)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : v - 1 &lt; i + j
  ============================
   v &lt; v

subgoal 2 (ID 14795) is:
 P ↑  (i + j) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 14796) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1 - 1)
 end
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) ;<span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 14798)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : v - 1 &lt; i + j
  ============================
   v &lt; S (i + j)

subgoal 2 (ID 14795) is:
 P ↑  (i + j) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 14796) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1 - 1)
 end
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_S"><span class="id" type="lemma">lt_n_S</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 14801)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : S (v - 1) &lt; S (i + j)
  ============================
   v &lt; S (i + j)

subgoal 2 (ID 14795) is:
 P ↑  (i + j) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 14796) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1 - 1)
 end
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 14803)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : S (pred v) &lt; S (i + j)
  ============================
   v &lt; S (i + j)

subgoal 2 (ID 14795) is:
 P ↑  (i + j) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 14796) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1 - 1)
 end
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#S_pred"><span class="id" type="lemma">S_pred</span></a> <span class="id" type="var">v</span> <span class="id" type="var">i</span> <span class="id" type="var">l</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 14805)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : v &lt; S (i + j)
  ============================
   v &lt; S (i + j)

subgoal 2 (ID 14795) is:
 P ↑  (i + j) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 14796) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1 - 1)
 end
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 14795)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  e : v - 1 = i + j
  ============================
   P ↑  (i + j) =
   match lt_eq_lt_dec (v - 1) i with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(v - 1 - 1)
   end

subgoal 2 (ID 14796) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1 - 1)
 end
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#eq_S"><span class="id" type="definition">eq_S</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">e</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 14807)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  e : S (v - 1) = S (i + j)
  ============================
   P ↑  (i + j) =
   match lt_eq_lt_dec (v - 1) i with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(v - 1 - 1)
   end

subgoal 2 (ID 14796) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1 - 1)
 end
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">e</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 14809)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  e : S (pred v) = S (i + j)
  ============================
   P ↑  (i + j) =
   match lt_eq_lt_dec (v - 1) i with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(v - 1 - 1)
   end

subgoal 2 (ID 14796) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1 - 1)
 end
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#S_pred"><span class="id" type="lemma">S_pred</span></a> <span class="id" type="var">v</span> <span class="id" type="var">i</span> <span class="id" type="var">l</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">e</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 14811)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  e : v = S (i + j)
  ============================
   P ↑  (i + j) =
   match lt_eq_lt_dec (v - 1) i with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(v - 1 - 1)
   end

subgoal 2 (ID 14796) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1 - 1)
 end
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 14817)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  l0 : S (i + j) &lt; S (i + j)
  ============================
   P ↑  (i + j) =
   match lt_eq_lt_dec (S (i + j) - 1) i with
   | inleft (left _) =&gt; #(S (i + j) - 1)
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(S (i + j) - 1 - 1)
   end

subgoal 2 (ID 14796) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ←  P] ↑  i
 | inright _ =&gt; #(v - 1 - 1)
 end
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>))); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 14796)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : i + j &lt; v - 1
  ============================
   #(v - 1 - 1) =
   match lt_eq_lt_dec (v - 1) i with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; N [j ←  P] ↑  i
   | inright _ =&gt; #(v - 1 - 1)
   end

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a>1) <span class="id" type="var">i</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 14832)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : i + j &lt; v - 1
  l2 : v - 1 &lt; i
  ============================
   #(v - 1 - 1) = #(v - 1)

subgoal 2 (ID 14833) is:
 #(v - 1 - 1) = N [j ←  P] ↑  i
subgoal 3 (ID 14834) is:
 #(v - 1 - 1) = #(v - 1 - 1)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 14835)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : i + j &lt; v - 1
  l2 : v - 1 &lt; i
  ============================
   v &lt; v

subgoal 2 (ID 14833) is:
 #(v - 1 - 1) = N [j ←  P] ↑  i
subgoal 3 (ID 14834) is:
 #(v - 1 - 1) = #(v - 1 - 1)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 14836)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : i + j &lt; v - 1
  l2 : v - 1 &lt; i
  ============================
   v &lt;= i

subgoal 2 (ID 14833) is:
 #(v - 1 - 1) = N [j ←  P] ↑  i
subgoal 3 (ID 14834) is:
 #(v - 1 - 1) = #(v - 1 - 1)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 14847)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; 0
  l0 : S (i + j) &lt; 0
  l1 : i + j &lt; 0 - 1
  l2 : 0 - 1 &lt; i
  ============================
   0 &lt;= i

subgoal 2 (ID 14853) is:
 S v &lt;= i
subgoal 3 (ID 14833) is:
 #(v - 1 - 1) = N [j ←  P] ↑  i
subgoal 4 (ID 14834) is:
 #(v - 1 - 1) = #(v - 1 - 1)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_O"><span class="id" type="abbreviation">lt_n_O</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 14853)
  
  v : nat
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S v
  l0 : S (i + j) &lt; S v
  l1 : i + j &lt; S v - 1
  l2 : S v - 1 &lt; i
  ============================
   S v &lt;= i

subgoal 2 (ID 14833) is:
 #(v - 1 - 1) = N [j ←  P] ↑  i
subgoal 3 (ID 14834) is:
 #(v - 1 - 1) = #(v - 1 - 1)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l2</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 14857)
  
  v : nat
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S v
  l0 : S (i + j) &lt; S v
  l1 : i + j &lt; S v - 1
  l2 : pred (S v) &lt; i
  ============================
   S v &lt;= i

subgoal 2 (ID 14833) is:
 #(v - 1 - 1) = N [j ←  P] ↑  i
subgoal 3 (ID 14834) is:
 #(v - 1 - 1) = #(v - 1 - 1)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">l2</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 14858)
  
  v : nat
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S v
  l0 : S (i + j) &lt; S v
  l1 : i + j &lt; S v - 1
  l2 : v &lt; i
  ============================
   S v &lt;= i

subgoal 2 (ID 14833) is:
 #(v - 1 - 1) = N [j ←  P] ↑  i
subgoal 3 (ID 14834) is:
 #(v - 1 - 1) = #(v - 1 - 1)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 14833)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : i + j &lt; v - 1
  e : v - 1 = i
  ============================
   #(v - 1 - 1) = N [j ←  P] ↑  i

subgoal 2 (ID 14834) is:
 #(v - 1 - 1) = #(v - 1 - 1)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 14868)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; 0
  l0 : S (i + j) &lt; 0
  l1 : i + j &lt; 0 - 1
  e : 0 - 1 = i
  ============================
   #(0 - 1 - 1) = N [j ←  P] ↑  i

subgoal 2 (ID 14874) is:
 #(S v - 1 - 1) = N [j ←  P] ↑  i
subgoal 3 (ID 14834) is:
 #(v - 1 - 1) = #(v - 1 - 1)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_O"><span class="id" type="abbreviation">lt_n_O</span></a> <span class="id" type="var">i</span>); <span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 14874)
  
  v : nat
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S v
  l0 : S (i + j) &lt; S v
  l1 : i + j &lt; S v - 1
  e : S v - 1 = i
  ============================
   #(S v - 1 - 1) = N [j ←  P] ↑  i

subgoal 2 (ID 14834) is:
 #(v - 1 - 1) = #(v - 1 - 1)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">e</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 14877)
  
  v : nat
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S v
  l0 : S (i + j) &lt; S v
  l1 : i + j &lt; S v - 1
  e : pred (S v) = i
  ============================
   #(S v - 1 - 1) = N [j ←  P] ↑  i

subgoal 2 (ID 14834) is:
 #(v - 1 - 1) = #(v - 1 - 1)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">e</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 14878)
  
  v : nat
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S v
  l0 : S (i + j) &lt; S v
  l1 : i + j &lt; S v - 1
  e : v = i
  ============================
   #(S v - 1 - 1) = N [j ←  P] ↑  i

subgoal 2 (ID 14834) is:
 #(v - 1 - 1) = #(v - 1 - 1)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 14885)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S i
  l0 : S (i + j) &lt; S i
  l1 : i + j &lt; S i - 1
  ============================
   #(S i - 1 - 1) = N [j ←  P] ↑  i

subgoal 2 (ID 14834) is:
 #(v - 1 - 1) = #(v - 1 - 1)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 14887)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S i
  l0 : S (i + j) &lt; S i
  l1 : i + j &lt; pred (S i)
  ============================
   #(S i - 1 - 1) = N [j ←  P] ↑  i

subgoal 2 (ID 14834) is:
 #(v - 1 - 1) = #(v - 1 - 1)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 14888)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S i
  l0 : S (i + j) &lt; S i
  l1 : i + j &lt; i
  ============================
   #(S i - 1 - 1) = N [j ←  P] ↑  i

subgoal 2 (ID 14834) is:
 #(v - 1 - 1) = #(v - 1 - 1)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>).</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 14889)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S i
  l0 : S (i + j) &lt; S i
  l1 : i + j &lt; i
  ============================
   i &lt; i

subgoal 2 (ID 14834) is:
 #(v - 1 - 1) = #(v - 1 - 1)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 14834)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : i + j &lt; v - 1
  l2 : i &lt; v - 1
  ============================
   #(v - 1 - 1) = #(v - 1 - 1)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>substP4 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="f_term_mod.subst_travers"><span class="id" type="lemma">subst_travers</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span>  <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">P</span> <span class="id" type="var">n</span>, <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[←</span></a>  <a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a>  <a class="idref" href="f_term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a>1 <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a>  <a class="idref" href="f_term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">)[←</span></a>  <a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="f_term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)/\</span></a><br>
                      <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span>  <span class="id" type="var">H</span> <span class="id" type="var">N</span> <span class="id" type="var">P</span> <span class="id" type="var">n</span>, <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a>1 <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">)[←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="f_term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 14910)
  
  ============================
   (forall (M N P : Term) (n : nat),
    M [ ← N] [n ←  P] = (M [(n + 1) ←  P]) [ ← N [n ←  P]]) /\
   (forall (H : Prf) (N P : Term) (n : nat),
    H [ ←h N] [n ←h P] = (H [(n + 1) ←h P]) [ ←h N [n ←  P]])

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> <a class="idref" href="f_term.html#f_term_mod.substP4"><span class="id" type="lemma">substP4</span></a>;<span class="id" type="tactic">split</span>;<span class="id" type="tactic">intros</span>;<span class="id" type="tactic">simpl</span>;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a>;<br>
<span class="id" type="tactic">change</span> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>); <span class="id" type="tactic">change</span> <span class="id" type="var">n</span> <span class="id" type="keyword">with</span> (0<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>subst_travers is defined

</pre></div>
<span class="command"><br>

<br>
</span><div class="output"><pre></pre></div>
</div>

<div>
The following two lemmas will be useful for the erasure operation defined later. 
</div>
<div>
<span class="command">
<span class="id" type="keyword">Lemma</span> <a name="f_term_mod.erasure_lem1"><span class="id" type="lemma">erasure_lem1</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">a</span> <span class="id" type="var">n</span>, <a class="idref" href="f_term.html#a"><span class="id" type="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#a"><span class="id" type="variable">a</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a>  1 <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a>  <a class="idref" href="f_term.html#f_term_mod.:F_scope:'#'_x"><span class="id" type="notation">#</span></a>0<a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)/\</span></a><br>
                     <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">H</span> <span class="id" type="var">n</span>, <a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#H"><span class="id" type="variable">H</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> 1 <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">)</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'#'_x"><span class="id" type="notation">#</span></a>0<a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 14963)
  
  ============================
   (forall (a : Term) (n : nat), a = a ↑  1 # (S n) [n ←  #0]) /\
   (forall (H : Prf) (n : nat), H = H ↑h 1 # (S n) [n ←h #0])

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="f_term.html#f_term_mod.Term_induc"><span class="id" type="definition">Term_induc</span></a>;<span class="id" type="tactic">intros</span>;<br>
[<span class="id" type="tactic">unfold</span> <a class="idref" href="f_term.html#f_term_mod.lift_rec"><span class="id" type="definition">lift_rec</span></a>;<span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>;<span class="id" type="tactic">unfold</span> <a class="idref" href="f_term.html#f_term_mod.subst_rec"><span class="id" type="definition">subst_rec</span></a>;<span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="keyword">as</span> [[]|];<span class="id" type="tactic">simpl</span>;<span class="id" type="tactic">subst</span>;<br>
<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#minus_n_O"><span class="id" type="lemma">minus_n_O</span></a>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#plus_n_O"><span class="id" type="lemma">plus_n_O</span></a>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">trivial</span>; <span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>);<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *<br>
|<span class="id" type="tactic">simpl</span>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">H</span>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">H0</span>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">H1</span>;<span class="id" type="tactic">trivial</span>..].</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 15109)
  
  v : Vars
  n : nat
  l : S n &lt;= v
  l0 : S v &lt; n
  ============================
   v &lt; v

subgoal 2 (ID 15112) is:
 v &lt; v
subgoal 3 (ID 15117) is:
 v &lt; v
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">v</span>);<span class="id" type="tactic">try</span> <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_Sn"><span class="id" type="lemma">lt_n_Sn</span></a>; <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span>;<span class="id" type="tactic">assumption</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 15112)
  
  v : Vars
  l : S (S v) &lt;= v
  ============================
   v &lt; v

subgoal 2 (ID 15117) is:
 v &lt; v
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">v</span>);<span class="id" type="tactic">try</span> <span class="id" type="tactic">assumption</span>;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_Sn"><span class="id" type="lemma">lt_n_Sn</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 15117)
  
  v : Vars
  n : nat
  g : S n &gt; v
  l : n &lt; v
  ============================
   v &lt; v

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">assumption</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Gt.html#gt_S_le"><span class="id" type="lemma">gt_S_le</span></a>;<span class="id" type="tactic">exact</span> <span class="id" type="var">g</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>erasure_lem1 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="f_term_mod.erasure_lem3"><span class="id" type="lemma">erasure_lem3</span></a> : (<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">t</span>, <a class="idref" href="f_term.html#m"><span class="id" type="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&gt;'_x"><span class="id" type="notation">&gt;</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a>-&gt;<a class="idref" href="f_term.html#f_term_mod.:F_scope:'#'_x"><span class="id" type="notation">#</span></a><a class="idref" href="f_term.html#m"><span class="id" type="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'#'_x"><span class="id" type="notation">#</span></a><a class="idref" href="f_term.html#m"><span class="id" type="variable">m</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> 1 <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a>  <a class="idref" href="f_term.html#t"><span class="id" type="variable">t</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a>).</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 15166)
  
  ============================
   forall (n m : nat) (t : Term), m &gt; n -&gt; #m = #m ↑  1 # (S n) [n ←  t]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intros</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 15170)
  
  n : nat
  m : nat
  t : Term
  H : m &gt; n
  ============================
   #m = #m ↑  1 # (S n) [n ←  t]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">unfold</span> <a class="idref" href="f_term.html#f_term_mod.lift_rec"><span class="id" type="definition">lift_rec</span></a>;<span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 15180)
  
  n : nat
  m : nat
  t : Term
  H : m &gt; n
  l : S n &lt;= m
  ============================
   #m = #(1 + m) [n ←  t]

subgoal 2 (ID 15181) is:
 #m = #m [n ←  t]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">unfold</span> <a class="idref" href="f_term.html#f_term_mod.subst_rec"><span class="id" type="definition">subst_rec</span></a>;<span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="keyword">as</span> [[]|];<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 15205)
  
  n : nat
  m : nat
  t : Term
  H : m &gt; n
  l : S n &lt;= m
  l0 : S m &lt; n
  ============================
   #m = #(S m)

subgoal 2 (ID 15212) is:
 #m = t ↑  n
subgoal 3 (ID 15219) is:
 #m = #(m - 0)
subgoal 4 (ID 15181) is:
 #m = #m [n ←  t]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>). </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 15224)
  
  n : nat
  m : nat
  t : Term
  H : m &gt; n
  l : S n &lt;= m
  l0 : S m &lt; n
  ============================
   n &lt; n

subgoal 2 (ID 15212) is:
 #m = t ↑  n
subgoal 3 (ID 15219) is:
 #m = #(m - 0)
subgoal 4 (ID 15181) is:
 #m = #m [n ←  t]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">m</span>;[<span class="id" type="tactic">assumption</span>|<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">m</span>);[<span class="id" type="tactic">do</span> 2 <span class="id" type="tactic">constructor</span>|<span class="id" type="tactic">assumption</span>]].</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 15212)
  
  n : nat
  m : nat
  t : Term
  H : m &gt; n
  l : S n &lt;= m
  e : S m = n
  ============================
   #m = t ↑  n

subgoal 2 (ID 15219) is:
 #m = #(m - 0)
subgoal 3 (ID 15181) is:
 #m = #m [n ←  t]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 15235)
  
  m : nat
  t : Term
  H : m &gt; S m
  l : S (S m) &lt;= m
  ============================
   #m = t ↑  (S m)

subgoal 2 (ID 15219) is:
 #m = #(m - 0)
subgoal 3 (ID 15181) is:
 #m = #m [n ←  t]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">m</span>). </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 15240)
  
  m : nat
  t : Term
  H : m &gt; S m
  l : S (S m) &lt;= m
  ============================
   m &lt; m

subgoal 2 (ID 15219) is:
 #m = #(m - 0)
subgoal 3 (ID 15181) is:
 #m = #m [n ←  t]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">m</span>);[<span class="id" type="tactic">do</span> 2 <span class="id" type="tactic">constructor</span>|<span class="id" type="tactic">assumption</span>].</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 15219)
  
  n : nat
  m : nat
  t : Term
  H : m &gt; n
  l : S n &lt;= m
  l0 : n &lt; S m
  ============================
   #m = #(m - 0)

subgoal 2 (ID 15181) is:
 #m = #m [n ←  t]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#minus_n_O"><span class="id" type="lemma">minus_n_O</span></a>;<span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 15181)
  
  n : nat
  m : nat
  t : Term
  H : m &gt; n
  g : S n &gt; m
  ============================
   #m = #m [n ←  t]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>). </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 15250)
  
  n : nat
  m : nat
  t : Term
  H : m &gt; n
  g : S n &gt; m
  ============================
   n &lt; n

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">m</span>;[|<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Le.html#le_S_n"><span class="id" type="lemma">le_S_n</span></a>];<span class="id" type="tactic">assumption</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>erasure_lem3 is defined

</pre></div>
<span class="command"><br>

<br>
</span><div class="output"><pre></pre></div>
</div>

<div>
Here some more lemmas about a lift or substitution being equal to a lifted term
</div>
<div>
<span class="command">
<span class="id" type="keyword">Lemma</span> <a name="f_term_mod.lift_is_lift_sublemma"><span class="id" type="lemma">lift_is_lift_sublemma</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">j</span> <span class="id" type="var">v</span>, <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;'_x"><span class="id" type="notation">&lt;</span></a><a class="idref" href="f_term.html#v"><span class="id" type="variable">v</span></a>-&gt;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">w</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:'#'_x"><span class="id" type="notation">#</span></a><a class="idref" href="f_term.html#v"><span class="id" type="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a><a class="idref" href="f_term.html#w"><span class="id" type="variable">w</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a>1<a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a><a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 15258)
  
  ============================
   forall j v : nat, j &lt; v -&gt; exists w : Term, #v = w ↑  1 # j

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intros</span>. </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 15261)
  
  j : nat
  v : nat
  H : j &lt; v
  ============================
   exists w : Term, #v = w ↑  1 # j

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">exists</span> <a class="idref" href="f_term.html#f_term_mod.:F_scope:'#'_x"><span class="id" type="notation">#(</span></a><span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a>1<a class="idref" href="f_term.html#f_term_mod.:F_scope:'#'_x"><span class="id" type="notation">)</span></a>. </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 15263)
  
  j : nat
  v : nat
  H : j &lt; v
  ============================
   #v = #(v - 1) ↑  1 # j

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a>1)<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a><span class="id" type="var">v</span>).</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 15265)
  
  j : nat
  v : nat
  H : j &lt; v
  ============================
   S (v - 1) = v

subgoal 2 (ID 15266) is:
 #v = #(v - 1) ↑  1 # j
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#minus_Sn_m"><span class="id" type="lemma">minus_Sn_m</span></a> <span class="id" type="var">v</span> 1);[<span class="id" type="tactic">simpl</span>;<span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#minus_n_O"><span class="id" type="lemma">minus_n_O</span></a> <span class="id" type="var">v</span>);<span class="id" type="tactic">reflexivity</span>|<br>
  <span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#lt"><span class="id" type="definition">lt</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Le.html#le_trans"><span class="id" type="lemma">le_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">j</span>);[<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Le.html#le_n_S"><span class="id" type="lemma">le_n_S</span></a>;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Le.html#le_0_n"><span class="id" type="lemma">le_0_n</span></a>|<span class="id" type="tactic">assumption</span>]].</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 15266)
  
  j : nat
  v : nat
  H : j &lt; v
  H0 : S (v - 1) = v
  ============================
   #v = #(v - 1) ↑  1 # j

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>;<span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 15285)
  
  j : nat
  v : nat
  H : j &lt; v
  H0 : S (v - 1) = v
  l : j &lt;= v - 1
  ============================
   #v = #(S (v - 1))

subgoal 2 (ID 15286) is:
 #v = #(v - 1)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>;<span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 15286)
  
  j : nat
  v : nat
  H : j &lt; v
  H0 : S (v - 1) = v
  g : j &gt; v - 1
  ============================
   #v = #(v - 1)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">j</span>;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#gt"><span class="id" type="definition">gt</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#lt"><span class="id" type="definition">lt</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>. </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 15294)
  
  j : nat
  v : nat
  H : j &lt; v
  H0 : S (v - 1) = v
  g : S (v - 1) &lt;= j
  ============================
   j &lt; j

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>. </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 15296)
  
  j : nat
  v : nat
  H : j &lt; v
  H0 : S (v - 1) = v
  g : v &lt;= j
  ============================
   j &lt; j

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>;<span class="id" type="tactic">assumption</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>lift_is_lift_sublemma is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="f_term_mod.lift_is_lift"><span class="id" type="lemma">lift_is_lift</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">N</span> <span class="id" type="var">A</span> <span class="id" type="var">n</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span>,<a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a>  <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a><a class="idref" href="f_term.html#A"><span class="id" type="variable">A</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a>  1 <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a> -&gt; <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;'_x"><span class="id" type="notation">&lt;</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> -&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">M</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a><a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a><a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a>  1 <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)/\</span></a><br>
                     <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">N</span> <span class="id" type="var">A</span> <span class="id" type="var">n</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span>,<a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a><a class="idref" href="f_term.html#A"><span class="id" type="variable">A</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> 1 <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a> -&gt; <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;'_x"><span class="id" type="notation">&lt;</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> -&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">M</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a><a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a><a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h</span></a> 1 <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 15315)
  
  ============================
   (forall (N A : Term) (n i j : nat),
    N ↑  i # n = A ↑  1 # j -&gt; j &lt; n -&gt; exists M : Term, N = M ↑  1 # j) /\
   (forall (N A : Prf) (n i j : nat),
    N ↑h i # n = A ↑h 1 # j -&gt; j &lt; n -&gt; exists M : Prf, N = M ↑h 1 # j)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="f_term.html#f_term_mod.Term_induc"><span class="id" type="definition">Term_induc</span></a>;<span class="id" type="tactic">intros</span>;<br>
[|<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *;<span class="id" type="tactic">destruct</span> <span class="id" type="var">A</span>;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *;<span class="id" type="tactic">try</span> <span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">discriminate</span>;<br>
<span class="id" type="keyword">match</span> <span class="id" type="keyword">goal</span> <span class="id" type="keyword">with</span> <br>
| <span class="id" type="var">Heq</span> : <span class="id" type="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">_</span> |- <span class="id" type="var">_</span> =&gt; <span class="id" type="tactic">injection</span> <span class="id" type="var">Heq</span>;<span class="id" type="tactic">intros</span>;<span class="id" type="tactic">clear</span> <span class="id" type="var">Heq</span><br>
<span class="id" type="keyword">end</span>;<br>
<span class="id" type="tactic">repeat</span> <span class="id" type="keyword">match</span> <span class="id" type="keyword">goal</span> <span class="id" type="keyword">with</span> <br>
| <span class="id" type="var">IH</span> : <span class="id" type="var">_</span> -&gt; <span class="id" type="var">_</span> |- <span class="id" type="var">_</span> =&gt; <span class="id" type="var">edestruct</span> <span class="id" type="var">IH</span>;[<span class="id" type="var">eassumption</span>|<span class="id" type="tactic">try</span> <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_S"><span class="id" type="lemma">lt_n_S</span></a>;<span class="id" type="tactic">assumption</span>|];<span class="id" type="tactic">clear</span> <span class="id" type="var">IH</span><br>
<span class="id" type="keyword">end</span>;<span class="id" type="tactic">subst</span>;<br>
<span class="id" type="tactic">try</span> <span class="id" type="keyword">match</span> <span class="id" type="keyword">goal</span> <span class="id" type="keyword">with</span> <br>
| |- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">?</span></a><span class="id" type="var">f</span> <span class="id" type="var">_</span>     <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">_</span> =&gt; <span class="id" type="tactic">eexists</span> (<span class="id" type="var">f</span> <span class="id" type="var">_</span>    );<span class="id" type="tactic">simpl</span>;<span class="id" type="tactic">reflexivity</span><br>
| |- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">?</span></a><span class="id" type="var">f</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>   <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">_</span> =&gt; <span class="id" type="tactic">eexists</span> (<span class="id" type="var">f</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>  );<span class="id" type="tactic">simpl</span>;<span class="id" type="tactic">reflexivity</span><br>
| |- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">?</span></a><span class="id" type="var">f</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">_</span> =&gt; <span class="id" type="tactic">eexists</span> (<span class="id" type="var">f</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>);<span class="id" type="tactic">simpl</span>;<span class="id" type="tactic">reflexivity</span><br>
<span class="id" type="keyword">end</span><br>
..].</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 15336)
  
  v : Vars
  A : Term
  n : nat
  i : nat
  j : nat
  H : #v ↑  i # n = A ↑  1 # j
  H0 : j &lt; n
  ============================
   exists M : Term, #v = M ↑  1 # j

(dependent evars: ?15637 using , ?15844 using , ?15845 using , ?15846 using , ?15847 using , ?15863 using , ?15864 using , ?15865 using , ?15866 using , ?15894 using , ?15895 using , ?16102 using , ?16103 using , ?16104 using , ?16105 using , ?16121 using , ?16122 using , ?16123 using , ?16124 using , ?16152 using , ?16153 using , ?16360 using , ?16361 using , ?16362 using , ?16363 using , ?16378 using , ?16379 using , ?16380 using , ?16381 using , ?16409 using , ?16410 using , ?16617 using , ?16618 using , ?16619 using , ?16620 using , ?16635 using , ?16636 using , ?16637 using , ?16638 using , ?16666 using , ?16667 using , ?16880 using , ?16881 using , ?16882 using , ?16883 using , ?16901 using , ?17114 using , ?17115 using , ?17116 using , ?17117 using , ?17135 using , ?17371 using , ?17372 using , ?17373 using , ?17374 using , ?17389 using , ?17390 using , ?17391 using , ?17392 using , ?17420 using , ?17421 using , ?17634 using , ?17635 using , ?17636 using , ?17637 using , ?17655 using , ?17914 using , ?17915 using , ?17916 using , ?17917 using , ?17933 using , ?17934 using , ?17935 using , ?17936 using , ?17951 using , ?17952 using , ?17953 using , ?17954 using , ?17993 using , ?17994 using , ?17995 using , ?18254 using , ?18255 using , ?18256 using , ?18257 using , ?18273 using , ?18274 using , ?18275 using , ?18276 using , ?18291 using , ?18292 using , ?18293 using , ?18294 using , ?18333 using , ?18334 using , ?18335 using , ?18571 using , ?18572 using , ?18573 using , ?18574 using , ?18589 using , ?18590 using , ?18591 using , ?18592 using , ?18620 using , ?18621 using , ?18834 using , ?18835 using , ?18836 using , ?18837 using , ?18855 using ,)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *;<span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 18885)
  
  v : Vars
  A : Term
  n : nat
  i : nat
  j : nat
  l : n &lt;= v
  H : #(i + v) = A ↑  1 # j
  H0 : j &lt; n
  ============================
   exists M : Term, #v = M ↑  1 # j

subgoal 2 (ID 18889) is:
 exists M : Term, #v = M ↑  1 # j
(dependent evars: ?15637 using , ?15844 using , ?15845 using , ?15846 using , ?15847 using , ?15863 using , ?15864 using , ?15865 using , ?15866 using , ?15894 using , ?15895 using , ?16102 using , ?16103 using , ?16104 using , ?16105 using , ?16121 using , ?16122 using , ?16123 using , ?16124 using , ?16152 using , ?16153 using , ?16360 using , ?16361 using , ?16362 using , ?16363 using , ?16378 using , ?16379 using , ?16380 using , ?16381 using , ?16409 using , ?16410 using , ?16617 using , ?16618 using , ?16619 using , ?16620 using , ?16635 using , ?16636 using , ?16637 using , ?16638 using , ?16666 using , ?16667 using , ?16880 using , ?16881 using , ?16882 using , ?16883 using , ?16901 using , ?17114 using , ?17115 using , ?17116 using , ?17117 using , ?17135 using , ?17371 using , ?17372 using , ?17373 using , ?17374 using , ?17389 using , ?17390 using , ?17391 using , ?17392 using , ?17420 using , ?17421 using , ?17634 using , ?17635 using , ?17636 using , ?17637 using , ?17655 using , ?17914 using , ?17915 using , ?17916 using , ?17917 using , ?17933 using , ?17934 using , ?17935 using , ?17936 using , ?17951 using , ?17952 using , ?17953 using , ?17954 using , ?17993 using , ?17994 using , ?17995 using , ?18254 using , ?18255 using , ?18256 using , ?18257 using , ?18273 using , ?18274 using , ?18275 using , ?18276 using , ?18291 using , ?18292 using , ?18293 using , ?18294 using , ?18333 using , ?18334 using , ?18335 using , ?18571 using , ?18572 using , ?18573 using , ?18574 using , ?18589 using , ?18590 using , ?18591 using , ?18592 using , ?18620 using , ?18621 using , ?18834 using , ?18835 using , ?18836 using , ?18837 using , ?18855 using ,)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="f_term.html#f_term_mod.lift_is_lift_sublemma"><span class="id" type="lemma">lift_is_lift_sublemma</span></a>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 18890)
  
  v : Vars
  A : Term
  n : nat
  i : nat
  j : nat
  l : n &lt;= v
  H : #(i + v) = A ↑  1 # j
  H0 : j &lt; n
  ============================
   j &lt; v

subgoal 2 (ID 18889) is:
 exists M : Term, #v = M ↑  1 # j
(dependent evars: ?15637 using , ?15844 using , ?15845 using , ?15846 using , ?15847 using , ?15863 using , ?15864 using , ?15865 using , ?15866 using , ?15894 using , ?15895 using , ?16102 using , ?16103 using , ?16104 using , ?16105 using , ?16121 using , ?16122 using , ?16123 using , ?16124 using , ?16152 using , ?16153 using , ?16360 using , ?16361 using , ?16362 using , ?16363 using , ?16378 using , ?16379 using , ?16380 using , ?16381 using , ?16409 using , ?16410 using , ?16617 using , ?16618 using , ?16619 using , ?16620 using , ?16635 using , ?16636 using , ?16637 using , ?16638 using , ?16666 using , ?16667 using , ?16880 using , ?16881 using , ?16882 using , ?16883 using , ?16901 using , ?17114 using , ?17115 using , ?17116 using , ?17117 using , ?17135 using , ?17371 using , ?17372 using , ?17373 using , ?17374 using , ?17389 using , ?17390 using , ?17391 using , ?17392 using , ?17420 using , ?17421 using , ?17634 using , ?17635 using , ?17636 using , ?17637 using , ?17655 using , ?17914 using , ?17915 using , ?17916 using , ?17917 using , ?17933 using , ?17934 using , ?17935 using , ?17936 using , ?17951 using , ?17952 using , ?17953 using , ?17954 using , ?17993 using , ?17994 using , ?17995 using , ?18254 using , ?18255 using , ?18256 using , ?18257 using , ?18273 using , ?18274 using , ?18275 using , ?18276 using , ?18291 using , ?18292 using , ?18293 using , ?18294 using , ?18333 using , ?18334 using , ?18335 using , ?18571 using , ?18572 using , ?18573 using , ?18574 using , ?18589 using , ?18590 using , ?18591 using , ?18592 using , ?18620 using , ?18621 using , ?18834 using , ?18835 using , ?18836 using , ?18837 using , ?18855 using ,)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span>;<span class="id" type="tactic">assumption</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 18889)
  
  v : Vars
  A : Term
  n : nat
  i : nat
  j : nat
  g : n &gt; v
  H : #v = A ↑  1 # j
  H0 : j &lt; n
  ============================
   exists M : Term, #v = M ↑  1 # j

(dependent evars: ?15637 using , ?15844 using , ?15845 using , ?15846 using , ?15847 using , ?15863 using , ?15864 using , ?15865 using , ?15866 using , ?15894 using , ?15895 using , ?16102 using , ?16103 using , ?16104 using , ?16105 using , ?16121 using , ?16122 using , ?16123 using , ?16124 using , ?16152 using , ?16153 using , ?16360 using , ?16361 using , ?16362 using , ?16363 using , ?16378 using , ?16379 using , ?16380 using , ?16381 using , ?16409 using , ?16410 using , ?16617 using , ?16618 using , ?16619 using , ?16620 using , ?16635 using , ?16636 using , ?16637 using , ?16638 using , ?16666 using , ?16667 using , ?16880 using , ?16881 using , ?16882 using , ?16883 using , ?16901 using , ?17114 using , ?17115 using , ?17116 using , ?17117 using , ?17135 using , ?17371 using , ?17372 using , ?17373 using , ?17374 using , ?17389 using , ?17390 using , ?17391 using , ?17392 using , ?17420 using , ?17421 using , ?17634 using , ?17635 using , ?17636 using , ?17637 using , ?17655 using , ?17914 using , ?17915 using , ?17916 using , ?17917 using , ?17933 using , ?17934 using , ?17935 using , ?17936 using , ?17951 using , ?17952 using , ?17953 using , ?17954 using , ?17993 using , ?17994 using , ?17995 using , ?18254 using , ?18255 using , ?18256 using , ?18257 using , ?18273 using , ?18274 using , ?18275 using , ?18276 using , ?18291 using , ?18292 using , ?18293 using , ?18294 using , ?18333 using , ?18334 using , ?18335 using , ?18571 using , ?18572 using , ?18573 using , ?18574 using , ?18589 using , ?18590 using , ?18591 using , ?18592 using , ?18620 using , ?18621 using , ?18834 using , ?18835 using , ?18836 using , ?18837 using , ?18855 using ,)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">econstructor</span>;<span class="id" type="var">eassumption</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars: ?15637 using , ?15844 using , ?15845 using , ?15846 using , ?15847 using , ?15863 using , ?15864 using , ?15865 using , ?15866 using , ?15894 using , ?15895 using , ?16102 using , ?16103 using , ?16104 using , ?16105 using , ?16121 using , ?16122 using , ?16123 using , ?16124 using , ?16152 using , ?16153 using , ?16360 using , ?16361 using , ?16362 using , ?16363 using , ?16378 using , ?16379 using , ?16380 using , ?16381 using , ?16409 using , ?16410 using , ?16617 using , ?16618 using , ?16619 using , ?16620 using , ?16635 using , ?16636 using , ?16637 using , ?16638 using , ?16666 using , ?16667 using , ?16880 using , ?16881 using , ?16882 using , ?16883 using , ?16901 using , ?17114 using , ?17115 using , ?17116 using , ?17117 using , ?17135 using , ?17371 using , ?17372 using , ?17373 using , ?17374 using , ?17389 using , ?17390 using , ?17391 using , ?17392 using , ?17420 using , ?17421 using , ?17634 using , ?17635 using , ?17636 using , ?17637 using , ?17655 using , ?17914 using , ?17915 using , ?17916 using , ?17917 using , ?17933 using , ?17934 using , ?17935 using , ?17936 using , ?17951 using , ?17952 using , ?17953 using , ?17954 using , ?17993 using , ?17994 using , ?17995 using , ?18254 using , ?18255 using , ?18256 using , ?18257 using , ?18273 using , ?18274 using , ?18275 using , ?18276 using , ?18291 using , ?18292 using , ?18293 using , ?18294 using , ?18333 using , ?18334 using , ?18335 using , ?18571 using , ?18572 using , ?18573 using , ?18574 using , ?18589 using , ?18590 using , ?18591 using , ?18592 using , ?18620 using , ?18621 using , ?18834 using , ?18835 using , ?18836 using , ?18837 using , ?18855 using , ?18894 using ,)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>lift_is_lift is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="f_term_mod.subst_is_lift"><span class="id" type="lemma">subst_is_lift</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">N</span> <span class="id" type="var">T</span> <span class="id" type="var">A</span> <span class="id" type="var">n</span> <span class="id" type="var">j</span>, <a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a>  <a class="idref" href="f_term.html#T"><span class="id" type="variable">T</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a><a class="idref" href="f_term.html#A"><span class="id" type="variable">A</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> 1<a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a><a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a>-&gt;<a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;'_x"><span class="id" type="notation">&lt;</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a>-&gt;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">M</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a><a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a><a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> 1<a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a><a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)/\</span></a><br>
                      <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">N</span> <span class="id" type="var">T</span> <span class="id" type="var">A</span> <span class="id" type="var">n</span> <span class="id" type="var">j</span>, <a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">←</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">h</span></a> <a class="idref" href="f_term.html#T"><span class="id" type="variable">T</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%5B'_x_'%E2%86%90h'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a><a class="idref" href="f_term.html#A"><span class="id" type="variable">A</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h1</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a><a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a>-&gt;<a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;'_x"><span class="id" type="notation">&lt;</span></a><a class="idref" href="f_term.html#n"><span class="id" type="variable">n</span></a>-&gt;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">M</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a><a class="idref" href="f_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a><a class="idref" href="f_term.html#M"><span class="id" type="variable">M</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">↑</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">h1</span></a><a class="idref" href="f_term.html#f_term_mod.:F_scope:x_'%E2%86%91h'_x_'#'_x"><span class="id" type="notation">#</span></a><a class="idref" href="f_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/%5C'_x"><span class="id" type="notation">)</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 18912)
  
  ============================
   (forall (N T A : Term) (n j : nat),
    N [n ←  T] = A ↑  1 # j -&gt; j &lt; n -&gt; exists M : Term, N = M ↑  1 # j) /\
   (forall (N : Prf) (T : Term) (A : Prf) (n j : nat),
    N [n ←h T] = A ↑h 1 # j -&gt; j &lt; n -&gt; exists M : Prf, N = M ↑h 1 # j)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="f_term.html#f_term_mod.Term_induc"><span class="id" type="definition">Term_induc</span></a>;<span class="id" type="tactic">intros</span>;<br>
[|<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *;<span class="id" type="tactic">destruct</span> <span class="id" type="var">A</span>;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *;<span class="id" type="tactic">try</span> <span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>;<span class="id" type="tactic">try</span> <span class="id" type="tactic">discriminate</span>;<br>
<span class="id" type="keyword">match</span> <span class="id" type="keyword">goal</span> <span class="id" type="keyword">with</span> <br>
| <span class="id" type="var">Heq</span> : <span class="id" type="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">_</span> |- <span class="id" type="var">_</span> =&gt; <span class="id" type="tactic">injection</span> <span class="id" type="var">Heq</span>;<span class="id" type="tactic">intros</span>;<span class="id" type="tactic">clear</span> <span class="id" type="var">Heq</span><br>
<span class="id" type="keyword">end</span>;<br>
<span class="id" type="tactic">repeat</span> <span class="id" type="keyword">match</span> <span class="id" type="keyword">goal</span> <span class="id" type="keyword">with</span> <br>
| <span class="id" type="var">IH</span> : <span class="id" type="var">_</span> -&gt; <span class="id" type="var">_</span> |- <span class="id" type="var">_</span> =&gt; <span class="id" type="var">edestruct</span> <span class="id" type="var">IH</span>;[<span class="id" type="var">eassumption</span>|<span class="id" type="tactic">try</span> <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_S"><span class="id" type="lemma">lt_n_S</span></a>;<span class="id" type="tactic">assumption</span>|];<span class="id" type="tactic">clear</span> <span class="id" type="var">IH</span><br>
<span class="id" type="keyword">end</span>;<span class="id" type="tactic">subst</span>;<br>
<span class="id" type="tactic">try</span> <span class="id" type="keyword">match</span> <span class="id" type="keyword">goal</span> <span class="id" type="keyword">with</span> <br>
| |- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">?</span></a><span class="id" type="var">f</span> <span class="id" type="var">_</span>     <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">_</span> =&gt; <span class="id" type="tactic">eexists</span> (<span class="id" type="var">f</span> <span class="id" type="var">_</span>    );<span class="id" type="tactic">simpl</span>;<span class="id" type="tactic">reflexivity</span><br>
| |- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">?</span></a><span class="id" type="var">f</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>   <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">_</span> =&gt; <span class="id" type="tactic">eexists</span> (<span class="id" type="var">f</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>  );<span class="id" type="tactic">simpl</span>;<span class="id" type="tactic">reflexivity</span><br>
| |- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">?</span></a><span class="id" type="var">f</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">_</span> =&gt; <span class="id" type="tactic">eexists</span> (<span class="id" type="var">f</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>);<span class="id" type="tactic">simpl</span>;<span class="id" type="tactic">reflexivity</span><br>
<span class="id" type="keyword">end</span><br>
..].</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 18933)
  
  v : Vars
  T : Term
  A : Term
  n : nat
  j : nat
  H : #v [n ←  T] = A ↑  1 # j
  H0 : j &lt; n
  ============================
   exists M : Term, #v = M ↑  1 # j

(dependent evars: ?19234 using , ?19441 using , ?19442 using , ?19443 using , ?19444 using , ?19460 using , ?19461 using , ?19462 using , ?19463 using , ?19491 using , ?19492 using , ?19699 using , ?19700 using , ?19701 using , ?19702 using , ?19718 using , ?19719 using , ?19720 using , ?19721 using , ?19749 using , ?19750 using , ?19957 using , ?19958 using , ?19959 using , ?19960 using , ?19975 using , ?19976 using , ?19977 using , ?19978 using , ?20006 using , ?20007 using , ?20214 using , ?20215 using , ?20216 using , ?20217 using , ?20232 using , ?20233 using , ?20234 using , ?20235 using , ?20263 using , ?20264 using , ?20477 using , ?20478 using , ?20479 using , ?20480 using , ?20498 using , ?20711 using , ?20712 using , ?20713 using , ?20714 using , ?20732 using , ?20968 using , ?20969 using , ?20970 using , ?20971 using , ?20986 using , ?20987 using , ?20988 using , ?20989 using , ?21017 using , ?21018 using , ?21231 using , ?21232 using , ?21233 using , ?21234 using , ?21252 using , ?21511 using , ?21512 using , ?21513 using , ?21514 using , ?21530 using , ?21531 using , ?21532 using , ?21533 using , ?21548 using , ?21549 using , ?21550 using , ?21551 using , ?21590 using , ?21591 using , ?21592 using , ?21851 using , ?21852 using , ?21853 using , ?21854 using , ?21870 using , ?21871 using , ?21872 using , ?21873 using , ?21888 using , ?21889 using , ?21890 using , ?21891 using , ?21930 using , ?21931 using , ?21932 using , ?22168 using , ?22169 using , ?22170 using , ?22171 using , ?22186 using , ?22187 using , ?22188 using , ?22189 using , ?22217 using , ?22218 using , ?22431 using , ?22432 using , ?22433 using , ?22434 using , ?22452 using ,)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">unfold</span> <a class="idref" href="f_term.html#f_term_mod.subst_rec"><span class="id" type="definition">subst_rec</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>;<span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="keyword">as</span> [[]|];[<span class="id" type="tactic">exists</span> <span class="id" type="var">A</span>;<span class="id" type="tactic">assumption</span>|<span class="id" type="tactic">apply</span> <a class="idref" href="f_term.html#f_term_mod.lift_is_lift_sublemma"><span class="id" type="lemma">lift_is_lift_sublemma</span></a>..].</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 22491)
  
  v : Vars
  T : Term
  A : Term
  n : nat
  j : nat
  e : v = n
  H : T ↑  n = A ↑  1 # j
  H0 : j &lt; n
  ============================
   j &lt; v

subgoal 2 (ID 22492) is:
 j &lt; v
(dependent evars: ?19234 using , ?19441 using , ?19442 using , ?19443 using , ?19444 using , ?19460 using , ?19461 using , ?19462 using , ?19463 using , ?19491 using , ?19492 using , ?19699 using , ?19700 using , ?19701 using , ?19702 using , ?19718 using , ?19719 using , ?19720 using , ?19721 using , ?19749 using , ?19750 using , ?19957 using , ?19958 using , ?19959 using , ?19960 using , ?19975 using , ?19976 using , ?19977 using , ?19978 using , ?20006 using , ?20007 using , ?20214 using , ?20215 using , ?20216 using , ?20217 using , ?20232 using , ?20233 using , ?20234 using , ?20235 using , ?20263 using , ?20264 using , ?20477 using , ?20478 using , ?20479 using , ?20480 using , ?20498 using , ?20711 using , ?20712 using , ?20713 using , ?20714 using , ?20732 using , ?20968 using , ?20969 using , ?20970 using , ?20971 using , ?20986 using , ?20987 using , ?20988 using , ?20989 using , ?21017 using , ?21018 using , ?21231 using , ?21232 using , ?21233 using , ?21234 using , ?21252 using , ?21511 using , ?21512 using , ?21513 using , ?21514 using , ?21530 using , ?21531 using , ?21532 using , ?21533 using , ?21548 using , ?21549 using , ?21550 using , ?21551 using , ?21590 using , ?21591 using , ?21592 using , ?21851 using , ?21852 using , ?21853 using , ?21854 using , ?21870 using , ?21871 using , ?21872 using , ?21873 using , ?21888 using , ?21889 using , ?21890 using , ?21891 using , ?21930 using , ?21931 using , ?21932 using , ?22168 using , ?22169 using , ?22170 using , ?22171 using , ?22186 using , ?22187 using , ?22188 using , ?22189 using , ?22217 using , ?22218 using , ?22431 using , ?22432 using , ?22433 using , ?22434 using , ?22452 using ,)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>;<span class="id" type="tactic">assumption</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 22492)
  
  v : Vars
  T : Term
  A : Term
  n : nat
  j : nat
  l : n &lt; v
  H : #(v - 1) = A ↑  1 # j
  H0 : j &lt; n
  ============================
   j &lt; v

(dependent evars: ?19234 using , ?19441 using , ?19442 using , ?19443 using , ?19444 using , ?19460 using , ?19461 using , ?19462 using , ?19463 using , ?19491 using , ?19492 using , ?19699 using , ?19700 using , ?19701 using , ?19702 using , ?19718 using , ?19719 using , ?19720 using , ?19721 using , ?19749 using , ?19750 using , ?19957 using , ?19958 using , ?19959 using , ?19960 using , ?19975 using , ?19976 using , ?19977 using , ?19978 using , ?20006 using , ?20007 using , ?20214 using , ?20215 using , ?20216 using , ?20217 using , ?20232 using , ?20233 using , ?20234 using , ?20235 using , ?20263 using , ?20264 using , ?20477 using , ?20478 using , ?20479 using , ?20480 using , ?20498 using , ?20711 using , ?20712 using , ?20713 using , ?20714 using , ?20732 using , ?20968 using , ?20969 using , ?20970 using , ?20971 using , ?20986 using , ?20987 using , ?20988 using , ?20989 using , ?21017 using , ?21018 using , ?21231 using , ?21232 using , ?21233 using , ?21234 using , ?21252 using , ?21511 using , ?21512 using , ?21513 using , ?21514 using , ?21530 using , ?21531 using , ?21532 using , ?21533 using , ?21548 using , ?21549 using , ?21550 using , ?21551 using , ?21590 using , ?21591 using , ?21592 using , ?21851 using , ?21852 using , ?21853 using , ?21854 using , ?21870 using , ?21871 using , ?21872 using , ?21873 using , ?21888 using , ?21889 using , ?21890 using , ?21891 using , ?21930 using , ?21931 using , ?21932 using , ?22168 using , ?22169 using , ?22170 using , ?22171 using , ?22186 using , ?22187 using , ?22188 using , ?22189 using , ?22217 using , ?22218 using , ?22431 using , ?22432 using , ?22433 using , ?22434 using , ?22452 using ,)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span>;<span class="id" type="tactic">assumption</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars: ?19234 using , ?19441 using , ?19442 using , ?19443 using , ?19444 using , ?19460 using , ?19461 using , ?19462 using , ?19463 using , ?19491 using , ?19492 using , ?19699 using , ?19700 using , ?19701 using , ?19702 using , ?19718 using , ?19719 using , ?19720 using , ?19721 using , ?19749 using , ?19750 using , ?19957 using , ?19958 using , ?19959 using , ?19960 using , ?19975 using , ?19976 using , ?19977 using , ?19978 using , ?20006 using , ?20007 using , ?20214 using , ?20215 using , ?20216 using , ?20217 using , ?20232 using , ?20233 using , ?20234 using , ?20235 using , ?20263 using , ?20264 using , ?20477 using , ?20478 using , ?20479 using , ?20480 using , ?20498 using , ?20711 using , ?20712 using , ?20713 using , ?20714 using , ?20732 using , ?20968 using , ?20969 using , ?20970 using , ?20971 using , ?20986 using , ?20987 using , ?20988 using , ?20989 using , ?21017 using , ?21018 using , ?21231 using , ?21232 using , ?21233 using , ?21234 using , ?21252 using , ?21511 using , ?21512 using , ?21513 using , ?21514 using , ?21530 using , ?21531 using , ?21532 using , ?21533 using , ?21548 using , ?21549 using , ?21550 using , ?21551 using , ?21590 using , ?21591 using , ?21592 using , ?21851 using , ?21852 using , ?21853 using , ?21854 using , ?21870 using , ?21871 using , ?21872 using , ?21873 using , ?21888 using , ?21889 using , ?21890 using , ?21891 using , ?21930 using , ?21931 using , ?21932 using , ?22168 using , ?22169 using , ?22170 using , ?22171 using , ?22186 using , ?22187 using , ?22188 using , ?22189 using , ?22217 using , ?22218 using , ?22431 using , ?22432 using , ?22433 using , ?22434 using , ?22452 using ,)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>subst_is_lift is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">End</span> <a class="idref" href="f_term.html#"><span class="id" type="module">f_term_mod</span></a>.</span><div class="output"><pre>Module Type f_term_mod is defined

</pre></div>
<span class="command"><br>
</span><div class="output"><pre></pre></div>
</div>
</div>

<div>
<hr>
<a href="index.html">Index</a><hr>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div></body>
</html>
