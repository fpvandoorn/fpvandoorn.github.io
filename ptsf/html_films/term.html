<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="proviola.css">
<link href="coqdoc.css" type="text/css" rel="stylesheet">
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script><script type="text/javascript">
      $(document).ready(function() {
        $(".command").mouseenter(function() {
          $(this).next(".output").fadeIn(5);
                   }).mouseleave(function() {
          $(this).next(".output").fadeOut(0);})
      });
    </script>
</head>
<body><div>

<div>
</div>

<div>

<h1 class="libtitle">Library term</h1>

<div>
<span class="command">
</span><div class="output"><pre></pre></div>
</div>

<div>
<a name="lab13"></a><h1 class="section">Annotated Terms syntax </h1>

In this file, we describe a slightly different syntax for terms: we add two
annotations to applications. If the head of an application if a function from
  <span class="inlinecode"><a class="idref" href="env.html#A"><span class="id" type="variable">A</span></a></span> to <span class="inlinecode"><a class="idref" href="env.html#B"><span class="id" type="variable">B</span></a></span>, we had both informations in the application, in order to keep
track of the conversion during the typing that would be impossible to rebuild
after.

</div>
<div>
<span class="command">
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Peano_dec.html#"><span class="id" type="library">Peano_dec</span></a>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#"><span class="id" type="library">Compare_dec</span></a>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#"><span class="id" type="library">Lt</span></a>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Le.html#"><span class="id" type="library">Le</span></a>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Gt.html#"><span class="id" type="library">Gt</span></a>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#"><span class="id" type="library">Plus</span></a>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#"><span class="id" type="library">Minus</span></a>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Bool.Bool.html#"><span class="id" type="library">Bool</span></a>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="base.html#"><span class="id" type="library">base</span></a>.</span><div class="output"><pre></pre></div>
<span class="command"><br>

<br>
</span><div class="output"><pre></pre></div>
</div>

<div>
Term syntax. Notice the two additional <span class="inlinecode"><a name="ut_term_mod.Term"><span class="id" type="inductive">Term</span></a></span> in the application.
</div>
<div>
<span class="command">
<span class="id" type="keyword">Module</span> <span class="id" type="keyword">Type</span> <a name="term_mod"><span class="id" type="module">term_mod</span></a> (<span class="id" type="var">X</span>:<a class="idref" href="base.html#"><span class="id" type="module">term_sig</span></a>).</span><div class="output"><pre>Interactive Module Type term_mod started

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Import</span> <span class="id" type="var">X</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Inductive</span> <a name="term_mod.Term"><span class="id" type="inductive">Term</span></a> : <span class="id" type="keyword">Set</span>:=<br>
 | <a name="term_mod.Var"><span class="id" type="constructor">Var</span></a> : <a class="idref" href="base.html#Vars"><span class="id" type="definition">Vars</span></a> -&gt; <a class="idref" href="term.html#Term"><span class="id" type="inductive">Term</span></a><br>
 | <span class="id" type="keyword">Sort</span> : <a class="idref" href="term.html#X.Sorts"><span class="id" type="axiom">Sorts</span></a> -&gt; <a class="idref" href="term.html#Term"><span class="id" type="inductive">Term</span></a><br>
 | <a name="term_mod.App"><span class="id" type="constructor">App</span></a> : <a class="idref" href="term.html#Term"><span class="id" type="inductive">Term</span></a> -&gt; <a class="idref" href="term.html#Term"><span class="id" type="inductive">Term</span></a> -&gt; <a class="idref" href="term.html#Term"><span class="id" type="inductive">Term</span></a> -&gt; <a class="idref" href="term.html#Term"><span class="id" type="inductive">Term</span></a> -&gt; <a class="idref" href="term.html#Term"><span class="id" type="inductive">Term</span></a><br>
 | <a name="term_mod.Pi"><span class="id" type="constructor">Pi</span></a> : <a class="idref" href="term.html#Term"><span class="id" type="inductive">Term</span></a> -&gt; <a class="idref" href="term.html#Term"><span class="id" type="inductive">Term</span></a> -&gt; <a class="idref" href="term.html#Term"><span class="id" type="inductive">Term</span></a><br>
 | <a name="term_mod.La"><span class="id" type="constructor">La</span></a> :<a class="idref" href="term.html#Term"><span class="id" type="inductive">Term</span></a> -&gt; <a class="idref" href="term.html#Term"><span class="id" type="inductive">Term</span></a> -&gt; <a class="idref" href="term.html#Term"><span class="id" type="inductive">Term</span></a><br>
.</span><div class="output"><pre>Term is defined
Term_rect is defined
Term_ind is defined
Term_rec is defined

</pre></div>
<span class="command"><br>

<br>
</span><div class="output"><pre></pre></div>
</div>

<div>
this notation means that the product x y is annotated by the function space
A -&gt; B.
</div>
<div>
<span class="command">
<span class="id" type="keyword">Notation</span> <a name="term_mod.:Typ_scope:x_'%C2%B7('_x_','_x_')'_x"><span class="id" type="notation">"</span></a>x ·( A , B ) y" := (<a class="idref" href="term.html#term_mod.App"><span class="id" type="constructor">App</span></a> <span class="id" type="var">x</span> <span class="id" type="var">A</span> <span class="id" type="var">B</span> <span class="id" type="var">y</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 15, <span class="id" type="tactic">left</span> <span class="id" type="keyword">associativity</span>) : <span class="id" type="var">Typ_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Notation</span> <a name="term_mod.:Typ_scope:'!'_x"><span class="id" type="notation">"</span></a>! s" := (<span class="id" type="keyword">Sort</span> <span class="id" type="var">s</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 1) : <span class="id" type="var">Typ_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Notation</span> <a name="term_mod.:Typ_scope:'#'_x"><span class="id" type="notation">"</span></a># v" := (<a class="idref" href="term.html#term_mod.Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">v</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 1) : <span class="id" type="var">Typ_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Notation</span> <a name="term_mod.:Typ_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">"</span></a>'Π' ( U ) , V " := (<a class="idref" href="term.html#term_mod.Pi"><span class="id" type="constructor">Pi</span></a> <span class="id" type="var">U</span> <span class="id" type="var">V</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 20, <span class="id" type="var">U</span>, <span class="id" type="var">V</span> <span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 30) : <span class="id" type="var">Typ_scope</span>.</span><div class="output"><pre>Identifier 'Π' now a keyword

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Notation</span> <a name="term_mod.:Typ_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">"</span></a>'λ' [ U ] , v " := (<a class="idref" href="term.html#term_mod.La"><span class="id" type="constructor">La</span></a> <span class="id" type="var">U</span> <span class="id" type="var">v</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 20, <span class="id" type="var">U</span> , <span class="id" type="var">v</span> <span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 30) : <span class="id" type="var">Typ_scope</span>.</span><div class="output"><pre>Identifier 'λ' now a keyword

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Reserved Notation</span> " t ↑ x # n " (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 5, <span class="id" type="var">x</span> <span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 0, <span class="id" type="tactic">left</span> <span class="id" type="keyword">associativity</span>).</span><div class="output"><pre></pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Delimit</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">Typ_scope</span> <span class="id" type="keyword">with</span> <span class="id" type="var">Typ</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>

<br>
</span><div class="output"><pre></pre></div>
</div>

<div>
Same as for usual terms, we need lift and subst functions, with the very
same properties. They are just extended to deal with the two annotations.
</div>
<div>
<span class="command">

<br>
<span class="id" type="keyword">Open</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">Typ_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Fixpoint</span> <a name="term_mod.lift_rec"><span class="id" type="definition">lift_rec</span></a> (<span class="id" type="var">n</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) (<span class="id" type="var">k</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) (<span class="id" type="var">T</span>:<a class="idref" href="term.html#term_mod.Term"><span class="id" type="inductive">Term</span></a>) {<span class="id" type="keyword">struct</span> <span class="id" type="var">T</span>} := <span class="id" type="keyword">match</span> <a class="idref" href="term.html#T"><span class="id" type="variable">T</span></a> <span class="id" type="keyword">with</span><br>
   | <a class="idref" href="term.html#term_mod.:Typ_scope:'#'_x"><span class="id" type="notation">#</span></a> <span class="id" type="var">x</span> =&gt;  <span class="id" type="keyword">if</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <a class="idref" href="term.html#k"><span class="id" type="variable">k</span></a> <span class="id" type="var">x</span> <span class="id" type="keyword">then</span> <a class="idref" href="term.html#term_mod.Var"><span class="id" type="constructor">Var</span></a> (<a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">x</span>) <span class="id" type="keyword">else</span> <a class="idref" href="term.html#term_mod.Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">x</span><br>
   | <a class="idref" href="term.html#term_mod.:Typ_scope:'!'_x"><span class="id" type="notation">!</span></a> <span class="id" type="var">s</span> =&gt; <span class="id" type="keyword">Sort</span> <span class="id" type="var">s</span><br>
   | <span class="id" type="var">M</span> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%C2%B7('_x_','_x_')'_x"><span class="id" type="notation">·(</span></a><span class="id" type="var">A</span><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%C2%B7('_x_','_x_')'_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">B</span><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%C2%B7('_x_','_x_')'_x"><span class="id" type="notation">)</span></a> <span class="id" type="var">N</span>=&gt;  <a class="idref" href="term.html#term_mod.App"><span class="id" type="constructor">App</span></a> (<span class="id" type="var">M</span> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#k"><span class="id" type="variable">k</span></a>) (<span class="id" type="var">A</span><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#k"><span class="id" type="variable">k</span></a>) (<span class="id" type="var">B</span> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a>) (<span class="id" type="var">N</span> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#k"><span class="id" type="variable">k</span></a>)<br>
   | <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">Π</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">(</span></a> <span class="id" type="var">A</span> <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">),</span></a> <span class="id" type="var">B</span> =&gt; <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">Π</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">(</span></a><span class="id" type="var">A</span> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">),</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">(</span></a><span class="id" type="var">B</span> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">)</span></a><br>
   | <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">λ</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">[</span></a> <span class="id" type="var">A</span> <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">],</span></a> <span class="id" type="var">M</span> =&gt; <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">λ</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">[</span></a><span class="id" type="var">A</span> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">],</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">(</span></a><span class="id" type="var">M</span> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">)</span></a> <br>
 <span class="id" type="keyword">end</span>  <br>
   <span class="id" type="keyword">where</span> <a name="term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">"</span></a>t ↑ n # k" := (<a class="idref" href="term.html#lift_rec"><span class="id" type="definition">lift_rec</span></a> <span class="id" type="var">n</span> <span class="id" type="var">k</span> <span class="id" type="var">t</span>) : <span class="id" type="var">Typ_scope</span>.</span><div class="output"><pre>lift_rec is recursively defined (decreasing on 3rd argument)

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Notation</span> <a name="term_mod.:Typ_scope:x_'%E2%86%91'_x"><span class="id" type="notation">"</span></a> t ↑ n " := (<a class="idref" href="term.html#term_mod.lift_rec"><span class="id" type="definition">lift_rec</span></a> <span class="id" type="var">n</span> 0 <span class="id" type="var">t</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 5, <span class="id" type="var">n</span> <span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 0, <span class="id" type="tactic">left</span> <span class="id" type="keyword">associativity</span>) : <span class="id" type="var">Typ_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="term_mod.inv_lift"><span class="id" type="lemma">inv_lift</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> , <a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#m"><span class="id" type="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="term.html#N"><span class="id" type="variable">N</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#m"><span class="id" type="variable">m</span></a> -&gt; <a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="term.html#N"><span class="id" type="variable">N</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 9)
  
  ============================
   forall (M N : Term) (n m : nat), M ↑ n # m = N ↑ n # m -&gt; M = N

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intros</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">induction</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">destruct</span> <span class="id" type="var">N</span>; <span class="id" type="tactic">intros</span>;<br>
<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">try</span> (<span class="id" type="tactic">discriminate</span> || <span class="id" type="tactic">intuition</span>); (<span class="id" type="tactic">try</span> (<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">m</span> <span class="id" type="var">v</span>) ; <span class="id" type="tactic">discriminate</span>)).</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 229)
  
  v : Vars
  v0 : Vars
  n : nat
  m : nat
  H : (if le_gt_dec m v then #(n + v) else #v) =
      (if le_gt_dec m v0 then #(n + v0) else #v0)
  ============================
   #v = #v0

subgoal 2 (ID 335) is:
 M1 ·( M2, M3)M4 = N1 ·( N2, N3)N4
subgoal 3 (ID 403) is:
 Π (M1), M2 = Π (N1), N2
subgoal 4 (ID 463) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">m</span> <span class="id" type="var">v</span>); <span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">m</span> <span class="id" type="var">v0</span>) ; <span class="id" type="tactic">injection</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 967)
  
  v : Vars
  v0 : Vars
  n : nat
  m : nat
  l : m &lt;= v
  l0 : m &lt;= v0
  H : #(n + v) = #(n + v0)
  H0 : n + v = n + v0
  ============================
   #v = #v0

subgoal 2 (ID 976) is:
 #v = #(n + v)
subgoal 3 (ID 982) is:
 #(n + v0) = #v0
subgoal 4 (ID 335) is:
 M1 ·( M2, M3)M4 = N1 ·( N2, N3)N4
subgoal 5 (ID 403) is:
 Π (M1), M2 = Π (N1), N2
subgoal 6 (ID 463) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_reg_l"><span class="id" type="lemma">plus_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H0</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 976)
  
  v : Vars
  n : nat
  m : nat
  l : m &lt;= v
  g : m &gt; n + v
  H : #(n + v) = #(n + v)
  ============================
   #v = #(n + v)

subgoal 2 (ID 982) is:
 #(n + v0) = #v0
subgoal 3 (ID 335) is:
 M1 ·( M2, M3)M4 = N1 ·( N2, N3)N4
subgoal 4 (ID 403) is:
 Π (M1), M2 = Π (N1), N2
subgoal 5 (ID 463) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">m</span>). </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1055)
  
  v : Vars
  n : nat
  m : nat
  l : m &lt;= v
  g : m &gt; n + v
  H : #(n + v) = #(n + v)
  ============================
   m &lt; m

subgoal 2 (ID 982) is:
 #(n + v0) = #v0
subgoal 3 (ID 335) is:
 M1 ·( M2, M3)M4 = N1 ·( N2, N3)N4
subgoal 4 (ID 403) is:
 Π (M1), M2 = Π (N1), N2
subgoal 5 (ID 463) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1056)
  
  v : Vars
  n : nat
  m : nat
  l : m &lt;= v
  g : m &gt; n + v
  H : #(n + v) = #(n + v)
  ============================
   m &lt;= v

subgoal 2 (ID 1057) is:
 v &lt; m
subgoal 3 (ID 982) is:
 #(n + v0) = #v0
subgoal 4 (ID 335) is:
 M1 ·( M2, M3)M4 = N1 ·( N2, N3)N4
subgoal 5 (ID 403) is:
 Π (M1), M2 = Π (N1), N2
subgoal 6 (ID 463) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1057)
  
  v : Vars
  n : nat
  m : nat
  l : m &lt;= v
  g : m &gt; n + v
  H : #(n + v) = #(n + v)
  ============================
   v &lt; m

subgoal 2 (ID 982) is:
 #(n + v0) = #v0
subgoal 3 (ID 335) is:
 M1 ·( M2, M3)M4 = N1 ·( N2, N3)N4
subgoal 4 (ID 403) is:
 Π (M1), M2 = Π (N1), N2
subgoal 5 (ID 463) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">induction</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 982)
  
  v0 : Vars
  n : nat
  m : nat
  l : m &lt;= v0
  g : m &gt; n + v0
  H : #(n + v0) = #(n + v0)
  ============================
   #(n + v0) = #v0

subgoal 2 (ID 335) is:
 M1 ·( M2, M3)M4 = N1 ·( N2, N3)N4
subgoal 3 (ID 403) is:
 Π (M1), M2 = Π (N1), N2
subgoal 4 (ID 463) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v0</span>). </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 1095)
  
  v0 : Vars
  n : nat
  m : nat
  l : m &lt;= v0
  g : m &gt; n + v0
  H : #(n + v0) = #(n + v0)
  ============================
   v0 &lt; v0

subgoal 2 (ID 335) is:
 M1 ·( M2, M3)M4 = N1 ·( N2, N3)N4
subgoal 3 (ID 403) is:
 Π (M1), M2 = Π (N1), N2
subgoal 4 (ID 463) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">m</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1096)
  
  v0 : Vars
  n : nat
  m : nat
  l : m &lt;= v0
  g : m &gt; n + v0
  H : #(n + v0) = #(n + v0)
  ============================
   v0 &lt; m

subgoal 2 (ID 1097) is:
 m &lt;= v0
subgoal 3 (ID 335) is:
 M1 ·( M2, M3)M4 = N1 ·( N2, N3)N4
subgoal 4 (ID 403) is:
 Π (M1), M2 = Π (N1), N2
subgoal 5 (ID 463) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">induction</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 1097)
  
  v0 : Vars
  n : nat
  m : nat
  l : m &lt;= v0
  g : m &gt; n + v0
  H : #(n + v0) = #(n + v0)
  ============================
   m &lt;= v0

subgoal 2 (ID 335) is:
 M1 ·( M2, M3)M4 = N1 ·( N2, N3)N4
subgoal 3 (ID 403) is:
 Π (M1), M2 = Π (N1), N2
subgoal 4 (ID 463) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 335)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall (N : Term) (n m : nat), M1 ↑ n # m = N ↑ n # m -&gt; M1 = N
  IHM2 : forall (N : Term) (n m : nat), M2 ↑ n # m = N ↑ n # m -&gt; M2 = N
  IHM3 : forall (N : Term) (n m : nat), M3 ↑ n # m = N ↑ n # m -&gt; M3 = N
  IHM4 : forall (N : Term) (n m : nat), M4 ↑ n # m = N ↑ n # m -&gt; M4 = N
  N1 : Term
  N2 : Term
  N3 : Term
  N4 : Term
  n : nat
  m : nat
  H : M1 ↑ n # m ·( M2 ↑ n # m, M3 ↑ n # (S m))M4 ↑ n # m =
      N1 ↑ n # m ·( N2 ↑ n # m, N3 ↑ n # (S m))N4 ↑ n # m
  ============================
   M1 ·( M2, M3)M4 = N1 ·( N2, N3)N4

subgoal 2 (ID 403) is:
 Π (M1), M2 = Π (N1), N2
subgoal 3 (ID 463) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">injection</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">clear</span> <span class="id" type="var">H</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 1155)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall (N : Term) (n m : nat), M1 ↑ n # m = N ↑ n # m -&gt; M1 = N
  IHM2 : forall (N : Term) (n m : nat), M2 ↑ n # m = N ↑ n # m -&gt; M2 = N
  IHM3 : forall (N : Term) (n m : nat), M3 ↑ n # m = N ↑ n # m -&gt; M3 = N
  IHM4 : forall (N : Term) (n m : nat), M4 ↑ n # m = N ↑ n # m -&gt; M4 = N
  N1 : Term
  N2 : Term
  N3 : Term
  N4 : Term
  n : nat
  m : nat
  H0 : M4 ↑ n # m = N4 ↑ n # m
  H1 : M3 ↑ n # (S m) = N3 ↑ n # (S m)
  H2 : M2 ↑ n # m = N2 ↑ n # m
  H3 : M1 ↑ n # m = N1 ↑ n # m
  ============================
   M1 ·( M2, M3)M4 = N1 ·( N2, N3)N4

subgoal 2 (ID 403) is:
 Π (M1), M2 = Π (N1), N2
subgoal 3 (ID 463) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> (<span class="id" type="var">IHM1</span> <span class="id" type="var">N1</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">H3</span>); <span class="id" type="tactic">rewrite</span> (<span class="id" type="var">IHM2</span> <span class="id" type="var">N2</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">H2</span>); <br>
  <span class="id" type="tactic">rewrite</span> (<span class="id" type="var">IHM3</span> <span class="id" type="var">N3</span> <span class="id" type="var">n</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">m</span>) <span class="id" type="var">H1</span>); <span class="id" type="tactic">rewrite</span> (<span class="id" type="var">IHM4</span> <span class="id" type="var">N4</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">H0</span>); <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 403)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (n m : nat), M1 ↑ n # m = N ↑ n # m -&gt; M1 = N
  IHM2 : forall (N : Term) (n m : nat), M2 ↑ n # m = N ↑ n # m -&gt; M2 = N
  N1 : Term
  N2 : Term
  n : nat
  m : nat
  H : Π (M1 ↑ n # m), M2 ↑ n # (S m) = Π (N1 ↑ n # m), N2 ↑ n # (S m)
  ============================
   Π (M1), M2 = Π (N1), N2

subgoal 2 (ID 463) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">injection</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">rewrite</span> (<span class="id" type="var">IHM1</span> <span class="id" type="var">N1</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">H1</span>); <span class="id" type="tactic">rewrite</span> (<span class="id" type="var">IHM2</span> <span class="id" type="var">N2</span> <span class="id" type="var">n</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">m</span>) <span class="id" type="var">H0</span>); <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 463)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (n m : nat), M1 ↑ n # m = N ↑ n # m -&gt; M1 = N
  IHM2 : forall (N : Term) (n m : nat), M2 ↑ n # m = N ↑ n # m -&gt; M2 = N
  N1 : Term
  N2 : Term
  n : nat
  m : nat
  H : λ [M1 ↑ n # m], M2 ↑ n # (S m) = λ [N1 ↑ n # m], N2 ↑ n # (S m)
  ============================
   λ [M1], M2 = λ [N1], N2

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">injection</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">rewrite</span> (<span class="id" type="var">IHM1</span> <span class="id" type="var">N1</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">H1</span>); <span class="id" type="tactic">rewrite</span> (<span class="id" type="var">IHM2</span> <span class="id" type="var">N2</span> <span class="id" type="var">n</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">m</span>) <span class="id" type="var">H0</span>); <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>inv_lift is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="term_mod.lift_rec0"><span class="id" type="lemma">lift_rec0</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">n</span>, <a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> 0 <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 1190)
  
  ============================
   forall (M : Term) (n : nat), M ↑ 0 # n = M

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">induction</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1230)
  
  v : Vars
  n : nat
  ============================
   (if le_gt_dec n v then #v else #v) = #v

subgoal 2 (ID 1231) is:
 !s = !s
subgoal 3 (ID 1232) is:
 M1 ↑ 0 # n ·( M2 ↑ 0 # n, M3 ↑ 0 # (S n))M4 ↑ 0 # n = M1 ·( M2, M3)M4
subgoal 4 (ID 1233) is:
 Π (M1 ↑ 0 # n), M2 ↑ 0 # (S n) = Π (M1), M2
subgoal 5 (ID 1234) is:
 λ [M1 ↑ 0 # n], M2 ↑ 0 # (S n) = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">n</span> <span class="id" type="var">v</span>); <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 1231)
  
  s : Sorts
  n : nat
  ============================
   !s = !s

subgoal 2 (ID 1232) is:
 M1 ↑ 0 # n ·( M2 ↑ 0 # n, M3 ↑ 0 # (S n))M4 ↑ 0 # n = M1 ·( M2, M3)M4
subgoal 3 (ID 1233) is:
 Π (M1 ↑ 0 # n), M2 ↑ 0 # (S n) = Π (M1), M2
subgoal 4 (ID 1234) is:
 λ [M1 ↑ 0 # n], M2 ↑ 0 # (S n) = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 1232)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall n : nat, M1 ↑ 0 # n = M1
  IHM2 : forall n : nat, M2 ↑ 0 # n = M2
  IHM3 : forall n : nat, M3 ↑ 0 # n = M3
  IHM4 : forall n : nat, M4 ↑ 0 # n = M4
  n : nat
  ============================
   M1 ↑ 0 # n ·( M2 ↑ 0 # n, M3 ↑ 0 # (S n))M4 ↑ 0 # n = M1 ·( M2, M3)M4

subgoal 2 (ID 1233) is:
 Π (M1 ↑ 0 # n), M2 ↑ 0 # (S n) = Π (M1), M2
subgoal 3 (ID 1234) is:
 λ [M1 ↑ 0 # n], M2 ↑ 0 # (S n) = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM3</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM4</span>; <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 1233)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 0 # n = M1
  IHM2 : forall n : nat, M2 ↑ 0 # n = M2
  n : nat
  ============================
   Π (M1 ↑ 0 # n), M2 ↑ 0 # (S n) = Π (M1), M2

subgoal 2 (ID 1234) is:
 λ [M1 ↑ 0 # n], M2 ↑ 0 # (S n) = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>; <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 1234)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 0 # n = M1
  IHM2 : forall n : nat, M2 ↑ 0 # n = M2
  n : nat
  ============================
   λ [M1 ↑ 0 # n], M2 ↑ 0 # (S n) = λ [M1], M2

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>; <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>lift_rec0 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="term_mod.lift0"><span class="id" type="lemma">lift0</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span>, <a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x"><span class="id" type="notation">↑</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a> .</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 1261)
  
  ============================
   forall M : Term, M ↑ 0 = M

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intros</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="term.html#term_mod.lift_rec0"><span class="id" type="lemma">lift_rec0</span></a>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>lift0 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="term_mod.liftP1"><span class="id" type="lemma">liftP1</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span>  <span class="id" type="var">k</span>, <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 1268)
  
  ============================
   forall (M : Term) (i j k : nat), M ↑ j # i ↑ k # (j + i) = M ↑ (j + k) # i

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intros</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">induction</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">intros</span>;<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1318)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  ============================
   (if le_gt_dec i v then #(j + v) else #v) ↑ k # (j + i) =
   (if le_gt_dec i v then #(j + k + v) else #v)

subgoal 2 (ID 1319) is:
 !s = !s
subgoal 3 (ID 1320) is:
 M1 ↑ j # i ↑ k # (j + i) ·( M2 ↑ j # i ↑ k # (j + i),
 M3 ↑ j # (S i) ↑ k # (S (j + i)))M4 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i ·( M2 ↑ (j + k) # i, M3 ↑ (j + k) # (S i))M4 ↑ (j + k) # i
subgoal 4 (ID 1321) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 5 (ID 1322) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">v</span>); <span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1333)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  l : i &lt;= v
  ============================
   (if le_gt_dec (j + i) (j + v) then #(k + (j + v)) else #(j + v)) =
   #(j + k + v)

subgoal 2 (ID 1334) is:
 (if le_gt_dec (j + i) v then #(k + v) else #v) = #v
subgoal 3 (ID 1319) is:
 !s = !s
subgoal 4 (ID 1320) is:
 M1 ↑ j # i ↑ k # (j + i) ·( M2 ↑ j # i ↑ k # (j + i),
 M3 ↑ j # (S i) ↑ k # (S (j + i)))M4 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i ·( M2 ↑ (j + k) # i, M3 ↑ (j + k) # (S i))M4 ↑ (j + k) # i
subgoal 5 (ID 1321) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 6 (ID 1322) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>) (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>)); <span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1345)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  l : i &lt;= v
  l0 : j + i &lt;= j + v
  ============================
   #(k + (j + v)) = #(j + k + v)

subgoal 2 (ID 1346) is:
 #(j + v) = #(j + k + v)
subgoal 3 (ID 1334) is:
 (if le_gt_dec (j + i) v then #(k + v) else #v) = #v
subgoal 4 (ID 1319) is:
 !s = !s
subgoal 5 (ID 1320) is:
 M1 ↑ j # i ↑ k # (j + i) ·( M2 ↑ j # i ↑ k # (j + i),
 M3 ↑ j # (S i) ↑ k # (S (j + i)))M4 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i ·( M2 ↑ (j + k) # i, M3 ↑ (j + k) # (S i))M4 ↑ (j + k) # i
subgoal 6 (ID 1321) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 7 (ID 1322) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_assoc"><span class="id" type="lemma">plus_assoc</span></a>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1347)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  l : i &lt;= v
  l0 : j + i &lt;= j + v
  ============================
   #(k + j + v) = #(j + k + v)

subgoal 2 (ID 1346) is:
 #(j + v) = #(j + k + v)
subgoal 3 (ID 1334) is:
 (if le_gt_dec (j + i) v then #(k + v) else #v) = #v
subgoal 4 (ID 1319) is:
 !s = !s
subgoal 5 (ID 1320) is:
 M1 ↑ j # i ↑ k # (j + i) ·( M2 ↑ j # i ↑ k # (j + i),
 M3 ↑ j # (S i) ↑ k # (S (j + i)))M4 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i ·( M2 ↑ (j + k) # i, M3 ↑ (j + k) # (S i))M4 ↑ (j + k) # i
subgoal 6 (ID 1321) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 7 (ID 1322) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">replace</span> (<span class="id" type="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>) <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">k</span>) <span class="id" type="tactic">by</span> (<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a>). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1351)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  l : i &lt;= v
  l0 : j + i &lt;= j + v
  ============================
   #(j + k + v) = #(j + k + v)

subgoal 2 (ID 1346) is:
 #(j + v) = #(j + k + v)
subgoal 3 (ID 1334) is:
 (if le_gt_dec (j + i) v then #(k + v) else #v) = #v
subgoal 4 (ID 1319) is:
 !s = !s
subgoal 5 (ID 1320) is:
 M1 ↑ j # i ↑ k # (j + i) ·( M2 ↑ j # i ↑ k # (j + i),
 M3 ↑ j # (S i) ↑ k # (S (j + i)))M4 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i ·( M2 ↑ (j + k) # i, M3 ↑ (j + k) # (S i))M4 ↑ (j + k) # i
subgoal 6 (ID 1321) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 7 (ID 1322) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1346)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  l : i &lt;= v
  g : j + i &gt; j + v
  ============================
   #(j + v) = #(j + k + v)

subgoal 2 (ID 1334) is:
 (if le_gt_dec (j + i) v then #(k + v) else #v) = #v
subgoal 3 (ID 1319) is:
 !s = !s
subgoal 4 (ID 1320) is:
 M1 ↑ j # i ↑ k # (j + i) ·( M2 ↑ j # i ↑ k # (j + i),
 M3 ↑ j # (S i) ↑ k # (S (j + i)))M4 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i ·( M2 ↑ (j + k) # i, M3 ↑ (j + k) # (S i))M4 ↑ (j + k) # i
subgoal 5 (ID 1321) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 6 (ID 1322) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Gt.html#plus_gt_reg_l"><span class="id" type="lemma">plus_gt_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1354)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  l : i &lt;= v
  g : i &gt; v
  ============================
   #(j + v) = #(j + k + v)

subgoal 2 (ID 1334) is:
 (if le_gt_dec (j + i) v then #(k + v) else #v) = #v
subgoal 3 (ID 1319) is:
 !s = !s
subgoal 4 (ID 1320) is:
 M1 ↑ j # i ↑ k # (j + i) ·( M2 ↑ j # i ↑ k # (j + i),
 M3 ↑ j # (S i) ↑ k # (S (j + i)))M4 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i ·( M2 ↑ (j + k) # i, M3 ↑ (j + k) # (S i))M4 ↑ (j + k) # i
subgoal 5 (ID 1321) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 6 (ID 1322) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>).</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1355)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  l : i &lt;= v
  g : i &gt; v
  ============================
   v &lt; v

subgoal 2 (ID 1334) is:
 (if le_gt_dec (j + i) v then #(k + v) else #v) = #v
subgoal 3 (ID 1319) is:
 !s = !s
subgoal 4 (ID 1320) is:
 M1 ↑ j # i ↑ k # (j + i) ·( M2 ↑ j # i ↑ k # (j + i),
 M3 ↑ j # (S i) ↑ k # (S (j + i)))M4 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i ·( M2 ↑ (j + k) # i, M3 ↑ (j + k) # (S i))M4 ↑ (j + k) # i
subgoal 5 (ID 1321) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 6 (ID 1322) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1334)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  g : i &gt; v
  ============================
   (if le_gt_dec (j + i) v then #(k + v) else #v) = #v

subgoal 2 (ID 1319) is:
 !s = !s
subgoal 3 (ID 1320) is:
 M1 ↑ j # i ↑ k # (j + i) ·( M2 ↑ j # i ↑ k # (j + i),
 M3 ↑ j # (S i) ↑ k # (S (j + i)))M4 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i ·( M2 ↑ (j + k) # i, M3 ↑ (j + k) # (S i))M4 ↑ (j + k) # i
subgoal 4 (ID 1321) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 5 (ID 1322) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1367)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  g : i &gt; v
  l : j + i &lt;= v
  ============================
   #(k + v) = #v

subgoal 2 (ID 1319) is:
 !s = !s
subgoal 3 (ID 1320) is:
 M1 ↑ j # i ↑ k # (j + i) ·( M2 ↑ j # i ↑ k # (j + i),
 M3 ↑ j # (S i) ↑ k # (S (j + i)))M4 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i ·( M2 ↑ (j + k) # i, M3 ↑ (j + k) # (S i))M4 ↑ (j + k) # i
subgoal 4 (ID 1321) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 5 (ID 1322) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>).</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1390)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  g : i &gt; v
  l : j + i &lt;= v
  ============================
   v &lt; v

subgoal 2 (ID 1319) is:
 !s = !s
subgoal 3 (ID 1320) is:
 M1 ↑ j # i ↑ k # (j + i) ·( M2 ↑ j # i ↑ k # (j + i),
 M3 ↑ j # (S i) ↑ k # (S (j + i)))M4 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i ·( M2 ↑ (j + k) # i, M3 ↑ (j + k) # (S i))M4 ↑ (j + k) # i
subgoal 4 (ID 1321) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 5 (ID 1322) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1392)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  g : i &gt; v
  l : j + i &lt;= v
  ============================
   i &lt;= v

subgoal 2 (ID 1319) is:
 !s = !s
subgoal 3 (ID 1320) is:
 M1 ↑ j # i ↑ k # (j + i) ·( M2 ↑ j # i ↑ k # (j + i),
 M3 ↑ j # (S i) ↑ k # (S (j + i)))M4 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i ·( M2 ↑ (j + k) # i, M3 ↑ (j + k) # (S i))M4 ↑ (j + k) # i
subgoal 4 (ID 1321) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 5 (ID 1322) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">induction</span> <span class="id" type="var">j</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 1319)
  
  s : Sorts
  i : nat
  j : nat
  k : nat
  ============================
   !s = !s

subgoal 2 (ID 1320) is:
 M1 ↑ j # i ↑ k # (j + i) ·( M2 ↑ j # i ↑ k # (j + i),
 M3 ↑ j # (S i) ↑ k # (S (j + i)))M4 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i ·( M2 ↑ (j + k) # i, M3 ↑ (j + k) # (S i))M4 ↑ (j + k) # i
subgoal 3 (ID 1321) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 4 (ID 1322) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 1320)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall i j k : nat, M1 ↑ j # i ↑ k # (j + i) = M1 ↑ (j + k) # i
  IHM2 : forall i j k : nat, M2 ↑ j # i ↑ k # (j + i) = M2 ↑ (j + k) # i
  IHM3 : forall i j k : nat, M3 ↑ j # i ↑ k # (j + i) = M3 ↑ (j + k) # i
  IHM4 : forall i j k : nat, M4 ↑ j # i ↑ k # (j + i) = M4 ↑ (j + k) # i
  i : nat
  j : nat
  k : nat
  ============================
   M1 ↑ j # i ↑ k # (j + i) ·( M2 ↑ j # i ↑ k # (j + i),
   M3 ↑ j # (S i) ↑ k # (S (j + i)))M4 ↑ j # i ↑ k # (j + i) =
   M1 ↑ (j + k) # i ·( M2 ↑ (j + k) # i, M3 ↑ (j + k) # (S i))
   M4 ↑ (j + k) # i

subgoal 2 (ID 1321) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 3 (ID 1322) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 1434)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall i j k : nat, M1 ↑ j # i ↑ k # (j + i) = M1 ↑ (j + k) # i
  IHM2 : forall i j k : nat, M2 ↑ j # i ↑ k # (j + i) = M2 ↑ (j + k) # i
  IHM3 : forall i j k : nat, M3 ↑ j # i ↑ k # (j + i) = M3 ↑ (j + k) # i
  IHM4 : forall i j k : nat, M4 ↑ j # i ↑ k # (j + i) = M4 ↑ (j + k) # i
  i : nat
  j : nat
  k : nat
  ============================
   M1 ↑ (j + k) # i ·( M2 ↑ j # i ↑ k # (j + i),
   M3 ↑ j # (S i) ↑ k # (S (j + i)))M4 ↑ j # i ↑ k # (j + i) =
   M1 ↑ (j + k) # i ·( M2 ↑ (j + k) # i, M3 ↑ (j + k) # (S i))
   M4 ↑ (j + k) # i

subgoal 2 (ID 1321) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 3 (ID 1322) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 1435)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall i j k : nat, M1 ↑ j # i ↑ k # (j + i) = M1 ↑ (j + k) # i
  IHM2 : forall i j k : nat, M2 ↑ j # i ↑ k # (j + i) = M2 ↑ (j + k) # i
  IHM3 : forall i j k : nat, M3 ↑ j # i ↑ k # (j + i) = M3 ↑ (j + k) # i
  IHM4 : forall i j k : nat, M4 ↑ j # i ↑ k # (j + i) = M4 ↑ (j + k) # i
  i : nat
  j : nat
  k : nat
  ============================
   M1 ↑ (j + k) # i ·( M2 ↑ (j + k) # i, M3 ↑ j # (S i) ↑ k # (S (j + i)))
   M4 ↑ j # i ↑ k # (j + i) =
   M1 ↑ (j + k) # i ·( M2 ↑ (j + k) # i, M3 ↑ (j + k) # (S i))
   M4 ↑ (j + k) # i

subgoal 2 (ID 1321) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 3 (ID 1322) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM4</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 1436)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall i j k : nat, M1 ↑ j # i ↑ k # (j + i) = M1 ↑ (j + k) # i
  IHM2 : forall i j k : nat, M2 ↑ j # i ↑ k # (j + i) = M2 ↑ (j + k) # i
  IHM3 : forall i j k : nat, M3 ↑ j # i ↑ k # (j + i) = M3 ↑ (j + k) # i
  IHM4 : forall i j k : nat, M4 ↑ j # i ↑ k # (j + i) = M4 ↑ (j + k) # i
  i : nat
  j : nat
  k : nat
  ============================
   M1 ↑ (j + k) # i ·( M2 ↑ (j + k) # i, M3 ↑ j # (S i) ↑ k # (S (j + i)))
   M4 ↑ (j + k) # i =
   M1 ↑ (j + k) # i ·( M2 ↑ (j + k) # i, M3 ↑ (j + k) # (S i))
   M4 ↑ (j + k) # i

subgoal 2 (ID 1321) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 3 (ID 1322) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">IHM3</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 1437)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall i j k : nat, M1 ↑ j # i ↑ k # (j + i) = M1 ↑ (j + k) # i
  IHM2 : forall i j k : nat, M2 ↑ j # i ↑ k # (j + i) = M2 ↑ (j + k) # i
  IHM3 : forall i j k : nat, M3 ↑ j # i ↑ k # (j + i) = M3 ↑ (j + k) # i
  IHM4 : forall i j k : nat, M4 ↑ j # i ↑ k # (j + i) = M4 ↑ (j + k) # i
  i : nat
  j : nat
  k : nat
  ============================
   M1 ↑ (j + k) # i ·( M2 ↑ (j + k) # i, M3 ↑ j # (S i) ↑ k # (S (j + i)))
   M4 ↑ (j + k) # i =
   M1 ↑ (j + k) # i ·( M2 ↑ (j + k) # i, M3 ↑ j # (S i) ↑ k # (j + S i))
   M4 ↑ (j + k) # i

subgoal 2 (ID 1321) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 3 (ID 1322) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">replace</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 1441)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall i j k : nat, M1 ↑ j # i ↑ k # (j + i) = M1 ↑ (j + k) # i
  IHM2 : forall i j k : nat, M2 ↑ j # i ↑ k # (j + i) = M2 ↑ (j + k) # i
  IHM3 : forall i j k : nat, M3 ↑ j # i ↑ k # (j + i) = M3 ↑ (j + k) # i
  IHM4 : forall i j k : nat, M4 ↑ j # i ↑ k # (j + i) = M4 ↑ (j + k) # i
  i : nat
  j : nat
  k : nat
  ============================
   M1 ↑ (j + k) # i ·( M2 ↑ (j + k) # i, M3 ↑ j # (S i) ↑ k # (S (j + i)))
   M4 ↑ (j + k) # i =
   M1 ↑ (j + k) # i ·( M2 ↑ (j + k) # i, M3 ↑ j # (S i) ↑ k # (S (j + i)))
   M4 ↑ (j + k) # i

subgoal 2 (ID 1321) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 3 (ID 1322) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 1321)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i j k : nat, M1 ↑ j # i ↑ k # (j + i) = M1 ↑ (j + k) # i
  IHM2 : forall i j k : nat, M2 ↑ j # i ↑ k # (j + i) = M2 ↑ (j + k) # i
  i : nat
  j : nat
  k : nat
  ============================
   Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
   Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)

subgoal 2 (ID 1322) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">rewrite</span> &lt;-<span class="id" type="var">IHM2</span> ;<span class="id" type="tactic">replace</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 1322)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i j k : nat, M1 ↑ j # i ↑ k # (j + i) = M1 ↑ (j + k) # i
  IHM2 : forall i j k : nat, M2 ↑ j # i ↑ k # (j + i) = M2 ↑ (j + k) # i
  i : nat
  j : nat
  k : nat
  ============================
   λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
   λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">IHM2</span> ;<span class="id" type="tactic">replace</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>liftP1 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="term_mod.liftP2"><span class="id" type="lemma">liftP2</span></a>: <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span> <span class="id" type="var">k</span> <span class="id" type="var">n</span>, <a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> -&gt;<br>
  <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 1502)
  
  ============================
   forall (M : Term) (i j k n : nat),
   i &lt;= n -&gt; M ↑ j # i ↑ k # (j + n) = M ↑ k # n ↑ j # i

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intro</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">induction</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1562)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  ============================
   (if le_gt_dec i v then #(j + v) else #v) ↑ k # (j + n) =
   (if le_gt_dec n v then #(k + v) else #v) ↑ j # i

subgoal 2 (ID 1563) is:
 !s = !s
subgoal 3 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 4 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 5 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">v</span>); <span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">n</span> <span class="id" type="var">v</span>).</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 1585)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  ============================
   #(j + v) ↑ k # (j + n) = #(k + v) ↑ j # i

subgoal 2 (ID 1586) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 3 (ID 1595) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 4 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1563) is:
 !s = !s
subgoal 6 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 7 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 8 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 1597)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  ============================
   (if le_gt_dec (j + n) (j + v) then #(k + (j + v)) else #(j + v)) =
   (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))

subgoal 2 (ID 1586) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 3 (ID 1595) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 4 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1563) is:
 !s = !s
subgoal 6 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 7 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 8 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 1606)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  l1 : j + n &lt;= j + v
  ============================
   #(k + (j + v)) =
   (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))

subgoal 2 (ID 1607) is:
 #(j + v) = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 3 (ID 1586) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1595) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 5 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 6 (ID 1563) is:
 !s = !s
subgoal 7 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 8 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 9 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>.</span><div class="output"><pre>10 subgoals, subgoal 1 (ID 1616)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  l1 : j + n &lt;= j + v
  l2 : i &lt;= k + v
  ============================
   #(k + (j + v)) = #(j + (k + v))

subgoal 2 (ID 1617) is:
 #(k + (j + v)) = #(k + v)
subgoal 3 (ID 1607) is:
 #(j + v) = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 4 (ID 1586) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1595) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 6 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 7 (ID 1563) is:
 !s = !s
subgoal 8 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 9 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 10 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> 2! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_assoc"><span class="id" type="lemma">plus_assoc</span></a>. </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 1619)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  l1 : j + n &lt;= j + v
  l2 : i &lt;= k + v
  ============================
   #(k + j + v) = #(j + k + v)

subgoal 2 (ID 1617) is:
 #(k + (j + v)) = #(k + v)
subgoal 3 (ID 1607) is:
 #(j + v) = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 4 (ID 1586) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1595) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 6 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 7 (ID 1563) is:
 !s = !s
subgoal 8 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 9 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 10 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">replace</span> (<span class="id" type="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>) <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">k</span>) <span class="id" type="tactic">by</span> (<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a>). </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 1623)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  l1 : j + n &lt;= j + v
  l2 : i &lt;= k + v
  ============================
   #(j + k + v) = #(j + k + v)

subgoal 2 (ID 1617) is:
 #(k + (j + v)) = #(k + v)
subgoal 3 (ID 1607) is:
 #(j + v) = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 4 (ID 1586) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1595) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 6 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 7 (ID 1563) is:
 !s = !s
subgoal 8 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 9 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 10 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>9 subgoals, subgoal 1 (ID 1617)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  l1 : j + n &lt;= j + v
  g : i &gt; k + v
  ============================
   #(k + (j + v)) = #(k + v)

subgoal 2 (ID 1607) is:
 #(j + v) = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 3 (ID 1586) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1595) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 5 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 6 (ID 1563) is:
 !s = !s
subgoal 7 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 8 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 9 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 1625)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  l1 : j + n &lt;= j + v
  g : i &gt; k + v
  ============================
   v &lt; v

subgoal 2 (ID 1607) is:
 #(j + v) = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 3 (ID 1586) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1595) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 5 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 6 (ID 1563) is:
 !s = !s
subgoal 7 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 8 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 9 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>. </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 1626)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  l1 : j + n &lt;= j + v
  g : i &gt; k + v
  ============================
   v &lt; i

subgoal 2 (ID 1627) is:
 i &lt;= v
subgoal 3 (ID 1607) is:
 #(j + v) = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 4 (ID 1586) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1595) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 6 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 7 (ID 1563) is:
 !s = !s
subgoal 8 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 9 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 10 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">induction</span> <span class="id" type="var">k</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 1627)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  l1 : j + n &lt;= j + v
  g : i &gt; k + v
  ============================
   i &lt;= v

subgoal 2 (ID 1607) is:
 #(j + v) = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 3 (ID 1586) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1595) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 5 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 6 (ID 1563) is:
 !s = !s
subgoal 7 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 8 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 9 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 1607)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  g : j + n &gt; j + v
  ============================
   #(j + v) = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))

subgoal 2 (ID 1586) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 3 (ID 1595) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 4 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1563) is:
 !s = !s
subgoal 6 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 7 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 8 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Gt.html#plus_gt_reg_l"><span class="id" type="lemma">plus_gt_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 1666)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  g : n &gt; v
  ============================
   #(j + v) = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))

subgoal 2 (ID 1586) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 3 (ID 1595) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 4 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1563) is:
 !s = !s
subgoal 6 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 7 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 8 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>).</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 1667)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  g : n &gt; v
  ============================
   v &lt; v

subgoal 2 (ID 1586) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 3 (ID 1595) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 4 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1563) is:
 !s = !s
subgoal 6 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 7 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 8 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1586)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  g : n &gt; v
  ============================
   #(j + v) ↑ k # (j + n) = #v ↑ j # i

subgoal 2 (ID 1595) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 3 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1563) is:
 !s = !s
subgoal 5 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 6 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 7 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1670)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  g : n &gt; v
  ============================
   (if le_gt_dec (j + n) (j + v) then #(k + (j + v)) else #(j + v)) =
   (if le_gt_dec i v then #(j + v) else #v)

subgoal 2 (ID 1595) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 3 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1563) is:
 !s = !s
subgoal 5 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 6 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 7 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 1679)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  g : n &gt; v
  l0 : j + n &lt;= j + v
  ============================
   #(k + (j + v)) = (if le_gt_dec i v then #(j + v) else #v)

subgoal 2 (ID 1680) is:
 #(j + v) = (if le_gt_dec i v then #(j + v) else #v)
subgoal 3 (ID 1595) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 4 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1563) is:
 !s = !s
subgoal 6 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 7 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 8 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_le_reg_l"><span class="id" type="lemma">plus_le_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 1682)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  g : n &gt; v
  l0 : n &lt;= v
  ============================
   #(k + (j + v)) = (if le_gt_dec i v then #(j + v) else #v)

subgoal 2 (ID 1680) is:
 #(j + v) = (if le_gt_dec i v then #(j + v) else #v)
subgoal 3 (ID 1595) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 4 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1563) is:
 !s = !s
subgoal 6 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 7 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 8 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>).</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 1683)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  g : n &gt; v
  l0 : n &lt;= v
  ============================
   v &lt; v

subgoal 2 (ID 1680) is:
 #(j + v) = (if le_gt_dec i v then #(j + v) else #v)
subgoal 3 (ID 1595) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 4 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1563) is:
 !s = !s
subgoal 6 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 7 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 8 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1680)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  g : n &gt; v
  g0 : j + n &gt; j + v
  ============================
   #(j + v) = (if le_gt_dec i v then #(j + v) else #v)

subgoal 2 (ID 1595) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 3 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1563) is:
 !s = !s
subgoal 5 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 6 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 7 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 1694)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  g : n &gt; v
  g0 : j + n &gt; j + v
  l0 : i &lt;= v
  ============================
   #(j + v) = #(j + v)

subgoal 2 (ID 1695) is:
 #(j + v) = #v
subgoal 3 (ID 1595) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 4 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1563) is:
 !s = !s
subgoal 6 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 7 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 8 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1695)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  g : n &gt; v
  g0 : j + n &gt; j + v
  g1 : i &gt; v
  ============================
   #(j + v) = #v

subgoal 2 (ID 1595) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 3 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1563) is:
 !s = !s
subgoal 5 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 6 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 7 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1696)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  g : n &gt; v
  g0 : j + n &gt; j + v
  g1 : i &gt; v
  ============================
   v &lt; v

subgoal 2 (ID 1595) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 3 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1563) is:
 !s = !s
subgoal 5 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 6 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 7 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1595)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt;= v
  ============================
   #v ↑ k # (j + n) = #(k + v) ↑ j # i

subgoal 2 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 3 (ID 1563) is:
 !s = !s
subgoal 4 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 5 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 6 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1699)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt;= v
  ============================
   (if le_gt_dec (j + n) v then #(k + v) else #v) =
   (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))

subgoal 2 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 3 (ID 1563) is:
 !s = !s
subgoal 4 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 5 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 6 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1708)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt;= v
  l0 : j + n &lt;= v
  ============================
   #(k + v) = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))

subgoal 2 (ID 1709) is:
 #v = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 3 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1563) is:
 !s = !s
subgoal 5 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 6 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 7 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1710)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt;= v
  l0 : j + n &lt;= v
  ============================
   n &lt; n

subgoal 2 (ID 1709) is:
 #v = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 3 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1563) is:
 !s = !s
subgoal 5 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 6 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 7 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 1711)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt;= v
  l0 : j + n &lt;= v
  ============================
   n &lt; i

subgoal 2 (ID 1712) is:
 i &lt;= n
subgoal 3 (ID 1709) is:
 #v = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 4 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1563) is:
 !s = !s
subgoal 6 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 7 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 8 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1712)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt;= v
  l0 : j + n &lt;= v
  ============================
   i &lt;= n

subgoal 2 (ID 1709) is:
 #v = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 3 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1563) is:
 !s = !s
subgoal 5 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 6 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 7 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1709)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt;= v
  g0 : j + n &gt; v
  ============================
   #v = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))

subgoal 2 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 3 (ID 1563) is:
 !s = !s
subgoal 4 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 5 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 6 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>).</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1715)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt;= v
  g0 : j + n &gt; v
  ============================
   v &lt; v

subgoal 2 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 3 (ID 1563) is:
 !s = !s
subgoal 4 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 5 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 6 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1716)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt;= v
  g0 : j + n &gt; v
  ============================
   v &lt; n

subgoal 2 (ID 1717) is:
 n &lt;= v
subgoal 3 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1563) is:
 !s = !s
subgoal 5 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 6 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 7 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1717)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt;= v
  g0 : j + n &gt; v
  ============================
   n &lt;= v

subgoal 2 (ID 1596) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 3 (ID 1563) is:
 !s = !s
subgoal 4 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 5 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 6 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1596)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  g0 : n &gt; v
  ============================
   #v ↑ k # (j + n) = #v ↑ j # i

subgoal 2 (ID 1563) is:
 !s = !s
subgoal 3 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 4 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 5 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1720)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  g0 : n &gt; v
  ============================
   (if le_gt_dec (j + n) v then #(k + v) else #v) =
   (if le_gt_dec i v then #(j + v) else #v)

subgoal 2 (ID 1563) is:
 !s = !s
subgoal 3 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 4 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 5 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1729)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  g0 : n &gt; v
  l : j + n &lt;= v
  ============================
   #(k + v) = (if le_gt_dec i v then #(j + v) else #v)

subgoal 2 (ID 1730) is:
 #v = (if le_gt_dec i v then #(j + v) else #v)
subgoal 3 (ID 1563) is:
 !s = !s
subgoal 4 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 5 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 6 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1731)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  g0 : n &gt; v
  l : j + n &lt;= v
  ============================
   v &lt; v

subgoal 2 (ID 1730) is:
 #v = (if le_gt_dec i v then #(j + v) else #v)
subgoal 3 (ID 1563) is:
 !s = !s
subgoal 4 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 5 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 6 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1732)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  g0 : n &gt; v
  l : j + n &lt;= v
  ============================
   v &lt; n

subgoal 2 (ID 1733) is:
 n &lt;= v
subgoal 3 (ID 1730) is:
 #v = (if le_gt_dec i v then #(j + v) else #v)
subgoal 4 (ID 1563) is:
 !s = !s
subgoal 5 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 6 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 7 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1733)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  g0 : n &gt; v
  l : j + n &lt;= v
  ============================
   n &lt;= v

subgoal 2 (ID 1730) is:
 #v = (if le_gt_dec i v then #(j + v) else #v)
subgoal 3 (ID 1563) is:
 !s = !s
subgoal 4 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 5 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 6 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">induction</span> <span class="id" type="var">j</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1730)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  g0 : n &gt; v
  g1 : j + n &gt; v
  ============================
   #v = (if le_gt_dec i v then #(j + v) else #v)

subgoal 2 (ID 1563) is:
 !s = !s
subgoal 3 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 4 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 5 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1768)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  g0 : n &gt; v
  g1 : j + n &gt; v
  l : i &lt;= v
  ============================
   #v = #(j + v)

subgoal 2 (ID 1769) is:
 #v = #v
subgoal 3 (ID 1563) is:
 !s = !s
subgoal 4 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 5 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 6 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>).</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1770)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  g0 : n &gt; v
  g1 : j + n &gt; v
  l : i &lt;= v
  ============================
   i &lt; i

subgoal 2 (ID 1769) is:
 #v = #v
subgoal 3 (ID 1563) is:
 !s = !s
subgoal 4 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 5 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 6 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1769)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  g0 : n &gt; v
  g1 : j + n &gt; v
  g2 : i &gt; v
  ============================
   #v = #v

subgoal 2 (ID 1563) is:
 !s = !s
subgoal 3 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 4 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 5 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 1563)
  
  s : Sorts
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  ============================
   !s = !s

subgoal 2 (ID 1564) is:
 M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
 M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
 M4 ↑ k # n ↑ j # i
subgoal 3 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 4 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 1564)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall i j k n : nat,
         i &lt;= n -&gt; M1 ↑ j # i ↑ k # (j + n) = M1 ↑ k # n ↑ j # i
  IHM2 : forall i j k n : nat,
         i &lt;= n -&gt; M2 ↑ j # i ↑ k # (j + n) = M2 ↑ k # n ↑ j # i
  IHM3 : forall i j k n : nat,
         i &lt;= n -&gt; M3 ↑ j # i ↑ k # (j + n) = M3 ↑ k # n ↑ j # i
  IHM4 : forall i j k n : nat,
         i &lt;= n -&gt; M4 ↑ j # i ↑ k # (j + n) = M4 ↑ k # n ↑ j # i
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  ============================
   M1 ↑ j # i ↑ k # (j + n) ·( M2 ↑ j # i ↑ k # (j + n),
   M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
   M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
   M4 ↑ k # n ↑ j # i

subgoal 2 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 3 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 1773)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall i j k n : nat,
         i &lt;= n -&gt; M1 ↑ j # i ↑ k # (j + n) = M1 ↑ k # n ↑ j # i
  IHM2 : forall i j k n : nat,
         i &lt;= n -&gt; M2 ↑ j # i ↑ k # (j + n) = M2 ↑ k # n ↑ j # i
  IHM3 : forall i j k n : nat,
         i &lt;= n -&gt; M3 ↑ j # i ↑ k # (j + n) = M3 ↑ k # n ↑ j # i
  IHM4 : forall i j k n : nat,
         i &lt;= n -&gt; M4 ↑ j # i ↑ k # (j + n) = M4 ↑ k # n ↑ j # i
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  ============================
   M1 ↑ k # n ↑ j # i ·( M2 ↑ j # i ↑ k # (j + n),
   M3 ↑ j # (S i) ↑ k # (S (j + n)))M4 ↑ j # i ↑ k # (j + n) =
   M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
   M4 ↑ k # n ↑ j # i

subgoal 2 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 3 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)) <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 1795)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall i j k n : nat,
         i &lt;= n -&gt; M1 ↑ j # i ↑ k # (j + n) = M1 ↑ k # n ↑ j # i
  IHM2 : forall i j k n : nat,
         i &lt;= n -&gt; M2 ↑ j # i ↑ k # (j + n) = M2 ↑ k # n ↑ j # i
  IHM3 : forall i j k n : nat,
         i &lt;= n -&gt; M3 ↑ j # i ↑ k # (j + n) = M3 ↑ k # n ↑ j # i
  IHM4 : forall i j k n : nat,
         i &lt;= n -&gt; M4 ↑ j # i ↑ k # (j + n) = M4 ↑ k # n ↑ j # i
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  ============================
   M1 ↑ k # n ↑ j # i ·( M2 ↑ j # i ↑ k # (j + n),
   M3 ↑ j # (S i) ↑ k # (j + S n))M4 ↑ j # i ↑ k # (j + n) =
   M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
   M4 ↑ k # n ↑ j # i

subgoal 2 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 3 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 1816)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall i j k n : nat,
         i &lt;= n -&gt; M1 ↑ j # i ↑ k # (j + n) = M1 ↑ k # n ↑ j # i
  IHM2 : forall i j k n : nat,
         i &lt;= n -&gt; M2 ↑ j # i ↑ k # (j + n) = M2 ↑ k # n ↑ j # i
  IHM3 : forall i j k n : nat,
         i &lt;= n -&gt; M3 ↑ j # i ↑ k # (j + n) = M3 ↑ k # n ↑ j # i
  IHM4 : forall i j k n : nat,
         i &lt;= n -&gt; M4 ↑ j # i ↑ k # (j + n) = M4 ↑ k # n ↑ j # i
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  ============================
   M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ j # (S i) ↑ k # (j + S n))
   M4 ↑ j # i ↑ k # (j + n) =
   M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
   M4 ↑ k # n ↑ j # i

subgoal 2 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 3 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM3</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 1835)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall i j k n : nat,
         i &lt;= n -&gt; M1 ↑ j # i ↑ k # (j + n) = M1 ↑ k # n ↑ j # i
  IHM2 : forall i j k n : nat,
         i &lt;= n -&gt; M2 ↑ j # i ↑ k # (j + n) = M2 ↑ k # n ↑ j # i
  IHM3 : forall i j k n : nat,
         i &lt;= n -&gt; M3 ↑ j # i ↑ k # (j + n) = M3 ↑ k # n ↑ j # i
  IHM4 : forall i j k n : nat,
         i &lt;= n -&gt; M4 ↑ j # i ↑ k # (j + n) = M4 ↑ k # n ↑ j # i
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  ============================
   M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
   M4 ↑ j # i ↑ k # (j + n) =
   M1 ↑ k # n ↑ j # i ·( M2 ↑ k # n ↑ j # i, M3 ↑ k # (S n) ↑ j # (S i))
   M4 ↑ k # n ↑ j # i

subgoal 2 (ID 1565) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 3 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM4</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 1565)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i j k n : nat,
         i &lt;= n -&gt; M1 ↑ j # i ↑ k # (j + n) = M1 ↑ k # n ↑ j # i
  IHM2 : forall i j k n : nat,
         i &lt;= n -&gt; M2 ↑ j # i ↑ k # (j + n) = M2 ↑ k # n ↑ j # i
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  ============================
   Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
   Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)

subgoal 2 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 1873)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i j k n : nat,
         i &lt;= n -&gt; M1 ↑ j # i ↑ k # (j + n) = M1 ↑ k # n ↑ j # i
  IHM2 : forall i j k n : nat,
         i &lt;= n -&gt; M2 ↑ j # i ↑ k # (j + n) = M2 ↑ k # n ↑ j # i
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  ============================
   Π (M1 ↑ k # n ↑ j # i), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
   Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)

subgoal 2 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)) <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 1891)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i j k n : nat,
         i &lt;= n -&gt; M1 ↑ j # i ↑ k # (j + n) = M1 ↑ k # n ↑ j # i
  IHM2 : forall i j k n : nat,
         i &lt;= n -&gt; M2 ↑ j # i ↑ k # (j + n) = M2 ↑ k # n ↑ j # i
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  ============================
   Π (M1 ↑ k # n ↑ j # i), M2 ↑ j # (S i) ↑ k # (j + S n) =
   Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)

subgoal 2 (ID 1566) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> (<span class="id" type="var">IHM2</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>) <span class="id" type="var">j</span> <span class="id" type="var">k</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 1566)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i j k n : nat,
         i &lt;= n -&gt; M1 ↑ j # i ↑ k # (j + n) = M1 ↑ k # n ↑ j # i
  IHM2 : forall i j k n : nat,
         i &lt;= n -&gt; M2 ↑ j # i ↑ k # (j + n) = M2 ↑ k # n ↑ j # i
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  ============================
   λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
   λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 1923)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i j k n : nat,
         i &lt;= n -&gt; M1 ↑ j # i ↑ k # (j + n) = M1 ↑ k # n ↑ j # i
  IHM2 : forall i j k n : nat,
         i &lt;= n -&gt; M2 ↑ j # i ↑ k # (j + n) = M2 ↑ k # n ↑ j # i
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  ============================
   λ [M1 ↑ k # n ↑ j # i], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
   λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)) <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 1941)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i j k n : nat,
         i &lt;= n -&gt; M1 ↑ j # i ↑ k # (j + n) = M1 ↑ k # n ↑ j # i
  IHM2 : forall i j k n : nat,
         i &lt;= n -&gt; M2 ↑ j # i ↑ k # (j + n) = M2 ↑ k # n ↑ j # i
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  ============================
   λ [M1 ↑ k # n ↑ j # i], M2 ↑ j # (S i) ↑ k # (j + S n) =
   λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> (<span class="id" type="var">IHM2</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>) <span class="id" type="var">j</span> <span class="id" type="var">k</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) ); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>liftP2 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="term_mod.liftP3"><span class="id" type="lemma">liftP3</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">i</span> <span class="id" type="var">k</span> <span class="id" type="var">j</span> <span class="id" type="var">n</span> , <a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="term.html#k"><span class="id" type="variable">k</span></a> -&gt; <a class="idref" href="term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">(</span></a><a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">)</span></a> -&gt;<br>
  <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 1979)
  
  ============================
   forall (M : Term) (i k j n : nat),
   i &lt;= k -&gt; k &lt;= i + n -&gt; M ↑ n # i ↑ j # k = M ↑ (j + n) # i

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intro</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">induction</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 2044)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   (if le_gt_dec i v then #(n + v) else #v) ↑ j # k =
   (if le_gt_dec i v then #(j + n + v) else #v)

subgoal 2 (ID 2045) is:
 !s = !s
subgoal 3 (ID 2046) is:
 M1 ↑ n # i ↑ j # k ·( M2 ↑ n # i ↑ j # k, M3 ↑ n # (S i) ↑ j # (S k))
 M4 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i ·( M2 ↑ (j + n) # i, M3 ↑ (j + n) # (S i))M4 ↑ (j + n) # i
subgoal 4 (ID 2047) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 5 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">v</span>); <span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 2059)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  ============================
   (if le_gt_dec k (n + v) then #(j + (n + v)) else #(n + v)) = #(j + n + v)

subgoal 2 (ID 2060) is:
 (if le_gt_dec k v then #(j + v) else #v) = #v
subgoal 3 (ID 2045) is:
 !s = !s
subgoal 4 (ID 2046) is:
 M1 ↑ n # i ↑ j # k ·( M2 ↑ n # i ↑ j # k, M3 ↑ n # (S i) ↑ j # (S k))
 M4 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i ·( M2 ↑ (j + n) # i, M3 ↑ (j + n) # (S i))M4 ↑ (j + n) # i
subgoal 5 (ID 2047) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 6 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">k</span> (<span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>)); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 2070)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  g : k &gt; n + v
  ============================
   #(n + v) = #(j + n + v)

subgoal 2 (ID 2060) is:
 (if le_gt_dec k v then #(j + v) else #v) = #v
subgoal 3 (ID 2045) is:
 !s = !s
subgoal 4 (ID 2046) is:
 M1 ↑ n # i ↑ j # k ·( M2 ↑ n # i ↑ j # k, M3 ↑ n # (S i) ↑ j # (S k))
 M4 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i ·( M2 ↑ (j + n) # i, M3 ↑ (j + n) # (S i))M4 ↑ (j + n) # i
subgoal 5 (ID 2047) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 6 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)). </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 2118)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  g : k &gt; n + v
  ============================
   i + n &lt; i + n

subgoal 2 (ID 2060) is:
 (if le_gt_dec k v then #(j + v) else #v) = #v
subgoal 3 (ID 2045) is:
 !s = !s
subgoal 4 (ID 2046) is:
 M1 ↑ n # i ↑ j # k ·( M2 ↑ n # i ↑ j # k, M3 ↑ n # (S i) ↑ j # (S k))
 M4 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i ·( M2 ↑ (j + n) # i, M3 ↑ (j + n) # (S i))M4 ↑ (j + n) # i
subgoal 5 (ID 2047) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 6 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">k</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 2119)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  g : k &gt; n + v
  ============================
   i + n &lt; k

subgoal 2 (ID 2120) is:
 k &lt;= i + n
subgoal 3 (ID 2060) is:
 (if le_gt_dec k v then #(j + v) else #v) = #v
subgoal 4 (ID 2045) is:
 !s = !s
subgoal 5 (ID 2046) is:
 M1 ↑ n # i ↑ j # k ·( M2 ↑ n # i ↑ j # k, M3 ↑ n # (S i) ↑ j # (S k))
 M4 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i ·( M2 ↑ (j + n) # i, M3 ↑ (j + n) # (S i))M4 ↑ (j + n) # i
subgoal 6 (ID 2047) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 7 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 2121)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  g : k &gt; n + v
  ============================
   i + n &lt;= n + v

subgoal 2 (ID 2122) is:
 n + v &lt; k
subgoal 3 (ID 2120) is:
 k &lt;= i + n
subgoal 4 (ID 2060) is:
 (if le_gt_dec k v then #(j + v) else #v) = #v
subgoal 5 (ID 2045) is:
 !s = !s
subgoal 6 (ID 2046) is:
 M1 ↑ n # i ↑ j # k ·( M2 ↑ n # i ↑ j # k, M3 ↑ n # (S i) ↑ j # (S k))
 M4 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i ·( M2 ↑ (j + n) # i, M3 ↑ (j + n) # (S i))M4 ↑ (j + n) # i
subgoal 7 (ID 2047) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 8 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 2123)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  g : k &gt; n + v
  ============================
   n + i &lt;= n + v

subgoal 2 (ID 2122) is:
 n + v &lt; k
subgoal 3 (ID 2120) is:
 k &lt;= i + n
subgoal 4 (ID 2060) is:
 (if le_gt_dec k v then #(j + v) else #v) = #v
subgoal 5 (ID 2045) is:
 !s = !s
subgoal 6 (ID 2046) is:
 M1 ↑ n # i ↑ j # k ·( M2 ↑ n # i ↑ j # k, M3 ↑ n # (S i) ↑ j # (S k))
 M4 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i ·( M2 ↑ (j + n) # i, M3 ↑ (j + n) # (S i))M4 ↑ (j + n) # i
subgoal 7 (ID 2047) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 8 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 2122)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  g : k &gt; n + v
  ============================
   n + v &lt; k

subgoal 2 (ID 2120) is:
 k &lt;= i + n
subgoal 3 (ID 2060) is:
 (if le_gt_dec k v then #(j + v) else #v) = #v
subgoal 4 (ID 2045) is:
 !s = !s
subgoal 5 (ID 2046) is:
 M1 ↑ n # i ↑ j # k ·( M2 ↑ n # i ↑ j # k, M3 ↑ n # (S i) ↑ j # (S k))
 M4 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i ·( M2 ↑ (j + n) # i, M3 ↑ (j + n) # (S i))M4 ↑ (j + n) # i
subgoal 6 (ID 2047) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 7 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 2120)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  g : k &gt; n + v
  ============================
   k &lt;= i + n

subgoal 2 (ID 2060) is:
 (if le_gt_dec k v then #(j + v) else #v) = #v
subgoal 3 (ID 2045) is:
 !s = !s
subgoal 4 (ID 2046) is:
 M1 ↑ n # i ↑ j # k ·( M2 ↑ n # i ↑ j # k, M3 ↑ n # (S i) ↑ j # (S k))
 M4 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i ·( M2 ↑ (j + n) # i, M3 ↑ (j + n) # (S i))M4 ↑ (j + n) # i
subgoal 5 (ID 2047) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 6 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 2060)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  ============================
   (if le_gt_dec k v then #(j + v) else #v) = #v

subgoal 2 (ID 2045) is:
 !s = !s
subgoal 3 (ID 2046) is:
 M1 ↑ n # i ↑ j # k ·( M2 ↑ n # i ↑ j # k, M3 ↑ n # (S i) ↑ j # (S k))
 M4 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i ·( M2 ↑ (j + n) # i, M3 ↑ (j + n) # (S i))M4 ↑ (j + n) # i
subgoal 4 (ID 2047) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 5 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">k</span> <span class="id" type="var">v</span>); <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 2150)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt;= v
  ============================
   #(j + v) = #v

subgoal 2 (ID 2045) is:
 !s = !s
subgoal 3 (ID 2046) is:
 M1 ↑ n # i ↑ j # k ·( M2 ↑ n # i ↑ j # k, M3 ↑ n # (S i) ↑ j # (S k))
 M4 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i ·( M2 ↑ (j + n) # i, M3 ↑ (j + n) # (S i))M4 ↑ (j + n) # i
subgoal 4 (ID 2047) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 5 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">k</span>).</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 2176)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt;= v
  ============================
   k &lt; k

subgoal 2 (ID 2045) is:
 !s = !s
subgoal 3 (ID 2046) is:
 M1 ↑ n # i ↑ j # k ·( M2 ↑ n # i ↑ j # k, M3 ↑ n # (S i) ↑ j # (S k))
 M4 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i ·( M2 ↑ (j + n) # i, M3 ↑ (j + n) # (S i))M4 ↑ (j + n) # i
subgoal 4 (ID 2047) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 5 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 2177)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt;= v
  ============================
   k &lt; i

subgoal 2 (ID 2178) is:
 i &lt;= k
subgoal 3 (ID 2045) is:
 !s = !s
subgoal 4 (ID 2046) is:
 M1 ↑ n # i ↑ j # k ·( M2 ↑ n # i ↑ j # k, M3 ↑ n # (S i) ↑ j # (S k))
 M4 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i ·( M2 ↑ (j + n) # i, M3 ↑ (j + n) # (S i))M4 ↑ (j + n) # i
subgoal 5 (ID 2047) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 6 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 2179)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt;= v
  ============================
   k &lt;= v

subgoal 2 (ID 2180) is:
 v &lt; i
subgoal 3 (ID 2178) is:
 i &lt;= k
subgoal 4 (ID 2045) is:
 !s = !s
subgoal 5 (ID 2046) is:
 M1 ↑ n # i ↑ j # k ·( M2 ↑ n # i ↑ j # k, M3 ↑ n # (S i) ↑ j # (S k))
 M4 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i ·( M2 ↑ (j + n) # i, M3 ↑ (j + n) # (S i))M4 ↑ (j + n) # i
subgoal 6 (ID 2047) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 7 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 2180)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt;= v
  ============================
   v &lt; i

subgoal 2 (ID 2178) is:
 i &lt;= k
subgoal 3 (ID 2045) is:
 !s = !s
subgoal 4 (ID 2046) is:
 M1 ↑ n # i ↑ j # k ·( M2 ↑ n # i ↑ j # k, M3 ↑ n # (S i) ↑ j # (S k))
 M4 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i ·( M2 ↑ (j + n) # i, M3 ↑ (j + n) # (S i))M4 ↑ (j + n) # i
subgoal 5 (ID 2047) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 6 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 2178)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt;= v
  ============================
   i &lt;= k

subgoal 2 (ID 2045) is:
 !s = !s
subgoal 3 (ID 2046) is:
 M1 ↑ n # i ↑ j # k ·( M2 ↑ n # i ↑ j # k, M3 ↑ n # (S i) ↑ j # (S k))
 M4 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i ·( M2 ↑ (j + n) # i, M3 ↑ (j + n) # (S i))M4 ↑ (j + n) # i
subgoal 4 (ID 2047) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 5 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 2045)
  
  s : Sorts
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   !s = !s

subgoal 2 (ID 2046) is:
 M1 ↑ n # i ↑ j # k ·( M2 ↑ n # i ↑ j # k, M3 ↑ n # (S i) ↑ j # (S k))
 M4 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i ·( M2 ↑ (j + n) # i, M3 ↑ (j + n) # (S i))M4 ↑ (j + n) # i
subgoal 3 (ID 2047) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 4 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 2046)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ n # i ↑ j # k = M1 ↑ (j + n) # i
  IHM2 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ n # i ↑ j # k = M2 ↑ (j + n) # i
  IHM3 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M3 ↑ n # i ↑ j # k = M3 ↑ (j + n) # i
  IHM4 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M4 ↑ n # i ↑ j # k = M4 ↑ (j + n) # i
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   M1 ↑ n # i ↑ j # k ·( M2 ↑ n # i ↑ j # k, M3 ↑ n # (S i) ↑ j # (S k))
   M4 ↑ n # i ↑ j # k =
   M1 ↑ (j + n) # i ·( M2 ↑ (j + n) # i, M3 ↑ (j + n) # (S i))
   M4 ↑ (j + n) # i

subgoal 2 (ID 2047) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 3 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 2182)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ n # i ↑ j # k = M1 ↑ (j + n) # i
  IHM2 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ n # i ↑ j # k = M2 ↑ (j + n) # i
  IHM3 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M3 ↑ n # i ↑ j # k = M3 ↑ (j + n) # i
  IHM4 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M4 ↑ n # i ↑ j # k = M4 ↑ (j + n) # i
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   M1 ↑ (j + n) # i ·( M2 ↑ n # i ↑ j # k, M3 ↑ n # (S i) ↑ j # (S k))
   M4 ↑ n # i ↑ j # k =
   M1 ↑ (j + n) # i ·( M2 ↑ (j + n) # i, M3 ↑ (j + n) # (S i))
   M4 ↑ (j + n) # i

subgoal 2 (ID 2047) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 3 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 2203)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ n # i ↑ j # k = M1 ↑ (j + n) # i
  IHM2 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ n # i ↑ j # k = M2 ↑ (j + n) # i
  IHM3 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M3 ↑ n # i ↑ j # k = M3 ↑ (j + n) # i
  IHM4 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M4 ↑ n # i ↑ j # k = M4 ↑ (j + n) # i
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   M1 ↑ (j + n) # i ·( M2 ↑ (j + n) # i, M3 ↑ n # (S i) ↑ j # (S k))
   M4 ↑ n # i ↑ j # k =
   M1 ↑ (j + n) # i ·( M2 ↑ (j + n) # i, M3 ↑ (j + n) # (S i))
   M4 ↑ (j + n) # i

subgoal 2 (ID 2047) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 3 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM3</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 2224)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ n # i ↑ j # k = M1 ↑ (j + n) # i
  IHM2 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ n # i ↑ j # k = M2 ↑ (j + n) # i
  IHM3 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M3 ↑ n # i ↑ j # k = M3 ↑ (j + n) # i
  IHM4 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M4 ↑ n # i ↑ j # k = M4 ↑ (j + n) # i
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   M1 ↑ (j + n) # i ·( M2 ↑ (j + n) # i, M3 ↑ (j + n) # (S i))
   M4 ↑ n # i ↑ j # k =
   M1 ↑ (j + n) # i ·( M2 ↑ (j + n) # i, M3 ↑ (j + n) # (S i))
   M4 ↑ (j + n) # i

subgoal 2 (ID 2226) is:
 S k &lt;= S i + n
subgoal 3 (ID 2047) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 4 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM4</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 2226)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ n # i ↑ j # k = M1 ↑ (j + n) # i
  IHM2 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ n # i ↑ j # k = M2 ↑ (j + n) # i
  IHM3 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M3 ↑ n # i ↑ j # k = M3 ↑ (j + n) # i
  IHM4 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M4 ↑ n # i ↑ j # k = M4 ↑ (j + n) # i
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   S k &lt;= S i + n

subgoal 2 (ID 2047) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 3 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
 <span class="id" type="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <span class="id" type="var">n</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)). </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 2458)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ n # i ↑ j # k = M1 ↑ (j + n) # i
  IHM2 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ n # i ↑ j # k = M2 ↑ (j + n) # i
  IHM3 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M3 ↑ n # i ↑ j # k = M3 ↑ (j + n) # i
  IHM4 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M4 ↑ n # i ↑ j # k = M4 ↑ (j + n) # i
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   S k &lt;= S (i + n)

subgoal 2 (ID 2047) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 3 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 2047)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ n # i ↑ j # k = M1 ↑ (j + n) # i
  IHM2 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ n # i ↑ j # k = M2 ↑ (j + n) # i
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
   Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)

subgoal 2 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 2495)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ n # i ↑ j # k = M1 ↑ (j + n) # i
  IHM2 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ n # i ↑ j # k = M2 ↑ (j + n) # i
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   S k &lt;= S i + n

subgoal 2 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <span class="id" type="var">n</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)). </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 2698)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ n # i ↑ j # k = M1 ↑ (j + n) # i
  IHM2 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ n # i ↑ j # k = M2 ↑ (j + n) # i
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   S k &lt;= S (i + n)

subgoal 2 (ID 2048) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 2048)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ n # i ↑ j # k = M1 ↑ (j + n) # i
  IHM2 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ n # i ↑ j # k = M2 ↑ (j + n) # i
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
   λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 2731)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ n # i ↑ j # k = M1 ↑ (j + n) # i
  IHM2 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ n # i ↑ j # k = M2 ↑ (j + n) # i
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   S k &lt;= S i + n

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <span class="id" type="var">n</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)). </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 2934)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ n # i ↑ j # k = M1 ↑ (j + n) # i
  IHM2 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ n # i ↑ j # k = M2 ↑ (j + n) # i
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   S k &lt;= S (i + n)

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>liftP3 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="term_mod.lift_lift"><span class="id" type="lemma">lift_lift</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span>, <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x"><span class="id" type="notation">(</span></a><a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#m"><span class="id" type="variable">m</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x"><span class="id" type="notation">(</span></a><a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="term.html#m"><span class="id" type="variable">m</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x"><span class="id" type="notation">)</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 2952)
  
  ============================
   forall (M : Term) (n m : nat), M ↑ m ↑ n = M ↑ (n + m)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intros</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 2955)
  
  M : Term
  n : nat
  m : nat
  ============================
   M ↑ m ↑ n = M ↑ (n + m)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="term.html#term_mod.liftP3"><span class="id" type="lemma">liftP3</span></a>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>lift_lift is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Reserved Notation</span> "M [ n ← N ]" (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 5, <span class="id" type="var">n</span> <span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 0, <span class="id" type="tactic">left</span> <span class="id" type="keyword">associativity</span>).</span><div class="output"><pre></pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Fixpoint</span> <a name="term_mod.subst_rec"><span class="id" type="definition">subst_rec</span></a> <span class="id" type="var">U</span> <span class="id" type="var">T</span> <span class="id" type="var">n</span> {<span class="id" type="keyword">struct</span> <span class="id" type="var">T</span>} :=<br>
 <span class="id" type="keyword">match</span> <a class="idref" href="term.html#T"><span class="id" type="variable">T</span></a> <span class="id" type="keyword">with</span><br>
  | <a class="idref" href="term.html#term_mod.:Typ_scope:'#'_x"><span class="id" type="notation">#</span></a> <span class="id" type="var">x</span> =&gt; <span class="id" type="keyword">match</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">x</span> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a>) <span class="id" type="keyword">with</span><br>
      | <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Specif.html#inleft"><span class="id" type="constructor">inleft</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Specif.html#left"><span class="id" type="constructor">left</span></a> <span class="id" type="var">_</span>) =&gt; <a class="idref" href="term.html#term_mod.:Typ_scope:'#'_x"><span class="id" type="notation">#</span></a> <span class="id" type="var">x</span> <br>
      | <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Specif.html#inleft"><span class="id" type="constructor">inleft</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Specif.html#right"><span class="id" type="constructor">right</span></a> <span class="id" type="var">_</span>) =&gt; <a class="idref" href="term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a>  <br>
      | <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Specif.html#inright"><span class="id" type="constructor">inright</span></a> <span class="id" type="var">_</span> =&gt; <a class="idref" href="term.html#term_mod.:Typ_scope:'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:'#'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a> 1<a class="idref" href="term.html#term_mod.:Typ_scope:'#'_x"><span class="id" type="notation">)</span></a> <br>
      <span class="id" type="keyword">end</span><br>
  | <a class="idref" href="term.html#term_mod.:Typ_scope:'!'_x"><span class="id" type="notation">!</span></a> <span class="id" type="var">s</span> =&gt; <a class="idref" href="term.html#term_mod.:Typ_scope:'!'_x"><span class="id" type="notation">!</span></a> <span class="id" type="var">s</span><br>
  | <span class="id" type="var">M</span> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%C2%B7('_x_','_x_')'_x"><span class="id" type="notation">·(</span></a><span class="id" type="var">A</span><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%C2%B7('_x_','_x_')'_x"><span class="id" type="notation">,</span></a><span class="id" type="var">B</span><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%C2%B7('_x_','_x_')'_x"><span class="id" type="notation">)</span></a> <span class="id" type="var">N</span> =&gt; <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%C2%B7('_x_','_x_')'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">M</span> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%C2%B7('_x_','_x_')'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%C2%B7('_x_','_x_')'_x"><span class="id" type="notation">·(</span></a><span class="id" type="var">A</span><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="term.html#U"><span class="id" type="variable">U</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%C2%B7('_x_','_x_')'_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">B</span> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="term.html#U"><span class="id" type="variable">U</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%C2%B7('_x_','_x_')'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%C2%B7('_x_','_x_')'_x"><span class="id" type="notation">(</span></a> <span class="id" type="var">N</span> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%C2%B7('_x_','_x_')'_x"><span class="id" type="notation">)</span></a> <br>
  | <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">Π</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">(</span></a> <span class="id" type="var">A</span> <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">),</span></a> <span class="id" type="var">B</span> =&gt; <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">Π</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">(</span></a> <span class="id" type="var">A</span> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">),</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">(</span></a><span class="id" type="var">B</span> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">)</span></a> <br>
  | <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">λ</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">[</span></a> <span class="id" type="var">A</span> <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">],</span></a> <span class="id" type="var">M</span> =&gt; <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">λ</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">[</span></a> <span class="id" type="var">A</span> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">],</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">(</span></a><span class="id" type="var">M</span> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">)</span></a> <br>
<span class="id" type="keyword">end</span><br>
    <span class="id" type="keyword">where</span> <a name="term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">"</span></a> t [ n ← w ] " := (<a class="idref" href="term.html#subst_rec"><span class="id" type="definition">subst_rec</span></a> <span class="id" type="var">w</span> <span class="id" type="var">t</span> <span class="id" type="var">n</span>) : <span class="id" type="var">Typ_scope</span>.</span><div class="output"><pre>subst_rec is recursively defined (decreasing on 2nd argument)

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Notation</span> <a name="term_mod.:Typ_scope:x_'%5B'_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">"</span></a> t [ ← w ] " := (<a class="idref" href="term.html#term_mod.subst_rec"><span class="id" type="definition">subst_rec</span></a> <span class="id" type="var">w</span> <span class="id" type="var">t</span> 0) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 5) : <span class="id" type="var">Typ_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="term_mod.expand_term_with_subst"><span class="id" type="lemma">expand_term_with_subst</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">n</span>, <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> 1 <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:'#'_x"><span class="id" type="notation">#</span></a>0 <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 2975)
  
  ============================
   forall (M : Term) (n : nat), M ↑ 1 # (S n) [n ← #0] = M

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">induction</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">intros</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3010)
  
  v : Vars
  n : nat
  ============================
   #v ↑ 1 # (S n) [n ← #0] = #v

subgoal 2 (ID 3011) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 3 (ID 3012) is:
 (M1 ·( M2, M3)M4) ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4
subgoal 4 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 5 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">unfold</span> <a class="idref" href="term.html#term_mod.lift_rec"><span class="id" type="definition">lift_rec</span></a>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3015)
  
  v : Vars
  n : nat
  ============================
   (if le_gt_dec (S n) v then #(1 + v) else #v) [n ← #0] = #v

subgoal 2 (ID 3011) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 3 (ID 3012) is:
 (M1 ·( M2, M3)M4) ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4
subgoal 4 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 5 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) <span class="id" type="var">v</span>). </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3024)
  
  v : Vars
  n : nat
  l : S n &lt;= v
  ============================
   #(1 + v) [n ← #0] = #v

subgoal 2 (ID 3025) is:
 #v [n ← #0] = #v
subgoal 3 (ID 3011) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 4 (ID 3012) is:
 (M1 ·( M2, M3)M4) ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4
subgoal 5 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 6 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">unfold</span> <a class="idref" href="term.html#term_mod.subst_rec"><span class="id" type="definition">subst_rec</span></a>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3026)
  
  v : Vars
  n : nat
  l : S n &lt;= v
  ============================
   match lt_eq_lt_dec (1 + v) n with
   | inleft (left _) =&gt; #(1 + v)
   | inleft (right _) =&gt; #0 ↑ n
   | inright _ =&gt; #(1 + v - 1)
   end = #v

subgoal 2 (ID 3025) is:
 #v [n ← #0] = #v
subgoal 3 (ID 3011) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 4 (ID 3012) is:
 (M1 ·( M2, M3)M4) ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4
subgoal 5 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 6 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>) <span class="id" type="var">n</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3040)
  
  v : Vars
  n : nat
  l : S n &lt;= v
  l0 : 1 + v &lt; n
  ============================
   #(1 + v) = #v

subgoal 2 (ID 3041) is:
 #0 ↑ n = #v
subgoal 3 (ID 3042) is:
 #(1 + v - 1) = #v
subgoal 4 (ID 3025) is:
 #v [n ← #0] = #v
subgoal 5 (ID 3011) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 6 (ID 3012) is:
 (M1 ·( M2, M3)M4) ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4
subgoal 7 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 8 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_not_lt"><span class="id" type="lemma">le_not_lt</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3044)
  
  v : Vars
  n : nat
  l : ~ v &lt; S n
  l0 : 1 + v &lt; n
  ============================
   #(1 + v) = #v

subgoal 2 (ID 3041) is:
 #0 ↑ n = #v
subgoal 3 (ID 3042) is:
 #(1 + v - 1) = #v
subgoal 4 (ID 3025) is:
 #v [n ← #0] = #v
subgoal 5 (ID 3011) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 6 (ID 3012) is:
 (M1 ·( M2, M3)M4) ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4
subgoal 7 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 8 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> <span class="id" type="var">l</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3045)
  
  v : Vars
  n : nat
  l : ~ v &lt; S n
  l0 : 1 + v &lt; n
  ============================
   v &lt; S n

subgoal 2 (ID 3041) is:
 #0 ↑ n = #v
subgoal 3 (ID 3042) is:
 #(1 + v - 1) = #v
subgoal 4 (ID 3025) is:
 #v [n ← #0] = #v
subgoal 5 (ID 3011) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 6 (ID 3012) is:
 (M1 ·( M2, M3)M4) ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4
subgoal 7 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 8 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3041)
  
  v : Vars
  n : nat
  l : S n &lt;= v
  e : 1 + v = n
  ============================
   #0 ↑ n = #v

subgoal 2 (ID 3042) is:
 #(1 + v - 1) = #v
subgoal 3 (ID 3025) is:
 #v [n ← #0] = #v
subgoal 4 (ID 3011) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 5 (ID 3012) is:
 (M1 ·( M2, M3)M4) ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4
subgoal 6 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 7 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3067)
  
  v : Vars
  n : nat
  l : S n &lt;= v
  e : 1 + v = n
  ============================
   v &lt; v

subgoal 2 (ID 3042) is:
 #(1 + v - 1) = #v
subgoal 3 (ID 3025) is:
 #v [n ← #0] = #v
subgoal 4 (ID 3011) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 5 (ID 3012) is:
 (M1 ·( M2, M3)M4) ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4
subgoal 6 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 7 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">v</span>)). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3068)
  
  v : Vars
  n : nat
  l : S n &lt;= v
  e : 1 + v = n
  ============================
   v &lt; S (S v)

subgoal 2 (ID 3069) is:
 S (S v) &lt;= v
subgoal 3 (ID 3042) is:
 #(1 + v - 1) = #v
subgoal 4 (ID 3025) is:
 #v [n ← #0] = #v
subgoal 5 (ID 3011) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 6 (ID 3012) is:
 (M1 ·( M2, M3)M4) ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4
subgoal 7 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 8 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3069)
  
  v : Vars
  n : nat
  l : S n &lt;= v
  e : 1 + v = n
  ============================
   S (S v) &lt;= v

subgoal 2 (ID 3042) is:
 #(1 + v - 1) = #v
subgoal 3 (ID 3025) is:
 #v [n ← #0] = #v
subgoal 4 (ID 3011) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 5 (ID 3012) is:
 (M1 ·( M2, M3)M4) ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4
subgoal 6 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 7 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3042)
  
  v : Vars
  n : nat
  l : S n &lt;= v
  l0 : n &lt; 1 + v
  ============================
   #(1 + v - 1) = #v

subgoal 2 (ID 3025) is:
 #v [n ← #0] = #v
subgoal 3 (ID 3011) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 4 (ID 3012) is:
 (M1 ·( M2, M3)M4) ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4
subgoal 5 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 6 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">change</span> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3084)
  
  v : Vars
  n : nat
  l : S n &lt;= v
  l0 : n &lt; 1 + v
  ============================
   #(S v - 1) = #v

subgoal 2 (ID 3025) is:
 #v [n ← #0] = #v
subgoal 3 (ID 3011) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 4 (ID 3012) is:
 (M1 ·( M2, M3)M4) ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4
subgoal 5 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 6 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3025)
  
  v : Vars
  n : nat
  g : S n &gt; v
  ============================
   #v [n ← #0] = #v

subgoal 2 (ID 3011) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 3 (ID 3012) is:
 (M1 ·( M2, M3)M4) ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4
subgoal 4 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 5 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3099)
  
  v : Vars
  n : nat
  g : S n &gt; v
  ============================
   match lt_eq_lt_dec v n with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; #(n + 0)
   | inright _ =&gt; #(v - 1)
   end = #v

subgoal 2 (ID 3011) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 3 (ID 3012) is:
 (M1 ·( M2, M3)M4) ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4
subgoal 4 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 5 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">n</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3113)
  
  v : Vars
  n : nat
  g : S n &gt; v
  l : v &lt; n
  ============================
   #v = #v

subgoal 2 (ID 3114) is:
 #(n + 0) = #v
subgoal 3 (ID 3115) is:
 #(v - 1) = #v
subgoal 4 (ID 3011) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 5 (ID 3012) is:
 (M1 ·( M2, M3)M4) ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4
subgoal 6 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 7 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3114)
  
  v : Vars
  n : nat
  g : S n &gt; v
  e : v = n
  ============================
   #(n + 0) = #v

subgoal 2 (ID 3115) is:
 #(v - 1) = #v
subgoal 3 (ID 3011) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 4 (ID 3012) is:
 (M1 ·( M2, M3)M4) ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4
subgoal 5 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 6 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3121)
  
  n : nat
  g : S n &gt; n
  ============================
   #(n + 0) = #n

subgoal 2 (ID 3115) is:
 #(v - 1) = #v
subgoal 3 (ID 3011) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 4 (ID 3012) is:
 (M1 ·( M2, M3)M4) ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4
subgoal 5 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 6 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#plus_n_O"><span class="id" type="lemma">plus_n_O</span></a>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3122)
  
  n : nat
  g : S n &gt; n
  ============================
   #n = #n

subgoal 2 (ID 3115) is:
 #(v - 1) = #v
subgoal 3 (ID 3011) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 4 (ID 3012) is:
 (M1 ·( M2, M3)M4) ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4
subgoal 5 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 6 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3115)
  
  v : Vars
  n : nat
  g : S n &gt; v
  l : n &lt; v
  ============================
   #(v - 1) = #v

subgoal 2 (ID 3011) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 3 (ID 3012) is:
 (M1 ·( M2, M3)M4) ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4
subgoal 4 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 5 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>). </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3123)
  
  v : Vars
  n : nat
  g : S n &gt; v
  l : n &lt; v
  ============================
   n &lt; n

subgoal 2 (ID 3011) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 3 (ID 3012) is:
 (M1 ·( M2, M3)M4) ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4
subgoal 4 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 5 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 3011)
  
  s : Sorts
  n : nat
  ============================
   !s ↑ 1 # (S n) [n ← #0] = !s

subgoal 2 (ID 3012) is:
 (M1 ·( M2, M3)M4) ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4
subgoal 3 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 4 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 3012)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  IHM3 : forall n : nat, M3 ↑ 1 # (S n) [n ← #0] = M3
  IHM4 : forall n : nat, M4 ↑ 1 # (S n) [n ← #0] = M4
  n : nat
  ============================
   (M1 ·( M2, M3)M4) ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4

subgoal 2 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 3 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 3133)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  IHM3 : forall n : nat, M3 ↑ 1 # (S n) [n ← #0] = M3
  IHM4 : forall n : nat, M4 ↑ 1 # (S n) [n ← #0] = M4
  n : nat
  ============================
   M1 ↑ 1 # (S n) [n ← #0] ·( M2 ↑ 1 # (S n) [n ← #0],
   M3 ↑ 1 # (S (S n)) [(S n) ← #0])M4 ↑ 1 # (S n) [n ← #0] = 
   M1 ·( M2, M3)M4

subgoal 2 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 3 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 3134)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  IHM3 : forall n : nat, M3 ↑ 1 # (S n) [n ← #0] = M3
  IHM4 : forall n : nat, M4 ↑ 1 # (S n) [n ← #0] = M4
  n : nat
  ============================
   M1 ·( M2 ↑ 1 # (S n) [n ← #0], M3 ↑ 1 # (S (S n)) [(S n) ← #0])
   M4 ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4

subgoal 2 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 3 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 3135)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  IHM3 : forall n : nat, M3 ↑ 1 # (S n) [n ← #0] = M3
  IHM4 : forall n : nat, M4 ↑ 1 # (S n) [n ← #0] = M4
  n : nat
  ============================
   M1 ·( M2, M3 ↑ 1 # (S (S n)) [(S n) ← #0])M4 ↑ 1 # (S n) [n ← #0] =
   M1 ·( M2, M3)M4

subgoal 2 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 3 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM3</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 3136)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  IHM3 : forall n : nat, M3 ↑ 1 # (S n) [n ← #0] = M3
  IHM4 : forall n : nat, M4 ↑ 1 # (S n) [n ← #0] = M4
  n : nat
  ============================
   M1 ·( M2, M3)M4 ↑ 1 # (S n) [n ← #0] = M1 ·( M2, M3)M4

subgoal 2 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 3 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM4</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 3137)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  IHM3 : forall n : nat, M3 ↑ 1 # (S n) [n ← #0] = M3
  IHM4 : forall n : nat, M4 ↑ 1 # (S n) [n ← #0] = M4
  n : nat
  ============================
   M1 ·( M2, M3)M4 = M1 ·( M2, M3)M4

subgoal 2 (ID 3013) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 3 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 3013)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  n : nat
  ============================
   (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2

subgoal 2 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 3139)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  n : nat
  ============================
   Π (M1 ↑ 1 # (S n) [n ← #0]), M2 ↑ 1 # (S (S n)) [(S n) ← #0] = Π (M1), M2

subgoal 2 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 3140)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  n : nat
  ============================
   Π (M1), M2 ↑ 1 # (S (S n)) [(S n) ← #0] = Π (M1), M2

subgoal 2 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 3141)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  n : nat
  ============================
   Π (M1), M2 = Π (M1), M2

subgoal 2 (ID 3014) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3014)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  n : nat
  ============================
   (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3143)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  n : nat
  ============================
   λ [M1 ↑ 1 # (S n) [n ← #0]], M2 ↑ 1 # (S (S n)) [(S n) ← #0] = λ [M1], M2

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>. </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3144)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  n : nat
  ============================
   λ [M1], M2 ↑ 1 # (S (S n)) [(S n) ← #0] = λ [M1], M2

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>. </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3145)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  n : nat
  ============================
   λ [M1], M2 = λ [M1], M2

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>expand_term_with_subst is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="term_mod.substP1"><span class="id" type="lemma">substP1</span></a>: <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span> <span class="id" type="var">k</span> , <br>
  <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a> <a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a>)<a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="term.html#N"><span class="id" type="variable">N</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3153)
  
  ============================
   forall (M N : Term) (i j k : nat),
   M [j ← N] ↑ k # (j + i) = M ↑ k # (S (j + i)) [j ← N ↑ k # i]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intros</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">induction</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">intros</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3191)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   #v [j ← N] ↑ k # (j + i) = #v ↑ k # (S (j + i)) [j ← N ↑ k # i]

subgoal 2 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span> (<a class="idref" href="term.html#term_mod.:Typ_scope:'#'_x"><span class="id" type="notation">#</span></a><span class="id" type="var">v</span> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><span class="id" type="var">j</span> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <span class="id" type="var">N</span><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <span class="id" type="var">k</span> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a>).</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3208)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ j
   | inright _ =&gt; #(v - 1)
   end ↑ k # (j + i) = #v ↑ k # (S (j + i)) [j ← N ↑ k # i]

subgoal 2 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">change</span> (<a class="idref" href="term.html#term_mod.:Typ_scope:'#'_x"><span class="id" type="notation">#</span></a><span class="id" type="var">v</span> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <span class="id" type="var">k</span> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)<a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="keyword">with</span>  (<span class="id" type="keyword">if</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)) <span class="id" type="var">v</span> <span class="id" type="keyword">then</span> <a class="idref" href="term.html#term_mod.:Typ_scope:'#'_x"><span class="id" type="notation">#(</span></a><span class="id" type="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span><a class="idref" href="term.html#term_mod.:Typ_scope:'#'_x"><span class="id" type="notation">)</span></a> <span class="id" type="keyword">else</span> <a class="idref" href="term.html#term_mod.:Typ_scope:'#'_x"><span class="id" type="notation">#</span></a><span class="id" type="var">v</span>).</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3211)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ j
   | inright _ =&gt; #(v - 1)
   end ↑ k # (j + i) =
   (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]

subgoal 2 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">j</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3225)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  ============================
   #v ↑ k # (j + i) =
   (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]

subgoal 2 (ID 3226) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 3 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)) <span class="id" type="var">v</span>).</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3236)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  l0 : S (j + i) &lt;= v
  ============================
   #v ↑ k # (j + i) = #(k + v) [j ← N ↑ k # i]

subgoal 2 (ID 3237) is:
 #v ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 3226) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3238)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  l0 : S (j + i) &lt;= v
  ============================
   v &lt; v

subgoal 2 (ID 3237) is:
 #v ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 3226) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">j</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3240)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  l0 : S (j + i) &lt;= v
  ============================
   j &lt;= v

subgoal 2 (ID 3237) is:
 #v ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 3226) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Le.html#le_trans"><span class="id" type="lemma">le_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3237)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  ============================
   #v ↑ k # (j + i) = #v [j ← N ↑ k # i]

subgoal 2 (ID 3226) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 3 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3275)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  ============================
   (if le_gt_dec (j + i) v then #(k + v) else #v) =
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ k # i ↑ j
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 3226) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 3 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>) <span class="id" type="var">v</span>).</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3284)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v
  ============================
   #(k + v) =
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ k # i ↑ j
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 3285) is:
 #v =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 3226) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3286)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v
  ============================
   v &lt; v

subgoal 2 (ID 3285) is:
 #v =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 3226) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">j</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3288)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v
  ============================
   j &lt;= v

subgoal 2 (ID 3285) is:
 #v =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 3226) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Le.html#le_trans"><span class="id" type="lemma">le_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3285)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  g0 : j + i &gt; v
  ============================
   #v =
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ k # i ↑ j
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 3226) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 3 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">j</span>) <span class="id" type="keyword">as</span> [[] | ]. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 3332)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  g0 : j + i &gt; v
  l0 : v &lt; j
  ============================
   #v = #v

subgoal 2 (ID 3333) is:
 #v = N ↑ k # i ↑ j
subgoal 3 (ID 3334) is:
 #v = #(v - 1)
subgoal 4 (ID 3226) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 6 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 9 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3333)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  g0 : j + i &gt; v
  e : v = j
  ============================
   #v = N ↑ k # i ↑ j

subgoal 2 (ID 3334) is:
 #v = #(v - 1)
subgoal 3 (ID 3226) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3341)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; j
  g : S (j + i) &gt; j
  g0 : j + i &gt; j
  ============================
   #j = N ↑ k # i ↑ j

subgoal 2 (ID 3334) is:
 #v = #(v - 1)
subgoal 3 (ID 3226) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>);<span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3334)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  g0 : j + i &gt; v
  l0 : j &lt; v
  ============================
   #v = #(v - 1)

subgoal 2 (ID 3226) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 3 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>); <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3226)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  e : v = j
  ============================
   N ↑ j ↑ k # (j + i) =
   (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]

subgoal 2 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 3 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)) <span class="id" type="var">v</span>). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3354)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  e : v = j
  l : S (j + i) &lt;= v
  ============================
   N ↑ j ↑ k # (j + i) = #(k + v) [j ← N ↑ k # i]

subgoal 2 (ID 3355) is:
 N ↑ j ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3360)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : S (j + i) &lt;= j
  ============================
   N ↑ j ↑ k # (j + i) = #(k + j) [j ← N ↑ k # i]

subgoal 2 (ID 3355) is:
 N ↑ j ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3361)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : S (j + i) &lt;= j
  ============================
   j &lt; j

subgoal 2 (ID 3355) is:
 N ↑ j ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3362)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : S (j + i) &lt;= j
  ============================
   j &lt; S (j + i)

subgoal 2 (ID 3363) is:
 S (j + i) &lt;= j
subgoal 3 (ID 3355) is:
 N ↑ j ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 4 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3363)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : S (j + i) &lt;= j
  ============================
   S (j + i) &lt;= j

subgoal 2 (ID 3355) is:
 N ↑ j ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3355)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  e : v = j
  g : S (j + i) &gt; v
  ============================
   N ↑ j ↑ k # (j + i) = #v [j ← N ↑ k # i]

subgoal 2 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 3 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3403)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  e : v = j
  g : S (j + i) &gt; v
  ============================
   N ↑ j ↑ k # (j + i) =
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ k # i ↑ j
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 3 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">j</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3417)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  e : v = j
  g : S (j + i) &gt; v
  l : v &lt; j
  ============================
   N ↑ j ↑ k # (j + i) = #v

subgoal 2 (ID 3418) is:
 N ↑ j ↑ k # (j + i) = N ↑ k # i ↑ j
subgoal 3 (ID 3419) is:
 N ↑ j ↑ k # (j + i) = #(v - 1)
subgoal 4 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3425)
  
  N : Term
  i : nat
  j : nat
  k : nat
  g : S (j + i) &gt; j
  l : j &lt; j
  ============================
   N ↑ j ↑ k # (j + i) = #j

subgoal 2 (ID 3418) is:
 N ↑ j ↑ k # (j + i) = N ↑ k # i ↑ j
subgoal 3 (ID 3419) is:
 N ↑ j ↑ k # (j + i) = #(v - 1)
subgoal 4 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3418)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  e : v = j
  g : S (j + i) &gt; v
  e0 : v = j
  ============================
   N ↑ j ↑ k # (j + i) = N ↑ k # i ↑ j

subgoal 2 (ID 3419) is:
 N ↑ j ↑ k # (j + i) = #(v - 1)
subgoal 3 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="term.html#term_mod.liftP2"><span class="id" type="lemma">liftP2</span></a>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3419)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  e : v = j
  g : S (j + i) &gt; v
  l : j &lt; v
  ============================
   N ↑ j ↑ k # (j + i) = #(v - 1)

subgoal 2 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 3 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3442)
  
  N : Term
  i : nat
  j : nat
  k : nat
  g : S (j + i) &gt; j
  l : j &lt; j
  ============================
   N ↑ j ↑ k # (j + i) = #(j - 1)

subgoal 2 (ID 3227) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 3 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3227)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  ============================
   #(v - 1) ↑ k # (j + i) =
   (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]

subgoal 2 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)) <span class="id" type="var">v</span>).</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3452)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  ============================
   #(v - 1) ↑ k # (j + i) = #(k + v) [j ← N ↑ k # i]

subgoal 2 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3454)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  ============================
   (if le_gt_dec (j + i) (v - 1) then #(k + (v - 1)) else #(v - 1)) =
   match lt_eq_lt_dec (k + v) j with
   | inleft (left _) =&gt; #(k + v)
   | inleft (right _) =&gt; N ↑ k # i ↑ j
   | inright _ =&gt; #(k + v - 1)
   end

subgoal 2 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>) (<span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a>1)). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3463)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  l1 : j + i &lt;= v - 1
  ============================
   #(k + (v - 1)) =
   match lt_eq_lt_dec (k + v) j with
   | inleft (left _) =&gt; #(k + v)
   | inleft (right _) =&gt; N ↑ k # i ↑ j
   | inright _ =&gt; #(k + v - 1)
   end

subgoal 2 (ID 3464) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 3 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>) <span class="id" type="var">j</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>9 subgoals, subgoal 1 (ID 3478)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  l1 : j + i &lt;= v - 1
  l2 : k + v &lt; j
  ============================
   #(k + (v - 1)) = #(k + v)

subgoal 2 (ID 3479) is:
 #(k + (v - 1)) = N ↑ k # i ↑ j
subgoal 3 (ID 3480) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 4 (ID 3464) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 5 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 6 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 9 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>). </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 3481)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  l1 : j + i &lt;= v - 1
  l2 : k + v &lt; j
  ============================
   j &lt; j

subgoal 2 (ID 3479) is:
 #(k + (v - 1)) = N ↑ k # i ↑ j
subgoal 3 (ID 3480) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 4 (ID 3464) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 5 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 6 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 9 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 3482)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  l1 : j + i &lt;= v - 1
  l2 : k + v &lt; j
  ============================
   j &lt; v

subgoal 2 (ID 3483) is:
 v &lt;= j
subgoal 3 (ID 3479) is:
 #(k + (v - 1)) = N ↑ k # i ↑ j
subgoal 4 (ID 3480) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 5 (ID 3464) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 6 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 7 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 9 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 10 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 3483)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  l1 : j + i &lt;= v - 1
  l2 : k + v &lt; j
  ============================
   v &lt;= j

subgoal 2 (ID 3479) is:
 #(k + (v - 1)) = N ↑ k # i ↑ j
subgoal 3 (ID 3480) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 4 (ID 3464) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 5 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 6 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 9 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">induction</span> <span class="id" type="var">k</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3479)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  l1 : j + i &lt;= v - 1
  e : k + v = j
  ============================
   #(k + (v - 1)) = N ↑ k # i ↑ j

subgoal 2 (ID 3480) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 3 (ID 3464) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 4 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 5 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3537)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  l : k + v &lt; v
  l0 : S (k + v + i) &lt;= v
  l1 : k + v + i &lt;= v - 1
  ============================
   #(k + (v - 1)) = N ↑ k # i ↑ (k + v)

subgoal 2 (ID 3480) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 3 (ID 3464) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 4 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 5 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3538)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  l : k + v &lt; v
  l0 : S (k + v + i) &lt;= v
  l1 : k + v + i &lt;= v - 1
  ============================
   v &lt; v

subgoal 2 (ID 3480) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 3 (ID 3464) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 4 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 5 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)). </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 3539)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  l : k + v &lt; v
  l0 : S (k + v + i) &lt;= v
  l1 : k + v + i &lt;= v - 1
  ============================
   v &lt; S (k + v + i)

subgoal 2 (ID 3540) is:
 S (k + v + i) &lt;= v
subgoal 3 (ID 3480) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 4 (ID 3464) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 5 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 6 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 9 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3540)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  l : k + v &lt; v
  l0 : S (k + v + i) &lt;= v
  l1 : k + v + i &lt;= v - 1
  ============================
   S (k + v + i) &lt;= v

subgoal 2 (ID 3480) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 3 (ID 3464) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 4 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 5 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3480)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  l1 : j + i &lt;= v - 1
  l2 : j &lt; k + v
  ============================
   #(k + (v - 1)) = #(k + v - 1)

subgoal 2 (ID 3464) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 3 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3604)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; 0
  l0 : S (j + i) &lt;= 0
  l1 : j + i &lt;= 0 - 1
  l2 : j &lt; k + 0
  ============================
   #(k + (0 - 1)) = #(k + 0 - 1)

subgoal 2 (ID 3610) is:
 #(k + (S v - 1)) = #(k + S v - 1)
subgoal 3 (ID 3464) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 4 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 5 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_O"><span class="id" type="abbreviation">lt_n_O</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3610)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  l0 : S (j + i) &lt;= S v
  l1 : j + i &lt;= S v - 1
  l2 : j &lt; k + S v
  ============================
   #(k + (S v - 1)) = #(k + S v - 1)

subgoal 2 (ID 3464) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 3 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- 2! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3614)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  l0 : S (j + i) &lt;= S v
  l1 : j + i &lt;= S v - 1
  l2 : j &lt; k + S v
  ============================
   #(k + pred (S v)) = #(pred (k + S v))

subgoal 2 (ID 3464) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 3 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">replace</span> (<span class="id" type="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">v</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>)) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3618)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  l0 : S (j + i) &lt;= S v
  l1 : j + i &lt;= S v - 1
  l2 : j &lt; k + S v
  ============================
   #(k + pred (S v)) = #(pred (S (k + v)))

subgoal 2 (ID 3464) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 3 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3633)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  l0 : S (j + i) &lt;= S v
  l1 : j + i &lt;= S v - 1
  l2 : j &lt; k + S v
  ============================
   #(k + v) = #(k + v)

subgoal 2 (ID 3464) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 3 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3464)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  g : j + i &gt; v - 1
  ============================
   #(v - 1) =
   match lt_eq_lt_dec (k + v) j with
   | inleft (left _) =&gt; #(k + v)
   | inleft (right _) =&gt; N ↑ k # i ↑ j
   | inright _ =&gt; #(k + v - 1)
   end

subgoal 2 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3634)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  g : j + i &gt; v - 1
  ============================
   v &lt; v

subgoal 2 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3635)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  g : j + i &gt; v - 1
  ============================
   v &lt; S (j + i)

subgoal 2 (ID 3636) is:
 S (j + i) &lt;= v
subgoal 3 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3645)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; 0
  l0 : S (j + i) &lt;= 0
  g : j + i &gt; 0 - 1
  ============================
   0 &lt; S (j + i)

subgoal 2 (ID 3650) is:
 S v &lt; S (j + i)
subgoal 3 (ID 3636) is:
 S (j + i) &lt;= v
subgoal 4 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 5 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_O"><span class="id" type="abbreviation">lt_n_O</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3650)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  l0 : S (j + i) &lt;= S v
  g : j + i &gt; S v - 1
  ============================
   S v &lt; S (j + i)

subgoal 2 (ID 3636) is:
 S (j + i) &lt;= v
subgoal 3 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3654)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  l0 : S (j + i) &lt;= S v
  g : j + i &gt; pred (S v)
  ============================
   S v &lt; S (j + i)

subgoal 2 (ID 3636) is:
 S (j + i) &lt;= v
subgoal 3 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3655)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  l0 : S (j + i) &lt;= S v
  g : j + i &gt; v
  ============================
   S v &lt; S (j + i)

subgoal 2 (ID 3636) is:
 S (j + i) &lt;= v
subgoal 3 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3636)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  g : j + i &gt; v - 1
  ============================
   S (j + i) &lt;= v

subgoal 2 (ID 3453) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3453)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  ============================
   #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]

subgoal 2 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3668)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  ============================
   (if le_gt_dec (j + i) (v - 1) then #(k + (v - 1)) else #(v - 1)) =
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ k # i ↑ j
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>) (<span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a>1)). </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3677)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v - 1
  ============================
   #(k + (v - 1)) =
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ k # i ↑ j
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 3678) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">j</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3692)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v - 1
  l1 : v &lt; j
  ============================
   #(k + (v - 1)) = #v

subgoal 2 (ID 3693) is:
 #(k + (v - 1)) = N ↑ k # i ↑ j
subgoal 3 (ID 3694) is:
 #(k + (v - 1)) = #(v - 1)
subgoal 4 (ID 3678) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 5 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>); <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3693)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v - 1
  e : v = j
  ============================
   #(k + (v - 1)) = N ↑ k # i ↑ j

subgoal 2 (ID 3694) is:
 #(k + (v - 1)) = #(v - 1)
subgoal 3 (ID 3678) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3704)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; j
  g : S (j + i) &gt; j
  l0 : j + i &lt;= j - 1
  ============================
   #(k + (j - 1)) = N ↑ k # i ↑ j

subgoal 2 (ID 3694) is:
 #(k + (v - 1)) = #(v - 1)
subgoal 3 (ID 3678) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3694)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v - 1
  l1 : j &lt; v
  ============================
   #(k + (v - 1)) = #(v - 1)

subgoal 2 (ID 3678) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3706)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v - 1
  l1 : j &lt; v
  ============================
   v &lt; v

subgoal 2 (ID 3678) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3707)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v - 1
  l1 : j &lt; v
  ============================
   v &lt; S (j + i)

subgoal 2 (ID 3708) is:
 S (j + i) &lt;= v
subgoal 3 (ID 3678) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3708)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v - 1
  l1 : j &lt; v
  ============================
   S (j + i) &lt;= v

subgoal 2 (ID 3678) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3718)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; 0
  g : S (j + i) &gt; 0
  l0 : j + i &lt;= 0 - 1
  l1 : j &lt; 0
  ============================
   S (j + i) &lt;= 0

subgoal 2 (ID 3724) is:
 S (j + i) &lt;= S v
subgoal 3 (ID 3678) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_O"><span class="id" type="abbreviation">lt_n_O</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3724)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  g : S (j + i) &gt; S v
  l0 : j + i &lt;= S v - 1
  l1 : j &lt; S v
  ============================
   S (j + i) &lt;= S v

subgoal 2 (ID 3678) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3728)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  g : S (j + i) &gt; S v
  l0 : j + i &lt;= pred (S v)
  l1 : j &lt; S v
  ============================
   S (j + i) &lt;= S v

subgoal 2 (ID 3678) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3729)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  g : S (j + i) &gt; S v
  l0 : j + i &lt;= v
  l1 : j &lt; S v
  ============================
   S (j + i) &lt;= S v

subgoal 2 (ID 3678) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3678)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  g0 : j + i &gt; v - 1
  ============================
   #(v - 1) =
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ k # i ↑ j
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a>) <span class="id" type="keyword">as</span> [[] | ]. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3755)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  g0 : j + i &gt; v - 1
  l0 : v &lt; j
  ============================
   #(v - 1) = #v

subgoal 2 (ID 3756) is:
 #(v - 1) = N ↑ k # i ↑ j
subgoal 3 (ID 3757) is:
 #(v - 1) = #(v - 1)
subgoal 4 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>); <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3756)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  g0 : j + i &gt; v - 1
  e : v = j
  ============================
   #(v - 1) = N ↑ k # i ↑ j

subgoal 2 (ID 3757) is:
 #(v - 1) = #(v - 1)
subgoal 3 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3767)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; j
  g : S (j + i) &gt; j
  g0 : j + i &gt; j - 1
  ============================
   #(j - 1) = N ↑ k # i ↑ j

subgoal 2 (ID 3757) is:
 #(v - 1) = #(v - 1)
subgoal 3 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>); <span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3757)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  g0 : j + i &gt; v - 1
  l0 : j &lt; v
  ============================
   #(v - 1) = #(v - 1)

subgoal 2 (ID 3195) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 3195)
  
  s : Sorts
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]

subgoal 2 (ID 3199) is:
 (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
 (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 3199)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall (N : Term) (i j k : nat),
         M1 [j ← N] ↑ k # (j + i) = M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM2 : forall (N : Term) (i j k : nat),
         M2 [j ← N] ↑ k # (j + i) = M2 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM3 : forall (N : Term) (i j k : nat),
         M3 [j ← N] ↑ k # (j + i) = M3 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM4 : forall (N : Term) (i j k : nat),
         M4 [j ← N] ↑ k # (j + i) = M4 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   (M1 ·( M2, M3)M4) [j ← N] ↑ k # (j + i) =
   (M1 ·( M2, M3)M4) ↑ k # (S (j + i)) [j ← N ↑ k # i]

subgoal 2 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 3770)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall (N : Term) (i j k : nat),
         M1 [j ← N] ↑ k # (j + i) = M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM2 : forall (N : Term) (i j k : nat),
         M2 [j ← N] ↑ k # (j + i) = M2 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM3 : forall (N : Term) (i j k : nat),
         M3 [j ← N] ↑ k # (j + i) = M3 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM4 : forall (N : Term) (i j k : nat),
         M4 [j ← N] ↑ k # (j + i) = M4 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   M1 [j ← N] ↑ k # (j + i) ·( M2 [j ← N] ↑ k # (j + i),
   M3 [(S j) ← N] ↑ k # (S (j + i)))M4 [j ← N] ↑ k # (j + i) =
   M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
   ·( M2 ↑ k # (S (j + i)) [j ← N ↑ k # i],
   M3 ↑ k # (S (S (j + i))) [(S j) ← N ↑ k # i])
   M4 ↑ k # (S (j + i)) [j ← N ↑ k # i]

subgoal 2 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 3788)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall (N : Term) (i j k : nat),
         M1 [j ← N] ↑ k # (j + i) = M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM2 : forall (N : Term) (i j k : nat),
         M2 [j ← N] ↑ k # (j + i) = M2 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM3 : forall (N : Term) (i j k : nat),
         M3 [j ← N] ↑ k # (j + i) = M3 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM4 : forall (N : Term) (i j k : nat),
         M4 [j ← N] ↑ k # (j + i) = M4 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
   ·( M2 ↑ k # (S (j + i)) [j ← N ↑ k # i], M3 [(S j) ← N] ↑ k # (S (j + i)))
   M4 [j ← N] ↑ k # (j + i) =
   M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
   ·( M2 ↑ k # (S (j + i)) [j ← N ↑ k # i],
   M3 ↑ k # (S (S (j + i))) [(S j) ← N ↑ k # i])
   M4 ↑ k # (S (j + i)) [j ← N ↑ k # i]

subgoal 2 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM4</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 3805)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall (N : Term) (i j k : nat),
         M1 [j ← N] ↑ k # (j + i) = M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM2 : forall (N : Term) (i j k : nat),
         M2 [j ← N] ↑ k # (j + i) = M2 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM3 : forall (N : Term) (i j k : nat),
         M3 [j ← N] ↑ k # (j + i) = M3 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM4 : forall (N : Term) (i j k : nat),
         M4 [j ← N] ↑ k # (j + i) = M4 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
   ·( M2 ↑ k # (S (j + i)) [j ← N ↑ k # i], M3 [(S j) ← N] ↑ k # (S (j + i)))
   M4 ↑ k # (S (j + i)) [j ← N ↑ k # i] =
   M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
   ·( M2 ↑ k # (S (j + i)) [j ← N ↑ k # i],
   M3 ↑ k # (S (S (j + i))) [(S j) ← N ↑ k # i])
   M4 ↑ k # (S (j + i)) [j ← N ↑ k # i]

subgoal 2 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>))) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)+</span></a><span class="id" type="var">i</span>)) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 3825)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall (N : Term) (i j k : nat),
         M1 [j ← N] ↑ k # (j + i) = M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM2 : forall (N : Term) (i j k : nat),
         M2 [j ← N] ↑ k # (j + i) = M2 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM3 : forall (N : Term) (i j k : nat),
         M3 [j ← N] ↑ k # (j + i) = M3 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM4 : forall (N : Term) (i j k : nat),
         M4 [j ← N] ↑ k # (j + i) = M4 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
   ·( M2 ↑ k # (S (j + i)) [j ← N ↑ k # i], M3 [(S j) ← N] ↑ k # (S (j + i)))
   M4 ↑ k # (S (j + i)) [j ← N ↑ k # i] =
   M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
   ·( M2 ↑ k # (S (j + i)) [j ← N ↑ k # i],
   M3 ↑ k # (S (S j + i)) [(S j) ← N ↑ k # i])
   M4 ↑ k # (S (j + i)) [j ← N ↑ k # i]

subgoal 2 (ID 3203) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">IHM3</span> <span class="id" type="var">N</span> <span class="id" type="var">i</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">j</span>)  <span class="id" type="var">k</span> ); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 3203)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j k : nat),
         M1 [j ← N] ↑ k # (j + i) = M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM2 : forall (N : Term) (i j k : nat),
         M2 [j ← N] ↑ k # (j + i) = M2 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   (Π (M1), M2) [j ← N] ↑ k # (j + i) =
   (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]

subgoal 2 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 3831)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j k : nat),
         M1 [j ← N] ↑ k # (j + i) = M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM2 : forall (N : Term) (i j k : nat),
         M2 [j ← N] ↑ k # (j + i) = M2 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   Π (M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]), M2 [(S j) ← N] ↑ k # (S (j + i)) =
   Π (M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]),
   M2 ↑ k # (S (S (j + i))) [(S j) ← N ↑ k # i]

subgoal 2 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>))) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)+</span></a><span class="id" type="var">i</span>)) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 3847)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j k : nat),
         M1 [j ← N] ↑ k # (j + i) = M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM2 : forall (N : Term) (i j k : nat),
         M2 [j ← N] ↑ k # (j + i) = M2 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   Π (M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]), M2 [(S j) ← N] ↑ k # (S (j + i)) =
   Π (M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]),
   M2 ↑ k # (S (S j + i)) [(S j) ← N ↑ k # i]

subgoal 2 (ID 3207) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">IHM2</span> <span class="id" type="var">N</span> <span class="id" type="var">i</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">j</span>)  <span class="id" type="var">k</span> ); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3207)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j k : nat),
         M1 [j ← N] ↑ k # (j + i) = M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM2 : forall (N : Term) (i j k : nat),
         M2 [j ← N] ↑ k # (j + i) = M2 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   (λ [M1], M2) [j ← N] ↑ k # (j + i) =
   (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3853)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j k : nat),
         M1 [j ← N] ↑ k # (j + i) = M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM2 : forall (N : Term) (i j k : nat),
         M2 [j ← N] ↑ k # (j + i) = M2 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   λ [M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]], M2 [(S j) ← N] ↑ k # (S (j + i)) =
   λ [M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]],
   M2 ↑ k # (S (S (j + i))) [(S j) ← N ↑ k # i]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>))) <span class="id" type="keyword">with</span> ((<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)+</span></a><span class="id" type="var">i</span>))) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3869)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j k : nat),
         M1 [j ← N] ↑ k # (j + i) = M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM2 : forall (N : Term) (i j k : nat),
         M2 [j ← N] ↑ k # (j + i) = M2 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   λ [M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]], M2 [(S j) ← N] ↑ k # (S (j + i)) =
   λ [M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]],
   M2 ↑ k # (S (S j + i)) [(S j) ← N ↑ k # i]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">IHM2</span> <span class="id" type="var">N</span> <span class="id" type="var">i</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">j</span>)  <span class="id" type="var">k</span> ); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>substP1 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="term_mod.substP2"><span class="id" type="lemma">substP2</span></a>: <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span> <span class="id" type="var">n</span>, <a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> -&gt;<br>
  <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="term.html#N"><span class="id" type="variable">N</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a> <a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a> .</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3880)
  
  ============================
   forall (M N : Term) (i j n : nat),
   i &lt;= n -&gt; M ↑ j # i [(j + n) ← N] = M [n ← N] ↑ j # i

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intro</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">induction</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3940)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  ============================
   (if le_gt_dec i v then #(j + v) else #v) [(j + n) ← N] =
   match lt_eq_lt_dec v n with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ n
   | inright _ =&gt; #(v - 1)
   end ↑ j # i

subgoal 2 (ID 3941) is:
 !s = !s
subgoal 3 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 4 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 5 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">v</span>); <span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">n</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>10 subgoals, subgoal 1 (ID 3968)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  ============================
   #(j + v) [(j + n) ← N] = #v ↑ j # i

subgoal 2 (ID 3969) is:
 #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 3 (ID 3970) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 5 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 6 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 7 (ID 3941) is:
 !s = !s
subgoal 8 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 9 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 10 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>10 subgoals, subgoal 1 (ID 3987)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = (if le_gt_dec i v then #(j + v) else #v)

subgoal 2 (ID 3969) is:
 #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 3 (ID 3970) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 5 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 6 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 7 (ID 3941) is:
 !s = !s
subgoal 8 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 9 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 10 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">v</span>). </span><div class="output"><pre>11 subgoals, subgoal 1 (ID 3996)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  l1 : i &lt;= v
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #(j + v)

subgoal 2 (ID 3997) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #v
subgoal 3 (ID 3969) is:
 #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3970) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 6 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 7 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 8 (ID 3941) is:
 !s = !s
subgoal 9 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 10 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 11 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>) (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>13 subgoals, subgoal 1 (ID 4011)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  l1 : i &lt;= v
  l2 : j + v &lt; j + n
  ============================
   #(j + v) = #(j + v)

subgoal 2 (ID 4012) is:
 N ↑ (j + n) = #(j + v)
subgoal 3 (ID 4013) is:
 #(j + v - 1) = #(j + v)
subgoal 4 (ID 3997) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #v
subgoal 5 (ID 3969) is:
 #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 6 (ID 3970) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 7 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 8 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 9 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 10 (ID 3941) is:
 !s = !s
subgoal 11 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 12 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 13 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>12 subgoals, subgoal 1 (ID 4012)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  l1 : i &lt;= v
  e : j + v = j + n
  ============================
   N ↑ (j + n) = #(j + v)

subgoal 2 (ID 4013) is:
 #(j + v - 1) = #(j + v)
subgoal 3 (ID 3997) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #v
subgoal 4 (ID 3969) is:
 #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3970) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 7 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 8 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 9 (ID 3941) is:
 !s = !s
subgoal 10 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 11 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 12 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_reg_l"><span class="id" type="lemma">plus_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">e</span>. </span><div class="output"><pre>12 subgoals, subgoal 1 (ID 4016)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  l1 : i &lt;= v
  e : v = n
  ============================
   N ↑ (j + n) = #(j + v)

subgoal 2 (ID 4013) is:
 #(j + v - 1) = #(j + v)
subgoal 3 (ID 3997) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #v
subgoal 4 (ID 3969) is:
 #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3970) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 7 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 8 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 9 (ID 3941) is:
 !s = !s
subgoal 10 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 11 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 12 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>. </span><div class="output"><pre>12 subgoals, subgoal 1 (ID 4023)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  l0 : n &lt; n
  l1 : i &lt;= n
  ============================
   N ↑ (j + n) = #(j + n)

subgoal 2 (ID 4013) is:
 #(j + v - 1) = #(j + v)
subgoal 3 (ID 3997) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #v
subgoal 4 (ID 3969) is:
 #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3970) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 7 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 8 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 9 (ID 3941) is:
 !s = !s
subgoal 10 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 11 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 12 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>11 subgoals, subgoal 1 (ID 4013)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  l1 : i &lt;= v
  l2 : j + n &lt; j + v
  ============================
   #(j + v - 1) = #(j + v)

subgoal 2 (ID 3997) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #v
subgoal 3 (ID 3969) is:
 #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3970) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 6 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 7 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 8 (ID 3941) is:
 !s = !s
subgoal 9 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 10 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 11 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_lt_reg_l"><span class="id" type="lemma">plus_lt_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l2</span>. </span><div class="output"><pre>11 subgoals, subgoal 1 (ID 4026)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  l1 : i &lt;= v
  l2 : n &lt; v
  ============================
   #(j + v - 1) = #(j + v)

subgoal 2 (ID 3997) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #v
subgoal 3 (ID 3969) is:
 #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3970) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 6 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 7 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 8 (ID 3941) is:
 !s = !s
subgoal 9 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 10 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 11 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_asym"><span class="id" type="lemma">lt_asym</span></a> <span class="id" type="var">v</span> <span class="id" type="var">n</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>10 subgoals, subgoal 1 (ID 3997)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  g : i &gt; v
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #v

subgoal 2 (ID 3969) is:
 #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 3 (ID 3970) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 5 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 6 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 7 (ID 3941) is:
 !s = !s
subgoal 8 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 9 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 10 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 4029)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  g : i &gt; v
  ============================
   i &lt; i

subgoal 2 (ID 3969) is:
 #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 3 (ID 3970) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 5 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 6 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 7 (ID 3941) is:
 !s = !s
subgoal 8 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 9 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 10 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 3969)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  e : v = n
  ============================
   #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i

subgoal 2 (ID 3970) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 3 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 4 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3941) is:
 !s = !s
subgoal 7 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 8 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 9 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>.</span><div class="output"><pre>9 subgoals, subgoal 1 (ID 4036)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  ============================
   #(j + n) [(j + n) ← N] = N ↑ n ↑ j # i

subgoal 2 (ID 3970) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 3 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 4 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3941) is:
 !s = !s
subgoal 7 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 8 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 9 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>9 subgoals, subgoal 1 (ID 4037)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  ============================
   match lt_eq_lt_dec (j + n) (j + n) with
   | inleft (left _) =&gt; #(j + n)
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(j + n - 1)
   end = N ↑ n ↑ j # i

subgoal 2 (ID 3970) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 3 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 4 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3941) is:
 !s = !s
subgoal 7 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 8 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 9 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>) (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>11 subgoals, subgoal 1 (ID 4051)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  l0 : j + n &lt; j + n
  ============================
   #(j + n) = N ↑ n ↑ j # i

subgoal 2 (ID 4052) is:
 N ↑ (j + n) = N ↑ n ↑ j # i
subgoal 3 (ID 4053) is:
 #(j + n - 1) = N ↑ n ↑ j # i
subgoal 4 (ID 3970) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 6 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 7 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 8 (ID 3941) is:
 !s = !s
subgoal 9 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 10 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 11 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l0</span>.</span><div class="output"><pre>10 subgoals, subgoal 1 (ID 4052)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  e : j + n = j + n
  ============================
   N ↑ (j + n) = N ↑ n ↑ j # i

subgoal 2 (ID 4053) is:
 #(j + n - 1) = N ↑ n ↑ j # i
subgoal 3 (ID 3970) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 5 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 6 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 7 (ID 3941) is:
 !s = !s
subgoal 8 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 9 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 10 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">symmetry</span>.</span><div class="output"><pre>10 subgoals, subgoal 1 (ID 4057)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  e : j + n = j + n
  ============================
   N ↑ n ↑ j # i = N ↑ (j + n)

subgoal 2 (ID 4053) is:
 #(j + n - 1) = N ↑ n ↑ j # i
subgoal 3 (ID 3970) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 5 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 6 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 7 (ID 3941) is:
 !s = !s
subgoal 8 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 9 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 10 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="term.html#term_mod.liftP3"><span class="id" type="lemma">liftP3</span></a>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>9 subgoals, subgoal 1 (ID 4053)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  l0 : j + n &lt; j + n
  ============================
   #(j + n - 1) = N ↑ n ↑ j # i

subgoal 2 (ID 3970) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 3 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 4 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3941) is:
 !s = !s
subgoal 7 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 8 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 9 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l0</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3970)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  ============================
   #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i

subgoal 2 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 3 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3941) is:
 !s = !s
subgoal 6 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 7 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 4070)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = (if le_gt_dec i (v - 1) then #(j + (v - 1)) else #(v - 1))

subgoal 2 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 3 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3941) is:
 !s = !s
subgoal 6 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 7 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">i</span> (<span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a>1)). </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 4079)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  l1 : i &lt;= v - 1
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #(j + (v - 1))

subgoal 2 (ID 4080) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 3 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 4 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3941) is:
 !s = !s
subgoal 7 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 8 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 9 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>) (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>))<span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>11 subgoals, subgoal 1 (ID 4094)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  l1 : i &lt;= v - 1
  l2 : j + v &lt; j + n
  ============================
   #(j + v) = #(j + (v - 1))

subgoal 2 (ID 4095) is:
 N ↑ (j + n) = #(j + (v - 1))
subgoal 3 (ID 4096) is:
 #(j + v - 1) = #(j + (v - 1))
subgoal 4 (ID 4080) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 5 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 6 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 7 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 8 (ID 3941) is:
 !s = !s
subgoal 9 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 10 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 11 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_lt_reg_l"><span class="id" type="lemma">plus_lt_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l2</span>. </span><div class="output"><pre>11 subgoals, subgoal 1 (ID 4098)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  l1 : i &lt;= v - 1
  l2 : v &lt; n
  ============================
   #(j + v) = #(j + (v - 1))

subgoal 2 (ID 4095) is:
 N ↑ (j + n) = #(j + (v - 1))
subgoal 3 (ID 4096) is:
 #(j + v - 1) = #(j + (v - 1))
subgoal 4 (ID 4080) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 5 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 6 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 7 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 8 (ID 3941) is:
 !s = !s
subgoal 9 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 10 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 11 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_asym"><span class="id" type="lemma">lt_asym</span></a>  <span class="id" type="var">v</span> <span class="id" type="var">n</span> ); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>10 subgoals, subgoal 1 (ID 4095)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  l1 : i &lt;= v - 1
  e : j + v = j + n
  ============================
   N ↑ (j + n) = #(j + (v - 1))

subgoal 2 (ID 4096) is:
 #(j + v - 1) = #(j + (v - 1))
subgoal 3 (ID 4080) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 4 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 5 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 6 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 7 (ID 3941) is:
 !s = !s
subgoal 8 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 9 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 10 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_reg_l"><span class="id" type="lemma">plus_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">e</span>; <span class="id" type="tactic">subst</span>. </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 4109)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  l0 : n &lt; n
  l1 : i &lt;= n - 1
  ============================
   N ↑ (j + n) = #(j + (n - 1))

subgoal 2 (ID 4096) is:
 #(j + v - 1) = #(j + (v - 1))
subgoal 3 (ID 4080) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 4 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 5 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 6 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 7 (ID 3941) is:
 !s = !s
subgoal 8 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 9 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 10 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>9 subgoals, subgoal 1 (ID 4096)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  l1 : i &lt;= v - 1
  l2 : j + n &lt; j + v
  ============================
   #(j + v - 1) = #(j + (v - 1))

subgoal 2 (ID 4080) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 3 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 4 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3941) is:
 !s = !s
subgoal 7 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 8 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 9 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 4120)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= 0
  l0 : n &lt; 0
  l1 : i &lt;= 0 - 1
  l2 : j + n &lt; j + 0
  ============================
   #(j + 0 - 1) = #(j + (0 - 1))

subgoal 2 (ID 4126) is:
 #(j + S v - 1) = #(j + (S v - 1))
subgoal 3 (ID 4080) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 4 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 5 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 6 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 7 (ID 3941) is:
 !s = !s
subgoal 8 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 9 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 10 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_O"><span class="id" type="abbreviation">lt_n_O</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l0</span>. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 4126)
  
  v : nat
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= S v
  l0 : n &lt; S v
  l1 : i &lt;= S v - 1
  l2 : j + n &lt; j + S v
  ============================
   #(j + S v - 1) = #(j + (S v - 1))

subgoal 2 (ID 4080) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 3 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 4 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3941) is:
 !s = !s
subgoal 7 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 8 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 9 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- 2! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a>. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 4130)
  
  v : nat
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= S v
  l0 : n &lt; S v
  l1 : i &lt;= S v - 1
  l2 : j + n &lt; j + S v
  ============================
   #(pred (j + S v)) = #(j + pred (S v))

subgoal 2 (ID 4080) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 3 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 4 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3941) is:
 !s = !s
subgoal 7 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 8 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 9 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">replace</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">v</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>)) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>9 subgoals, subgoal 1 (ID 4134)
  
  v : nat
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= S v
  l0 : n &lt; S v
  l1 : i &lt;= S v - 1
  l2 : j + n &lt; j + S v
  ============================
   #(pred (S (j + v))) = #(j + pred (S v))

subgoal 2 (ID 4080) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 3 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 4 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3941) is:
 !s = !s
subgoal 7 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 8 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 9 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 4150)
  
  v : nat
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= S v
  l0 : n &lt; S v
  l1 : i &lt;= S v - 1
  l2 : j + n &lt; j + S v
  ============================
   #(j + v) = #(j + v)

subgoal 2 (ID 4080) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 3 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 4 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3941) is:
 !s = !s
subgoal 7 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 8 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 9 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 4080)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  g : i &gt; v - 1
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #(v - 1)

subgoal 2 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 3 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3941) is:
 !s = !s
subgoal 6 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 7 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#gt"><span class="id" type="definition">gt</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 4151)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  g : v - 1 &lt; i
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #(v - 1)

subgoal 2 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 3 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3941) is:
 !s = !s
subgoal 6 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 7 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#lt"><span class="id" type="definition">lt</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 4152)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  g : S (v - 1) &lt;= i
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #(v - 1)

subgoal 2 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 3 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3941) is:
 !s = !s
subgoal 6 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 7 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 4154)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  g : S (pred v) &lt;= i
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #(v - 1)

subgoal 2 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 3 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3941) is:
 !s = !s
subgoal 6 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 7 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#S_pred"><span class="id" type="lemma">S_pred</span></a>  <span class="id" type="var">v</span> <span class="id" type="var">n</span> <span class="id" type="var">l0</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 4156)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  g : v &lt;= i
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #(v - 1)

subgoal 2 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 3 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3941) is:
 !s = !s
subgoal 6 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 7 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 4157)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  g : v &lt;= i
  ============================
   n &lt; n

subgoal 2 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 3 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3941) is:
 !s = !s
subgoal 6 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 7 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 4159)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  g : v &lt;= i
  ============================
   v &lt;= n

subgoal 2 (ID 3984) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 3 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3941) is:
 !s = !s
subgoal 6 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 7 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Le.html#le_trans"><span class="id" type="lemma">le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3984)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  ============================
   #v [(j + n) ← N] = #v ↑ j # i

subgoal 2 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 3 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3941) is:
 !s = !s
subgoal 5 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 6 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 7 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 4162)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  ============================
   match lt_eq_lt_dec v (j + n) with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(v - 1)
   end = (if le_gt_dec i v then #(j + v) else #v)

subgoal 2 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 3 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3941) is:
 !s = !s
subgoal 5 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 6 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 7 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">v</span>). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 4171)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  l0 : i &lt;= v
  ============================
   match lt_eq_lt_dec v (j + n) with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(v - 1)
   end = #(j + v)

subgoal 2 (ID 4172) is:
 match lt_eq_lt_dec v (j + n) with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(v - 1)
 end = #v
subgoal 3 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3941) is:
 !s = !s
subgoal 6 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 7 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 4173)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  l0 : i &lt;= v
  ============================
   i &lt; i

subgoal 2 (ID 4172) is:
 match lt_eq_lt_dec v (j + n) with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(v - 1)
 end = #v
subgoal 3 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3941) is:
 !s = !s
subgoal 6 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 7 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 4172)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  g0 : i &gt; v
  ============================
   match lt_eq_lt_dec v (j + n) with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(v - 1)
   end = #v

subgoal 2 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 3 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3941) is:
 !s = !s
subgoal 5 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 6 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 7 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)) <span class="id" type="keyword">as</span> [[] | ]. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 4189)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  g0 : i &gt; v
  l0 : v &lt; j + n
  ============================
   #v = #v

subgoal 2 (ID 4190) is:
 N ↑ (j + n) = #v
subgoal 3 (ID 4191) is:
 #(v - 1) = #v
subgoal 4 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3941) is:
 !s = !s
subgoal 7 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 8 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 9 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 4190)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  g0 : i &gt; v
  e : v = j + n
  ============================
   N ↑ (j + n) = #v

subgoal 2 (ID 4191) is:
 #(v - 1) = #v
subgoal 3 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3941) is:
 !s = !s
subgoal 6 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 7 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 4199)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; j + n
  l : j + n &lt; n
  g0 : i &gt; j + n
  ============================
   N ↑ (j + n) = #(j + n)

subgoal 2 (ID 4191) is:
 #(v - 1) = #v
subgoal 3 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3941) is:
 !s = !s
subgoal 6 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 7 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 4200)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; j + n
  l : j + n &lt; n
  g0 : i &gt; j + n
  ============================
   n &lt; n

subgoal 2 (ID 4191) is:
 #(v - 1) = #v
subgoal 3 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3941) is:
 !s = !s
subgoal 6 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 7 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 4191)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  g0 : i &gt; v
  l0 : j + n &lt; v
  ============================
   #(v - 1) = #v

subgoal 2 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 3 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3941) is:
 !s = !s
subgoal 5 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 6 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 7 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 4212)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  g0 : i &gt; v
  l0 : j + n &lt; v
  ============================
   n &lt; n

subgoal 2 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 3 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3941) is:
 !s = !s
subgoal 5 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 6 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 7 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 4213)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  g0 : i &gt; v
  l0 : j + n &lt; v
  ============================
   n &lt; v

subgoal 2 (ID 4214) is:
 v &lt; n
subgoal 3 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3941) is:
 !s = !s
subgoal 6 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 7 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>); <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 4214)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  g0 : i &gt; v
  l0 : j + n &lt; v
  ============================
   v &lt; n

subgoal 2 (ID 3985) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 3 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3941) is:
 !s = !s
subgoal 5 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 6 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 7 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3985)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  e : v = n
  ============================
   #v [(j + n) ← N] = N ↑ n ↑ j # i

subgoal 2 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 3 (ID 3941) is:
 !s = !s
subgoal 4 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 5 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 6 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 4228)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  e : v = n
  ============================
   match lt_eq_lt_dec v (j + n) with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(v - 1)
   end = N ↑ n ↑ j # i

subgoal 2 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 3 (ID 3941) is:
 !s = !s
subgoal 4 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 5 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 6 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 4233)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; n
  ============================
   match lt_eq_lt_dec n (j + n) with
   | inleft (left _) =&gt; #n
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(n - 1)
   end = N ↑ n ↑ j # i

subgoal 2 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 3 (ID 3941) is:
 !s = !s
subgoal 4 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 5 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 6 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>). </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 4234)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; n
  ============================
   n &lt; n

subgoal 2 (ID 3986) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 3 (ID 3941) is:
 !s = !s
subgoal 4 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 5 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 6 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3986)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt; v
  ============================
   #v [(j + n) ← N] = #(v - 1) ↑ j # i

subgoal 2 (ID 3941) is:
 !s = !s
subgoal 3 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 4 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 5 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 4237)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt; v
  ============================
   match lt_eq_lt_dec v (j + n) with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(v - 1)
   end = (if le_gt_dec i (v - 1) then #(j + (v - 1)) else #(v - 1))

subgoal 2 (ID 3941) is:
 !s = !s
subgoal 3 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 4 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 5 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>). </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 4238)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt; v
  ============================
   n &lt; n

subgoal 2 (ID 3941) is:
 !s = !s
subgoal 3 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 4 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 5 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 4240)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt; v
  ============================
   v &lt;= n

subgoal 2 (ID 3941) is:
 !s = !s
subgoal 3 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 4 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 5 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Le.html#le_trans"><span class="id" type="lemma">le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 3941)
  
  s : Sorts
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  ============================
   !s = !s

subgoal 2 (ID 3942) is:
 M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
 M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
 M4 [n ← N] ↑ j # i
subgoal 3 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 4 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 3942)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M1 ↑ j # i [(j + n) ← N] = M1 [n ← N] ↑ j # i
  IHM2 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M2 ↑ j # i [(j + n) ← N] = M2 [n ← N] ↑ j # i
  IHM3 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M3 ↑ j # i [(j + n) ← N] = M3 [n ← N] ↑ j # i
  IHM4 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M4 ↑ j # i [(j + n) ← N] = M4 [n ← N] ↑ j # i
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  ============================
   M1 ↑ j # i [(j + n) ← N] ·( M2 ↑ j # i [(j + n) ← N],
   M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
   M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
   M4 [n ← N] ↑ j # i

subgoal 2 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 3 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 4273)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M1 ↑ j # i [(j + n) ← N] = M1 [n ← N] ↑ j # i
  IHM2 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M2 ↑ j # i [(j + n) ← N] = M2 [n ← N] ↑ j # i
  IHM3 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M3 ↑ j # i [(j + n) ← N] = M3 [n ← N] ↑ j # i
  IHM4 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M4 ↑ j # i [(j + n) ← N] = M4 [n ← N] ↑ j # i
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  ============================
   M1 [n ← N] ↑ j # i ·( M2 ↑ j # i [(j + n) ← N],
   M3 ↑ j # (S i) [(S (j + n)) ← N])M4 ↑ j # i [(j + n) ← N] =
   M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
   M4 [n ← N] ↑ j # i

subgoal 2 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 3 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)) <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 4295)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M1 ↑ j # i [(j + n) ← N] = M1 [n ← N] ↑ j # i
  IHM2 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M2 ↑ j # i [(j + n) ← N] = M2 [n ← N] ↑ j # i
  IHM3 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M3 ↑ j # i [(j + n) ← N] = M3 [n ← N] ↑ j # i
  IHM4 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M4 ↑ j # i [(j + n) ← N] = M4 [n ← N] ↑ j # i
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  ============================
   M1 [n ← N] ↑ j # i ·( M2 ↑ j # i [(j + n) ← N],
   M3 ↑ j # (S i) [(j + S n) ← N])M4 ↑ j # i [(j + n) ← N] =
   M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
   M4 [n ← N] ↑ j # i

subgoal 2 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 3 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM3</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 4316)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M1 ↑ j # i [(j + n) ← N] = M1 [n ← N] ↑ j # i
  IHM2 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M2 ↑ j # i [(j + n) ← N] = M2 [n ← N] ↑ j # i
  IHM3 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M3 ↑ j # i [(j + n) ← N] = M3 [n ← N] ↑ j # i
  IHM4 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M4 ↑ j # i [(j + n) ← N] = M4 [n ← N] ↑ j # i
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  ============================
   M1 [n ← N] ↑ j # i ·( M2 ↑ j # i [(j + n) ← N],
   M3 [(S n) ← N] ↑ j # (S i))M4 ↑ j # i [(j + n) ← N] =
   M1 [n ← N] ↑ j # i ·( M2 [n ← N] ↑ j # i, M3 [(S n) ← N] ↑ j # (S i))
   M4 [n ← N] ↑ j # i

subgoal 2 (ID 3943) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 3 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>; <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM4</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 3943)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M1 ↑ j # i [(j + n) ← N] = M1 [n ← N] ↑ j # i
  IHM2 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M2 ↑ j # i [(j + n) ← N] = M2 [n ← N] ↑ j # i
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  ============================
   Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
   Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)

subgoal 2 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)) <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 4376)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M1 ↑ j # i [(j + n) ← N] = M1 [n ← N] ↑ j # i
  IHM2 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M2 ↑ j # i [(j + n) ← N] = M2 [n ← N] ↑ j # i
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  ============================
   Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(j + S n) ← N] =
   Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)

subgoal 2 (ID 3944) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>;<br>
<span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">IHM2</span> <span class="id" type="var">N</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>) <span class="id" type="var">j</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3944)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M1 ↑ j # i [(j + n) ← N] = M1 [n ← N] ↑ j # i
  IHM2 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M2 ↑ j # i [(j + n) ← N] = M2 [n ← N] ↑ j # i
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  ============================
   λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
   λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)) <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 4426)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M1 ↑ j # i [(j + n) ← N] = M1 [n ← N] ↑ j # i
  IHM2 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M2 ↑ j # i [(j + n) ← N] = M2 [n ← N] ↑ j # i
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  ============================
   λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(j + S n) ← N] =
   λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>;<br>
<span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">IHM2</span> <span class="id" type="var">N</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>) <span class="id" type="var">j</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>substP2 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="term_mod.substP3"><span class="id" type="lemma">substP3</span></a>: <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">i</span>  <span class="id" type="var">k</span> <span class="id" type="var">n</span>, <a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="term.html#k"><span class="id" type="variable">k</span></a> -&gt; <a class="idref" href="term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> -&gt;<br>
  <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 4479)
  
  ============================
   forall (M N : Term) (i k n : nat),
   i &lt;= k -&gt; k &lt;= i + n -&gt; M ↑ (S n) # i [k ← N] = M ↑ n # i

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intro</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">induction</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 4544)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   (if le_gt_dec i v then #(S (n + v)) else #v) [k ← N] =
   (if le_gt_dec i v then #(n + v) else #v)

subgoal 2 (ID 4545) is:
 !s = !s
subgoal 3 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 4 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 5 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">v</span>).</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 4557)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  ============================
   #(S (n + v)) [k ← N] = #(n + v)

subgoal 2 (ID 4558) is:
 #v [k ← N] = #v
subgoal 3 (ID 4545) is:
 !s = !s
subgoal 4 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 5 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 6 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">unfold</span> <a class="idref" href="term.html#term_mod.subst_rec"><span class="id" type="definition">subst_rec</span></a>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 4559)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  ============================
   match lt_eq_lt_dec (S (n + v)) k with
   | inleft (left _) =&gt; #(S (n + v))
   | inleft (right _) =&gt; N ↑ k
   | inright _ =&gt; #(S (n + v) - 1)
   end = #(n + v)

subgoal 2 (ID 4558) is:
 #v [k ← N] = #v
subgoal 3 (ID 4545) is:
 !s = !s
subgoal 4 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 5 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 6 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>)) <span class="id" type="var">k</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 4573)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : S (n + v) &lt; k
  ============================
   #(S (n + v)) = #(n + v)

subgoal 2 (ID 4574) is:
 N ↑ k = #(n + v)
subgoal 3 (ID 4575) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 4 (ID 4558) is:
 #v [k ← N] = #v
subgoal 5 (ID 4545) is:
 !s = !s
subgoal 6 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 7 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 8 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 4576)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : S (n + v) &lt; k
  ============================
   i + n &lt; i + n

subgoal 2 (ID 4574) is:
 N ↑ k = #(n + v)
subgoal 3 (ID 4575) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 4 (ID 4558) is:
 #v [k ← N] = #v
subgoal 5 (ID 4545) is:
 !s = !s
subgoal 6 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 7 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 8 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">k</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 4577)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : S (n + v) &lt; k
  ============================
   i + n &lt; k

subgoal 2 (ID 4574) is:
 N ↑ k = #(n + v)
subgoal 3 (ID 4575) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 4 (ID 4558) is:
 #v [k ← N] = #v
subgoal 5 (ID 4545) is:
 !s = !s
subgoal 6 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 7 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 8 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>). </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 4635)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : S (n + v) &lt; k
  ============================
   i + n &lt;= v + n

subgoal 2 (ID 4636) is:
 v + n &lt; k
subgoal 3 (ID 4574) is:
 N ↑ k = #(n + v)
subgoal 4 (ID 4575) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 5 (ID 4558) is:
 #v [k ← N] = #v
subgoal 6 (ID 4545) is:
 !s = !s
subgoal 7 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 8 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 9 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 4636)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : S (n + v) &lt; k
  ============================
   v + n &lt; k

subgoal 2 (ID 4574) is:
 N ↑ k = #(n + v)
subgoal 3 (ID 4575) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 4 (ID 4558) is:
 #v [k ← N] = #v
subgoal 5 (ID 4545) is:
 !s = !s
subgoal 6 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 7 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 8 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 4574)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  e : S (n + v) = k
  ============================
   N ↑ k = #(n + v)

subgoal 2 (ID 4575) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 3 (ID 4558) is:
 #v [k ← N] = #v
subgoal 4 (ID 4545) is:
 !s = !s
subgoal 5 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 6 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 7 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 4684)
  
  v : Vars
  N : Term
  i : nat
  n : nat
  l : i &lt;= v
  H : i &lt;= S (n + v)
  H0 : S (n + v) &lt;= i + n
  ============================
   N ↑ (S (n + v)) = #(n + v)

subgoal 2 (ID 4575) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 3 (ID 4558) is:
 #v [k ← N] = #v
subgoal 4 (ID 4545) is:
 !s = !s
subgoal 5 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 6 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 7 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">replace</span> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>) <span class="id" type="keyword">with</span> (<span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H0</span> <span class="id" type="tactic">by</span> (<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a>) . </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 4689)
  
  v : Vars
  N : Term
  i : nat
  n : nat
  l : i &lt;= v
  H : i &lt;= S (n + v)
  H0 : S (n + v) &lt;= n + i
  ============================
   N ↑ (S (n + v)) = #(n + v)

subgoal 2 (ID 4575) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 3 (ID 4558) is:
 #v [k ← N] = #v
subgoal 4 (ID 4545) is:
 !s = !s
subgoal 5 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 6 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 7 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>)) <span class="id" type="keyword">with</span> (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">v</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H0</span> <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 4695)
  
  v : Vars
  N : Term
  i : nat
  n : nat
  l : i &lt;= v
  H : i &lt;= S (n + v)
  H0 : n + S v &lt;= n + i
  ============================
   N ↑ (S (n + v)) = #(n + v)

subgoal 2 (ID 4575) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 3 (ID 4558) is:
 #v [k ← N] = #v
subgoal 4 (ID 4545) is:
 !s = !s
subgoal 5 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 6 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 7 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_le_reg_l"><span class="id" type="lemma">plus_le_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H0</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 4711)
  
  v : Vars
  N : Term
  i : nat
  n : nat
  l : i &lt;= v
  H : i &lt;= S (n + v)
  H0 : S v &lt;= i
  ============================
   N ↑ (S (n + v)) = #(n + v)

subgoal 2 (ID 4575) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 3 (ID 4558) is:
 #v [k ← N] = #v
subgoal 4 (ID 4545) is:
 !s = !s
subgoal 5 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 6 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 7 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 4712)
  
  v : Vars
  N : Term
  i : nat
  n : nat
  l : i &lt;= v
  H : i &lt;= S (n + v)
  H0 : S v &lt;= i
  ============================
   i &lt; i

subgoal 2 (ID 4575) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 3 (ID 4558) is:
 #v [k ← N] = #v
subgoal 4 (ID 4545) is:
 !s = !s
subgoal 5 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 6 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 7 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 4575)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : k &lt; S (n + v)
  ============================
   #(S (n + v) - 1) = #(n + v)

subgoal 2 (ID 4558) is:
 #v [k ← N] = #v
subgoal 3 (ID 4545) is:
 !s = !s
subgoal 4 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 5 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 6 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 4715)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : k &lt; S (n + v)
  ============================
   #(n + v - 0) = #(n + v)

subgoal 2 (ID 4558) is:
 #v [k ← N] = #v
subgoal 3 (ID 4545) is:
 !s = !s
subgoal 4 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 5 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 6 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#minus_n_O"><span class="id" type="lemma">minus_n_O</span></a>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 4716)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : k &lt; S (n + v)
  ============================
   #(n + v) = #(n + v)

subgoal 2 (ID 4558) is:
 #v [k ← N] = #v
subgoal 3 (ID 4545) is:
 !s = !s
subgoal 4 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 5 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 6 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 4558)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  ============================
   #v [k ← N] = #v

subgoal 2 (ID 4545) is:
 !s = !s
subgoal 3 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 4 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 5 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 4717)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  ============================
   match lt_eq_lt_dec v k with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ k
   | inright _ =&gt; #(v - 1)
   end = #v

subgoal 2 (ID 4545) is:
 !s = !s
subgoal 3 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 4 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 5 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">k</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 4731)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : v &lt; k
  ============================
   #v = #v

subgoal 2 (ID 4732) is:
 N ↑ k = #v
subgoal 3 (ID 4733) is:
 #(v - 1) = #v
subgoal 4 (ID 4545) is:
 !s = !s
subgoal 5 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 6 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 7 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">reflexivity</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 4732)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  e : v = k
  ============================
   N ↑ k = #v

subgoal 2 (ID 4733) is:
 #(v - 1) = #v
subgoal 3 (ID 4545) is:
 !s = !s
subgoal 4 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 5 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 6 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 4739)
  
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; k
  ============================
   N ↑ k = #k

subgoal 2 (ID 4733) is:
 #(v - 1) = #v
subgoal 3 (ID 4545) is:
 !s = !s
subgoal 4 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 5 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 6 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 4740)
  
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; k
  ============================
   i &lt; i

subgoal 2 (ID 4733) is:
 #(v - 1) = #v
subgoal 3 (ID 4545) is:
 !s = !s
subgoal 4 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 5 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 6 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">k</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 4733)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt; v
  ============================
   #(v - 1) = #v

subgoal 2 (ID 4545) is:
 !s = !s
subgoal 3 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 4 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 5 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">k</span>). </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 4743)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt; v
  ============================
   k &lt; k

subgoal 2 (ID 4545) is:
 !s = !s
subgoal 3 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 4 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 5 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 4745)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt; v
  ============================
   v &lt; k

subgoal 2 (ID 4545) is:
 !s = !s
subgoal 3 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 4 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 5 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 4545)
  
  s : Sorts
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   !s = !s

subgoal 2 (ID 4546) is:
 M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
 M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
 M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i
subgoal 3 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 4 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 4546)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ (S n) # i [k ← N] = M1 ↑ n # i
  IHM2 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ (S n) # i [k ← N] = M2 ↑ n # i
  IHM3 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M3 ↑ (S n) # i [k ← N] = M3 ↑ n # i
  IHM4 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M4 ↑ (S n) # i [k ← N] = M4 ↑ n # i
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   M1 ↑ (S n) # i [k ← N] ·( M2 ↑ (S n) # i [k ← N],
   M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ (S n) # i [k ← N] =
   M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i

subgoal 2 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 3 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM4</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 4770)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ (S n) # i [k ← N] = M1 ↑ n # i
  IHM2 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ (S n) # i [k ← N] = M2 ↑ n # i
  IHM3 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M3 ↑ (S n) # i [k ← N] = M3 ↑ n # i
  IHM4 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M4 ↑ (S n) # i [k ← N] = M4 ↑ n # i
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   M1 ↑ n # i ·( M2 ↑ (S n) # i [k ← N], M3 ↑ (S n) # (S i) [(S k) ← N])
   M4 ↑ n # i = M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i

subgoal 2 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 3 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 4791)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ (S n) # i [k ← N] = M1 ↑ n # i
  IHM2 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ (S n) # i [k ← N] = M2 ↑ n # i
  IHM3 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M3 ↑ (S n) # i [k ← N] = M3 ↑ n # i
  IHM4 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M4 ↑ (S n) # i [k ← N] = M4 ↑ n # i
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ n # i =
   M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i

subgoal 2 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 3 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <span class="id" type="var">n</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)). </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 4813)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ (S n) # i [k ← N] = M1 ↑ n # i
  IHM2 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ (S n) # i [k ← N] = M2 ↑ n # i
  IHM3 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M3 ↑ (S n) # i [k ← N] = M3 ↑ n # i
  IHM4 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M4 ↑ (S n) # i [k ← N] = M4 ↑ n # i
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ (S n) # (S i) [(S k) ← N])M4 ↑ n # i =
   M1 ↑ n # i ·( M2 ↑ n # i, M3 ↑ n # (S i))M4 ↑ n # i

subgoal 2 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 3 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM3</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 4816)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ (S n) # i [k ← N] = M1 ↑ n # i
  IHM2 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ (S n) # i [k ← N] = M2 ↑ n # i
  IHM3 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M3 ↑ (S n) # i [k ← N] = M3 ↑ n # i
  IHM4 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M4 ↑ (S n) # i [k ← N] = M4 ↑ n # i
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   S k &lt;= S i + n

subgoal 2 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 3 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <span class="id" type="var">n</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)). </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 5027)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ (S n) # i [k ← N] = M1 ↑ n # i
  IHM2 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ (S n) # i [k ← N] = M2 ↑ n # i
  IHM3 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M3 ↑ (S n) # i [k ← N] = M3 ↑ n # i
  IHM4 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M4 ↑ (S n) # i [k ← N] = M4 ↑ n # i
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   S k &lt;= S (i + n)

subgoal 2 (ID 4547) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 3 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 4547)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ (S n) # i [k ← N] = M1 ↑ n # i
  IHM2 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ (S n) # i [k ← N] = M2 ↑ n # i
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
   Π (M1 ↑ n # i), M2 ↑ n # (S i)

subgoal 2 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">IHM2</span> <span class="id" type="var">N</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>) (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">k</span>) <span class="id" type="var">n</span>); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 5064)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ (S n) # i [k ← N] = M1 ↑ n # i
  IHM2 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ (S n) # i [k ← N] = M2 ↑ n # i
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   S k &lt;= S i + n

subgoal 2 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <span class="id" type="var">n</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)). </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 5267)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ (S n) # i [k ← N] = M1 ↑ n # i
  IHM2 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ (S n) # i [k ← N] = M2 ↑ n # i
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   S k &lt;= S (i + n)

subgoal 2 (ID 4548) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 4548)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ (S n) # i [k ← N] = M1 ↑ n # i
  IHM2 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ (S n) # i [k ← N] = M2 ↑ n # i
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
   λ [M1 ↑ n # i], M2 ↑ n # (S i)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">IHM2</span> <span class="id" type="var">N</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>) (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">k</span>) <span class="id" type="var">n</span>); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 5300)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ (S n) # i [k ← N] = M1 ↑ n # i
  IHM2 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ (S n) # i [k ← N] = M2 ↑ n # i
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   S k &lt;= S i + n

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <span class="id" type="var">n</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)). </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 5503)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ (S n) # i [k ← N] = M1 ↑ n # i
  IHM2 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ (S n) # i [k ← N] = M2 ↑ n # i
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   S k &lt;= S (i + n)

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>substP3 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="term_mod.substP4"><span class="id" type="lemma">substP4</span></a>: <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">P</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span>, <br>
   <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">])</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="term.html#j"><span class="id" type="variable">j</span></a>) <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">])</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]]</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 5523)
  
  ============================
   forall (M N P : Term) (i j : nat),
   M [i ← N] [(i + j) ← P] = M [(S (i + j)) ← P] [i ← N [j ← P]]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intro</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">induction</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 5578)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  ============================
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ i
   | inright _ =&gt; #(v - 1)
   end [(i + j) ← P] =
   match lt_eq_lt_dec v (S (i + j)) with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; P ↑ (S (i + j))
   | inright _ =&gt; #(v - 1)
   end [i ← N [j ← P]]

subgoal 2 (ID 5579) is:
 !s = !s
subgoal 3 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 4 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 5 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">i</span>) <span class="id" type="keyword">as</span> [[] | ] ; <span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>))) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>13 subgoals, subgoal 1 (ID 5612)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  ============================
   #v [(i + j) ← P] = #v [i ← N [j ← P]]

subgoal 2 (ID 5613) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 5614) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 5628) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 5 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 8 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 9 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 10 (ID 5579) is:
 !s = !s
subgoal 11 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 12 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 13 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>13 subgoals, subgoal 1 (ID 5647)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  ============================
   match lt_eq_lt_dec v (i + j) with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; P ↑ (i + j)
   | inright _ =&gt; #(v - 1)
   end =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 5613) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 5614) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 5628) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 5 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 8 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 9 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 10 (ID 5579) is:
 !s = !s
subgoal 11 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 12 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 13 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) <span class="id" type="keyword">as</span> [[] | ]. </span><div class="output"><pre>15 subgoals, subgoal 1 (ID 5661)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : v &lt; i + j
  ============================
   #v =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 5662) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 5663) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 5613) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 5614) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 5628) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 7 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 8 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 9 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 10 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 11 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 12 (ID 5579) is:
 !s = !s
subgoal 13 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 14 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 15 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">i</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>17 subgoals, subgoal 1 (ID 5677)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : v &lt; i + j
  l2 : v &lt; i
  ============================
   #v = #v

subgoal 2 (ID 5678) is:
 #v = N [j ← P] ↑ i
subgoal 3 (ID 5679) is:
 #v = #(v - 1)
subgoal 4 (ID 5662) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 5 (ID 5663) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 6 (ID 5613) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 7 (ID 5614) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 8 (ID 5628) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 9 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 10 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 11 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 12 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 13 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 14 (ID 5579) is:
 !s = !s
subgoal 15 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 16 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 17 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>16 subgoals, subgoal 1 (ID 5678)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : v &lt; i + j
  e : v = i
  ============================
   #v = N [j ← P] ↑ i

subgoal 2 (ID 5679) is:
 #v = #(v - 1)
subgoal 3 (ID 5662) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 5663) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 5 (ID 5613) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 5614) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 5628) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 8 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 9 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 10 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 11 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 12 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 13 (ID 5579) is:
 !s = !s
subgoal 14 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 15 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 16 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>16 subgoals, subgoal 1 (ID 5686)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; i
  l0 : i &lt; S (i + j)
  l1 : i &lt; i + j
  ============================
   #i = N [j ← P] ↑ i

subgoal 2 (ID 5679) is:
 #v = #(v - 1)
subgoal 3 (ID 5662) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 5663) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 5 (ID 5613) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 5614) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 5628) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 8 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 9 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 10 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 11 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 12 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 13 (ID 5579) is:
 !s = !s
subgoal 14 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 15 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 16 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l</span>. </span><div class="output"><pre>15 subgoals, subgoal 1 (ID 5679)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : v &lt; i + j
  l2 : i &lt; v
  ============================
   #v = #(v - 1)

subgoal 2 (ID 5662) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 5663) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 5613) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 5614) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 5628) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 7 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 8 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 9 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 10 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 11 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 12 (ID 5579) is:
 !s = !s
subgoal 13 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 14 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 15 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> ( <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_asym"><span class="id" type="lemma">lt_asym</span></a> <span class="id" type="var">v</span> <span class="id" type="var">i</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>14 subgoals, subgoal 1 (ID 5662)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  e : v = i + j
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 5663) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 5613) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 5614) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 5628) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 6 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 7 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 8 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 9 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 10 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 11 (ID 5579) is:
 !s = !s
subgoal 12 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 13 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 14 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>14 subgoals, subgoal 1 (ID 5696)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i + j &lt; i
  l0 : i + j &lt; S (i + j)
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec (i + j) i with
   | inleft (left _) =&gt; #(i + j)
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(i + j - 1)
   end

subgoal 2 (ID 5663) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 5613) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 5614) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 5628) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 6 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 7 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 8 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 9 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 10 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 11 (ID 5579) is:
 !s = !s
subgoal 12 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 13 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 14 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l</span>. </span><div class="output"><pre>14 subgoals, subgoal 1 (ID 5698)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : j + i &lt; i
  l0 : i + j &lt; S (i + j)
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec (i + j) i with
   | inleft (left _) =&gt; #(i + j)
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(i + j - 1)
   end

subgoal 2 (ID 5663) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 5613) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 5614) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 5628) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 6 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 7 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 8 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 9 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 10 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 11 (ID 5579) is:
 !s = !s
subgoal 12 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 13 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 14 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>14 subgoals, subgoal 1 (ID 5699)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : j + i &lt; i
  l0 : i + j &lt; S (i + j)
  ============================
   i &lt; i

subgoal 2 (ID 5663) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 5613) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 5614) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 5628) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 6 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 7 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 8 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 9 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 10 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 11 (ID 5579) is:
 !s = !s
subgoal 12 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 13 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 14 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">induction</span> <span class="id" type="var">j</span>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>13 subgoals, subgoal 1 (ID 5663)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : i + j &lt; v
  ============================
   #(v - 1) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 5613) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 5614) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 5628) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 5 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 8 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 9 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 10 (ID 5579) is:
 !s = !s
subgoal 11 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 12 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 13 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>13 subgoals, subgoal 1 (ID 5750)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : i + j &lt; v
  ============================
   i &lt; i

subgoal 2 (ID 5613) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 5614) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 5628) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 5 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 8 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 9 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 10 (ID 5579) is:
 !s = !s
subgoal 11 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 12 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 13 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>;<span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>13 subgoals, subgoal 1 (ID 5751)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : i + j &lt; v
  ============================
   i &lt;= v

subgoal 2 (ID 5613) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 5614) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 5628) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 5 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 8 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 9 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 10 (ID 5579) is:
 !s = !s
subgoal 11 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 12 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 13 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>13 subgoals, subgoal 1 (ID 5773)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : j + i &lt; v
  ============================
   i &lt;= v

subgoal 2 (ID 5613) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 5614) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 5628) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 5 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 8 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 9 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 10 (ID 5579) is:
 !s = !s
subgoal 11 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 12 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 13 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">induction</span> <span class="id" type="var">j</span>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>12 subgoals, subgoal 1 (ID 5613)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  e : v = S (i + j)
  ============================
   #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 5614) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 5628) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 4 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 7 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 8 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 9 (ID 5579) is:
 !s = !s
subgoal 10 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 11 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 12 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>12 subgoals, subgoal 1 (ID 5869)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : S (i + j) &lt; i
  ============================
   #(S (i + j)) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 5614) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 5628) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 4 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 7 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 8 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 9 (ID 5579) is:
 !s = !s
subgoal 10 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 11 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 12 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>12 subgoals, subgoal 1 (ID 5870)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : S (i + j) &lt; i
  ============================
   i &lt; i

subgoal 2 (ID 5614) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 5628) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 4 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 7 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 8 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 9 (ID 5579) is:
 !s = !s
subgoal 10 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 11 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 12 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>11 subgoals, subgoal 1 (ID 5614)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : S (i + j) &lt; v
  ============================
   #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]

subgoal 2 (ID 5628) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 3 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 6 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 7 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 8 (ID 5579) is:
 !s = !s
subgoal 9 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 10 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 11 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>11 subgoals, subgoal 1 (ID 5912)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : S (i + j) &lt; v
  ============================
   i &lt; i

subgoal 2 (ID 5628) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 3 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 6 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 7 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 8 (ID 5579) is:
 !s = !s
subgoal 9 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 10 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 11 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)); <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>11 subgoals, subgoal 1 (ID 5914)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : S (i + j) &lt; v
  ============================
   S (i + j) &lt; i

subgoal 2 (ID 5628) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 3 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 6 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 7 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 8 (ID 5579) is:
 !s = !s
subgoal 9 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 10 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 11 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>10 subgoals, subgoal 1 (ID 5628)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  e : v = i
  l : v &lt; S (i + j)
  ============================
   N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]

subgoal 2 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 5 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 5579) is:
 !s = !s
subgoal 8 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 9 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 10 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 6012)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  e : v = i
  l : v &lt; S (i + j)
  ============================
   N ↑ i [(i + j) ← P] =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 5 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 5579) is:
 !s = !s
subgoal 8 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 9 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 10 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>. </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 6017)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  ============================
   N ↑ i [(i + j) ← P] =
   match lt_eq_lt_dec i i with
   | inleft (left _) =&gt; #i
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(i - 1)
   end

subgoal 2 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 5 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 5579) is:
 !s = !s
subgoal 8 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 9 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 10 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">i</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>12 subgoals, subgoal 1 (ID 6031)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  l0 : i &lt; i
  ============================
   N ↑ i [(i + j) ← P] = #i

subgoal 2 (ID 6032) is:
 N ↑ i [(i + j) ← P] = N [j ← P] ↑ i
subgoal 3 (ID 6033) is:
 N ↑ i [(i + j) ← P] = #(i - 1)
subgoal 4 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 7 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 8 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 9 (ID 5579) is:
 !s = !s
subgoal 10 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 11 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 12 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>); <span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>11 subgoals, subgoal 1 (ID 6032)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  e : i = i
  ============================
   N ↑ i [(i + j) ← P] = N [j ← P] ↑ i

subgoal 2 (ID 6033) is:
 N ↑ i [(i + j) ← P] = #(i - 1)
subgoal 3 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 6 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 7 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 8 (ID 5579) is:
 !s = !s
subgoal 9 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 10 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 11 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="term.html#term_mod.substP2"><span class="id" type="lemma">substP2</span></a>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>10 subgoals, subgoal 1 (ID 6033)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  l0 : i &lt; i
  ============================
   N ↑ i [(i + j) ← P] = #(i - 1)

subgoal 2 (ID 5629) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 5 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 5579) is:
 !s = !s
subgoal 8 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 9 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 10 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>9 subgoals, subgoal 1 (ID 5629)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  e : v = i
  e0 : v = S (i + j)
  ============================
   N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 4 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 5579) is:
 !s = !s
subgoal 7 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 8 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 9 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 6048)
  
  N : Term
  P : Term
  i : nat
  j : nat
  e0 : i = S (i + j)
  ============================
   N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 4 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 5579) is:
 !s = !s
subgoal 7 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 8 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 9 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">e0</span>. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 6050)
  
  N : Term
  P : Term
  i : nat
  j : nat
  e0 : i = S (j + i)
  ============================
   N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 4 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 5579) is:
 !s = !s
subgoal 7 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 8 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 9 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#succ_plus_discr"><span class="id" type="lemma">succ_plus_discr</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">e0</span>. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 6052)
  
  N : Term
  P : Term
  i : nat
  j : nat
  e0 : False
  ============================
   N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 5630) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 4 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 5579) is:
 !s = !s
subgoal 7 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 8 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 9 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> <span class="id" type="var">e0</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 5630)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  e : v = i
  l : S (i + j) &lt; v
  ============================
   N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]

subgoal 2 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 3 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 5579) is:
 !s = !s
subgoal 6 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 7 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 8 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 6057)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : S (i + j) &lt; i
  ============================
   N ↑ i [(i + j) ← P] = #(i - 1) [i ← N [j ← P]]

subgoal 2 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 3 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 5579) is:
 !s = !s
subgoal 6 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 7 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 8 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 6058)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : S (i + j) &lt; i
  ============================
   i &lt; i

subgoal 2 (ID 5644) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 3 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 5579) is:
 !s = !s
subgoal 6 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 7 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 8 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5644)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  ============================
   #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]

subgoal 2 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 5579) is:
 !s = !s
subgoal 5 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 6086)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  ============================
   match lt_eq_lt_dec (v - 1) (i + j) with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; P ↑ (i + j)
   | inright _ =&gt; #(v - 1 - 1)
   end =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 5579) is:
 !s = !s
subgoal 5 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a>1) (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) <span class="id" type="keyword">as</span>  [[] | ]. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 6100)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : v - 1 &lt; i + j
  ============================
   #(v - 1) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 6101) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 6102) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 5579) is:
 !s = !s
subgoal 7 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 8 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 9 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">i</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>11 subgoals, subgoal 1 (ID 6116)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : v - 1 &lt; i + j
  l2 : v &lt; i
  ============================
   #(v - 1) = #v

subgoal 2 (ID 6117) is:
 #(v - 1) = N [j ← P] ↑ i
subgoal 3 (ID 6118) is:
 #(v - 1) = #(v - 1)
subgoal 4 (ID 6101) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 5 (ID 6102) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 6 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 7 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 8 (ID 5579) is:
 !s = !s
subgoal 9 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 10 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 11 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_asym"><span class="id" type="lemma">lt_asym</span></a> <span class="id" type="var">v</span> <span class="id" type="var">i</span>); <span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 6117)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : v - 1 &lt; i + j
  e : v = i
  ============================
   #(v - 1) = N [j ← P] ↑ i

subgoal 2 (ID 6118) is:
 #(v - 1) = #(v - 1)
subgoal 3 (ID 6101) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 6102) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 5 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 5579) is:
 !s = !s
subgoal 8 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 9 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 10 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>. </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 6127)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; i
  l0 : i &lt; S (i + j)
  l1 : i - 1 &lt; i + j
  ============================
   #(i - 1) = N [j ← P] ↑ i

subgoal 2 (ID 6118) is:
 #(v - 1) = #(v - 1)
subgoal 3 (ID 6101) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 6102) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 5 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 5579) is:
 !s = !s
subgoal 8 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 9 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 10 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>9 subgoals, subgoal 1 (ID 6118)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : v - 1 &lt; i + j
  l2 : i &lt; v
  ============================
   #(v - 1) = #(v - 1)

subgoal 2 (ID 6101) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 6102) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 5579) is:
 !s = !s
subgoal 7 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 8 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 9 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 6101)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  e : v - 1 = i + j
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 6102) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 5579) is:
 !s = !s
subgoal 6 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 7 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 8 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">e</span> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 6130)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (v - 1)
  e : v - 1 = i + j
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 6102) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 5579) is:
 !s = !s
subgoal 6 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 7 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 8 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 6132)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (pred v)
  e : v - 1 = i + j
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 6102) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 5579) is:
 !s = !s
subgoal 6 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 7 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 8 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#S_pred"><span class="id" type="lemma">S_pred</span></a>  <span class="id" type="var">v</span> <span class="id" type="var">i</span> <span class="id" type="var">l</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 6134)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; v
  e : v - 1 = i + j
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 6102) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 5579) is:
 !s = !s
subgoal 6 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 7 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 8 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 6102)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : i + j &lt; v - 1
  ============================
   #(v - 1 - 1) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 5579) is:
 !s = !s
subgoal 5 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_S"><span class="id" type="lemma">lt_n_S</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 6137)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : S (i + j) &lt; S (v - 1)
  ============================
   #(v - 1 - 1) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 5579) is:
 !s = !s
subgoal 5 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>).</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 6138)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : S (i + j) &lt; S (v - 1)
  ============================
   v &lt; v

subgoal 2 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 5579) is:
 !s = !s
subgoal 5 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 6140)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : S (i + j) &lt; S (v - 1)
  ============================
   S (i + j) &lt; v

subgoal 2 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 5579) is:
 !s = !s
subgoal 5 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 6142)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : S (i + j) &lt; S (pred v)
  ============================
   S (i + j) &lt; v

subgoal 2 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 5579) is:
 !s = !s
subgoal 5 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#S_pred"><span class="id" type="lemma">S_pred</span></a>  <span class="id" type="var">v</span> <span class="id" type="var">i</span> <span class="id" type="var">l</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 6144)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : S (i + j) &lt; v
  ============================
   S (i + j) &lt; v

subgoal 2 (ID 5645) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 5579) is:
 !s = !s
subgoal 5 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5645)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  e : v = S (i + j)
  ============================
   #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 5579) is:
 !s = !s
subgoal 4 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 6149)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  ============================
   #(S (i + j) - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 5579) is:
 !s = !s
subgoal 4 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 6150)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  ============================
   match lt_eq_lt_dec (i + j - 0) (i + j) with
   | inleft (left _) =&gt; #(i + j - 0)
   | inleft (right _) =&gt; P ↑ (i + j)
   | inright _ =&gt; #(i + j - 0 - 1)
   end = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 5579) is:
 !s = !s
subgoal 4 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#minus_n_O"><span class="id" type="lemma">minus_n_O</span></a>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 6151)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  ============================
   match lt_eq_lt_dec (i + j) (i + j) with
   | inleft (left _) =&gt; #(i + j)
   | inleft (right _) =&gt; P ↑ (i + j)
   | inright _ =&gt; #(i + j - 1)
   end = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 5579) is:
 !s = !s
subgoal 4 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>) (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 6165)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  l0 : i + j &lt; i + j
  ============================
   #(i + j) = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 6166) is:
 P ↑ (i + j) = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 6167) is:
 #(i + j - 1) = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 5579) is:
 !s = !s
subgoal 6 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 7 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 8 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) ; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 6166)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  e : i + j = i + j
  ============================
   P ↑ (i + j) = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 6167) is:
 #(i + j - 1) = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 5579) is:
 !s = !s
subgoal 5 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">symmetry</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 6170)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  e : i + j = i + j
  ============================
   P ↑ (S (i + j)) [i ← N [j ← P]] = P ↑ (i + j)

subgoal 2 (ID 6167) is:
 #(i + j - 1) = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 5579) is:
 !s = !s
subgoal 5 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="term.html#term_mod.substP3"><span class="id" type="lemma">substP3</span></a>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 6167)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  l0 : i + j &lt; i + j
  ============================
   #(i + j - 1) = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 5646) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 5579) is:
 !s = !s
subgoal 4 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) ; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 5646)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  ============================
   #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]

subgoal 2 (ID 5579) is:
 !s = !s
subgoal 3 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 4 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 5 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 6189)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  ============================
   match lt_eq_lt_dec (v - 1) (i + j) with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; P ↑ (i + j)
   | inright _ =&gt; #(v - 1 - 1)
   end =
   match lt_eq_lt_dec (v - 1) i with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1 - 1)
   end

subgoal 2 (ID 5579) is:
 !s = !s
subgoal 3 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 4 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 5 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a>1) (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) <span class="id" type="keyword">as</span>  [[] | ].</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 6203)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : v - 1 &lt; i + j
  ============================
   #(v - 1) =
   match lt_eq_lt_dec (v - 1) i with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1 - 1)
   end

subgoal 2 (ID 6204) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 6205) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 4 (ID 5579) is:
 !s = !s
subgoal 5 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 6206)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : v - 1 &lt; i + j
  ============================
   v &lt; v

subgoal 2 (ID 6204) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 6205) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 4 (ID 5579) is:
 !s = !s
subgoal 5 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) ;<span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 6207)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : v - 1 &lt; i + j
  ============================
   v &lt; S (i + j)

subgoal 2 (ID 6204) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 6205) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 4 (ID 5579) is:
 !s = !s
subgoal 5 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_S"><span class="id" type="lemma">lt_n_S</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 6210)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : S (v - 1) &lt; S (i + j)
  ============================
   v &lt; S (i + j)

subgoal 2 (ID 6204) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 6205) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 4 (ID 5579) is:
 !s = !s
subgoal 5 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 6212)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : S (pred v) &lt; S (i + j)
  ============================
   v &lt; S (i + j)

subgoal 2 (ID 6204) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 6205) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 4 (ID 5579) is:
 !s = !s
subgoal 5 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#S_pred"><span class="id" type="lemma">S_pred</span></a> <span class="id" type="var">v</span> <span class="id" type="var">i</span> <span class="id" type="var">l</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 6214)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : v &lt; S (i + j)
  ============================
   v &lt; S (i + j)

subgoal 2 (ID 6204) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 6205) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 4 (ID 5579) is:
 !s = !s
subgoal 5 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 6204)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  e : v - 1 = i + j
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec (v - 1) i with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1 - 1)
   end

subgoal 2 (ID 6205) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 5579) is:
 !s = !s
subgoal 4 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#eq_S"><span class="id" type="definition">eq_S</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">e</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 6216)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  e : S (v - 1) = S (i + j)
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec (v - 1) i with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1 - 1)
   end

subgoal 2 (ID 6205) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 5579) is:
 !s = !s
subgoal 4 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">e</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 6218)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  e : S (pred v) = S (i + j)
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec (v - 1) i with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1 - 1)
   end

subgoal 2 (ID 6205) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 5579) is:
 !s = !s
subgoal 4 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#S_pred"><span class="id" type="lemma">S_pred</span></a> <span class="id" type="var">v</span> <span class="id" type="var">i</span> <span class="id" type="var">l</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">e</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 6220)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  e : v = S (i + j)
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec (v - 1) i with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1 - 1)
   end

subgoal 2 (ID 6205) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 5579) is:
 !s = !s
subgoal 4 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 6226)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  l0 : S (i + j) &lt; S (i + j)
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec (S (i + j) - 1) i with
   | inleft (left _) =&gt; #(S (i + j) - 1)
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(S (i + j) - 1 - 1)
   end

subgoal 2 (ID 6205) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 5579) is:
 !s = !s
subgoal 4 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>))); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 6205)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : i + j &lt; v - 1
  ============================
   #(v - 1 - 1) =
   match lt_eq_lt_dec (v - 1) i with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1 - 1)
   end

subgoal 2 (ID 5579) is:
 !s = !s
subgoal 3 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 4 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 5 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a>1) <span class="id" type="var">i</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 6241)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : i + j &lt; v - 1
  l2 : v - 1 &lt; i
  ============================
   #(v - 1 - 1) = #(v - 1)

subgoal 2 (ID 6242) is:
 #(v - 1 - 1) = N [j ← P] ↑ i
subgoal 3 (ID 6243) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 4 (ID 5579) is:
 !s = !s
subgoal 5 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 6244)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : i + j &lt; v - 1
  l2 : v - 1 &lt; i
  ============================
   v &lt; v

subgoal 2 (ID 6242) is:
 #(v - 1 - 1) = N [j ← P] ↑ i
subgoal 3 (ID 6243) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 4 (ID 5579) is:
 !s = !s
subgoal 5 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 6245)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : i + j &lt; v - 1
  l2 : v - 1 &lt; i
  ============================
   v &lt;= i

subgoal 2 (ID 6242) is:
 #(v - 1 - 1) = N [j ← P] ↑ i
subgoal 3 (ID 6243) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 4 (ID 5579) is:
 !s = !s
subgoal 5 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 6256)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; 0
  l0 : S (i + j) &lt; 0
  l1 : i + j &lt; 0 - 1
  l2 : 0 - 1 &lt; i
  ============================
   0 &lt;= i

subgoal 2 (ID 6262) is:
 S v &lt;= i
subgoal 3 (ID 6242) is:
 #(v - 1 - 1) = N [j ← P] ↑ i
subgoal 4 (ID 6243) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 5 (ID 5579) is:
 !s = !s
subgoal 6 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 7 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 8 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_O"><span class="id" type="abbreviation">lt_n_O</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 6262)
  
  v : nat
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S v
  l0 : S (i + j) &lt; S v
  l1 : i + j &lt; S v - 1
  l2 : S v - 1 &lt; i
  ============================
   S v &lt;= i

subgoal 2 (ID 6242) is:
 #(v - 1 - 1) = N [j ← P] ↑ i
subgoal 3 (ID 6243) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 4 (ID 5579) is:
 !s = !s
subgoal 5 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l2</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 6266)
  
  v : nat
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S v
  l0 : S (i + j) &lt; S v
  l1 : i + j &lt; S v - 1
  l2 : pred (S v) &lt; i
  ============================
   S v &lt;= i

subgoal 2 (ID 6242) is:
 #(v - 1 - 1) = N [j ← P] ↑ i
subgoal 3 (ID 6243) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 4 (ID 5579) is:
 !s = !s
subgoal 5 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">l2</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 6267)
  
  v : nat
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S v
  l0 : S (i + j) &lt; S v
  l1 : i + j &lt; S v - 1
  l2 : v &lt; i
  ============================
   S v &lt;= i

subgoal 2 (ID 6242) is:
 #(v - 1 - 1) = N [j ← P] ↑ i
subgoal 3 (ID 6243) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 4 (ID 5579) is:
 !s = !s
subgoal 5 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 6242)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : i + j &lt; v - 1
  e : v - 1 = i
  ============================
   #(v - 1 - 1) = N [j ← P] ↑ i

subgoal 2 (ID 6243) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 3 (ID 5579) is:
 !s = !s
subgoal 4 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 6277)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; 0
  l0 : S (i + j) &lt; 0
  l1 : i + j &lt; 0 - 1
  e : 0 - 1 = i
  ============================
   #(0 - 1 - 1) = N [j ← P] ↑ i

subgoal 2 (ID 6283) is:
 #(S v - 1 - 1) = N [j ← P] ↑ i
subgoal 3 (ID 6243) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 4 (ID 5579) is:
 !s = !s
subgoal 5 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_O"><span class="id" type="abbreviation">lt_n_O</span></a> <span class="id" type="var">i</span>); <span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 6283)
  
  v : nat
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S v
  l0 : S (i + j) &lt; S v
  l1 : i + j &lt; S v - 1
  e : S v - 1 = i
  ============================
   #(S v - 1 - 1) = N [j ← P] ↑ i

subgoal 2 (ID 6243) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 3 (ID 5579) is:
 !s = !s
subgoal 4 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">e</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 6286)
  
  v : nat
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S v
  l0 : S (i + j) &lt; S v
  l1 : i + j &lt; S v - 1
  e : pred (S v) = i
  ============================
   #(S v - 1 - 1) = N [j ← P] ↑ i

subgoal 2 (ID 6243) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 3 (ID 5579) is:
 !s = !s
subgoal 4 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">e</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 6287)
  
  v : nat
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S v
  l0 : S (i + j) &lt; S v
  l1 : i + j &lt; S v - 1
  e : v = i
  ============================
   #(S v - 1 - 1) = N [j ← P] ↑ i

subgoal 2 (ID 6243) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 3 (ID 5579) is:
 !s = !s
subgoal 4 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 6294)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S i
  l0 : S (i + j) &lt; S i
  l1 : i + j &lt; S i - 1
  ============================
   #(S i - 1 - 1) = N [j ← P] ↑ i

subgoal 2 (ID 6243) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 3 (ID 5579) is:
 !s = !s
subgoal 4 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 6296)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S i
  l0 : S (i + j) &lt; S i
  l1 : i + j &lt; pred (S i)
  ============================
   #(S i - 1 - 1) = N [j ← P] ↑ i

subgoal 2 (ID 6243) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 3 (ID 5579) is:
 !s = !s
subgoal 4 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 6297)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S i
  l0 : S (i + j) &lt; S i
  l1 : i + j &lt; i
  ============================
   #(S i - 1 - 1) = N [j ← P] ↑ i

subgoal 2 (ID 6243) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 3 (ID 5579) is:
 !s = !s
subgoal 4 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>).</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 6298)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S i
  l0 : S (i + j) &lt; S i
  l1 : i + j &lt; i
  ============================
   i &lt; i

subgoal 2 (ID 6243) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 3 (ID 5579) is:
 !s = !s
subgoal 4 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 6243)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : i + j &lt; v - 1
  l2 : i &lt; v - 1
  ============================
   #(v - 1 - 1) = #(v - 1 - 1)

subgoal 2 (ID 5579) is:
 !s = !s
subgoal 3 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 4 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 5 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 5579)
  
  s : Sorts
  N : Term
  P : Term
  i : nat
  j : nat
  ============================
   !s = !s

subgoal 2 (ID 5580) is:
 M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
 M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]]
 ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
 M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
 M4 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 3 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 4 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 5580)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall (N P : Term) (i j : nat),
         M1 [i ← N] [(i + j) ← P] = M1 [(S (i + j)) ← P] [i ← N [j ← P]]
  IHM2 : forall (N P : Term) (i j : nat),
         M2 [i ← N] [(i + j) ← P] = M2 [(S (i + j)) ← P] [i ← N [j ← P]]
  IHM3 : forall (N P : Term) (i j : nat),
         M3 [i ← N] [(i + j) ← P] = M3 [(S (i + j)) ← P] [i ← N [j ← P]]
  IHM4 : forall (N P : Term) (i j : nat),
         M4 [i ← N] [(i + j) ← P] = M4 [(S (i + j)) ← P] [i ← N [j ← P]]
  N : Term
  P : Term
  i : nat
  j : nat
  ============================
   M1 [i ← N] [(i + j) ← P] ·( M2 [i ← N] [(i + j) ← P],
   M3 [(S i) ← N] [(S (i + j)) ← P])M4 [i ← N] [(i + j) ← P] =
   M1 [(S (i + j)) ← P] [i ← N [j ← P]]
   ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
   M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
   M4 [(S (i + j)) ← P] [i ← N [j ← P]]

subgoal 2 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 3 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM4</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 6310)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall (N P : Term) (i j : nat),
         M1 [i ← N] [(i + j) ← P] = M1 [(S (i + j)) ← P] [i ← N [j ← P]]
  IHM2 : forall (N P : Term) (i j : nat),
         M2 [i ← N] [(i + j) ← P] = M2 [(S (i + j)) ← P] [i ← N [j ← P]]
  IHM3 : forall (N P : Term) (i j : nat),
         M3 [i ← N] [(i + j) ← P] = M3 [(S (i + j)) ← P] [i ← N [j ← P]]
  IHM4 : forall (N P : Term) (i j : nat),
         M4 [i ← N] [(i + j) ← P] = M4 [(S (i + j)) ← P] [i ← N [j ← P]]
  N : Term
  P : Term
  i : nat
  j : nat
  ============================
   M1 [(S (i + j)) ← P] [i ← N [j ← P]] ·( M2 [i ← N] [(i + j) ← P],
   M3 [(S i) ← N] [(S (i + j)) ← P])M4 [(S (i + j)) ← P] [i ← N [j ← P]] =
   M1 [(S (i + j)) ← P] [i ← N [j ← P]]
   ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
   M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
   M4 [(S (i + j)) ← P] [i ← N [j ← P]]

subgoal 2 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 3 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 6327)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall (N P : Term) (i j : nat),
         M1 [i ← N] [(i + j) ← P] = M1 [(S (i + j)) ← P] [i ← N [j ← P]]
  IHM2 : forall (N P : Term) (i j : nat),
         M2 [i ← N] [(i + j) ← P] = M2 [(S (i + j)) ← P] [i ← N [j ← P]]
  IHM3 : forall (N P : Term) (i j : nat),
         M3 [i ← N] [(i + j) ← P] = M3 [(S (i + j)) ← P] [i ← N [j ← P]]
  IHM4 : forall (N P : Term) (i j : nat),
         M4 [i ← N] [(i + j) ← P] = M4 [(S (i + j)) ← P] [i ← N [j ← P]]
  N : Term
  P : Term
  i : nat
  j : nat
  ============================
   M1 [(S (i + j)) ← P] [i ← N [j ← P]]
   ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]], M3 [(S i) ← N] [(S (i + j)) ← P])
   M4 [(S (i + j)) ← P] [i ← N [j ← P]] =
   M1 [(S (i + j)) ← P] [i ← N [j ← P]]
   ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
   M3 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]])
   M4 [(S (i + j)) ← P] [i ← N [j ← P]]

subgoal 2 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 3 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>))) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)+</span></a> <span class="id" type="var">j</span>)) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 6347)
  
  M1 : Term
  M2 : Term
  M3 : Term
  M4 : Term
  IHM1 : forall (N P : Term) (i j : nat),
         M1 [i ← N] [(i + j) ← P] = M1 [(S (i + j)) ← P] [i ← N [j ← P]]
  IHM2 : forall (N P : Term) (i j : nat),
         M2 [i ← N] [(i + j) ← P] = M2 [(S (i + j)) ← P] [i ← N [j ← P]]
  IHM3 : forall (N P : Term) (i j : nat),
         M3 [i ← N] [(i + j) ← P] = M3 [(S (i + j)) ← P] [i ← N [j ← P]]
  IHM4 : forall (N P : Term) (i j : nat),
         M4 [i ← N] [(i + j) ← P] = M4 [(S (i + j)) ← P] [i ← N [j ← P]]
  N : Term
  P : Term
  i : nat
  j : nat
  ============================
   M1 [(S (i + j)) ← P] [i ← N [j ← P]]
   ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]], M3 [(S i) ← N] [(S (i + j)) ← P])
   M4 [(S (i + j)) ← P] [i ← N [j ← P]] =
   M1 [(S (i + j)) ← P] [i ← N [j ← P]]
   ·( M2 [(S (i + j)) ← P] [i ← N [j ← P]],
   M3 [(S (S i + j)) ← P] [(S i) ← N [j ← P]])
   M4 [(S (i + j)) ← P] [i ← N [j ← P]]

subgoal 2 (ID 5581) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 3 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">IHM3</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 5581)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N P : Term) (i j : nat),
         M1 [i ← N] [(i + j) ← P] = M1 [(S (i + j)) ← P] [i ← N [j ← P]]
  IHM2 : forall (N P : Term) (i j : nat),
         M2 [i ← N] [(i + j) ← P] = M2 [(S (i + j)) ← P] [i ← N [j ← P]]
  N : Term
  P : Term
  i : nat
  j : nat
  ============================
   Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
   Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
   M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]

subgoal 2 (ID 5582) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>))) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)+</span></a> <span class="id" type="var">j</span>)) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>;<br>
  <span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">IHM2</span> <span class="id" type="var">N</span> <span class="id" type="var">P</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>)); <span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)+</span></a> <span class="id" type="var">j</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 5582)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N P : Term) (i j : nat),
         M1 [i ← N] [(i + j) ← P] = M1 [(S (i + j)) ← P] [i ← N [j ← P]]
  IHM2 : forall (N P : Term) (i j : nat),
         M2 [i ← N] [(i + j) ← P] = M2 [(S (i + j)) ← P] [i ← N [j ← P]]
  N : Term
  P : Term
  i : nat
  j : nat
  ============================
   λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
   λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
   M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>))) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)+</span></a><span class="id" type="var">j</span>)) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>;<br>
  <span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">IHM2</span> <span class="id" type="var">N</span> <span class="id" type="var">P</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>)); <span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)+</span></a> <span class="id" type="var">j</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>substP4 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="term_mod.subst_travers"><span class="id" type="lemma">subst_travers</span></a> : <br>
 <span class="id" type="keyword">forall</span>  <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">P</span> <span class="id" type="var">n</span>, <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[←</span></a> <a class="idref" href="term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a>1 <a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">)[←</span></a> <a class="idref" href="term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="term.html#term_mod.:Typ_scope:x_'%5B'_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 6387)
  
  ============================
   forall (M N P : Term) (n : nat),
   M [ ← N] [n ← P] = (M [(n + 1) ← P]) [ ← N [n ← P]]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intros</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 6391)
  
  M : Term
  N : Term
  P : Term
  n : nat
  ============================
   M [ ← N] [n ← P] = (M [(n + 1) ← P]) [ ← N [n ← P]]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a>. </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 6392)
  
  M : Term
  N : Term
  P : Term
  n : nat
  ============================
   M [ ← N] [n ← P] = (M [(1 + n) ← P]) [ ← N [n ← P]]

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">change</span> <span class="id" type="var">n</span> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#O"><span class="id" type="constructor">O</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>). </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 6394)
  
  M : Term
  N : Term
  P : Term
  n : nat
  ============================
   M [ ← N] [(0 + n) ← P] = (M [(1 + (0 + n)) ← P]) [ ← N [(0 + n) ← P]]

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="term.html#term_mod.substP4"><span class="id" type="lemma">substP4</span></a>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>subst_travers is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">End</span> <a class="idref" href="term.html#"><span class="id" type="module">term_mod</span></a>.</span><div class="output"><pre>Module Type term_mod is defined

</pre></div>
<span class="command"><br>
</span><div class="output"><pre></pre></div>
</div>
</div>

<div>
<hr>
<a href="index.html">Index</a><hr>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div></body>
</html>
