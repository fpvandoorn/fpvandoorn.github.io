<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="proviola.css">
<link href="coqdoc.css" type="text/css" rel="stylesheet">
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script><script type="text/javascript">
      $(document).ready(function() {
        $(".command").mouseenter(function() {
          $(this).next(".output").fadeIn(5);
                   }).mouseleave(function() {
          $(this).next(".output").fadeOut(0);})
      });
    </script>
</head>
<body><div>

<div>
</div>

<div>

<h1 class="libtitle">Library ut_term</h1>

<div>
<span class="command">
</span><div class="output"><pre></pre></div>
</div>

<div>
<a name="lab20"></a><h1 class="section">Term definition for PTS and de Bruijn manipulation .</h1>
<a name="lab21"></a><h1 class="section">Usual Term syntax .</h1>

</div>
<div>
<span class="command">
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Peano_dec.html#"><span class="id" type="library">Peano_dec</span></a>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#"><span class="id" type="library">Compare_dec</span></a>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#"><span class="id" type="library">Lt</span></a>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Le.html#"><span class="id" type="library">Le</span></a>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Gt.html#"><span class="id" type="library">Gt</span></a>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#"><span class="id" type="library">Plus</span></a>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#"><span class="id" type="library">Minus</span></a>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Bool.Bool.html#"><span class="id" type="library">Bool</span></a>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="base.html#"><span class="id" type="library">base</span></a>.</span><div class="output"><pre></pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Module</span> <span class="id" type="keyword">Type</span> <a name="ut_term_mod"><span class="id" type="module">ut_term_mod</span></a> (<span class="id" type="var">X</span>: <a class="idref" href="base.html#"><span class="id" type="module">term_sig</span></a>).</span><div class="output"><pre>Interactive Module Type ut_term_mod started

</pre></div>
<span class="command"><br>
  <span class="id" type="keyword">Import</span> <span class="id" type="var">X</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
</span><div class="output"><pre></pre></div>
</div>

<div>
Term syntax:
</div>
<div>
<span class="command">
<span class="id" type="keyword">Inductive</span> <a name="ut_term_mod.Term"><span class="id" type="inductive">Term</span></a> : <span class="id" type="keyword">Set</span>:=<br>
 | <a name="ut_term_mod.Var"><span class="id" type="constructor">Var</span></a> : <a class="idref" href="base.html#Vars"><span class="id" type="definition">Vars</span></a> -&gt; <a class="idref" href="ut_term.html#Term"><span class="id" type="inductive">Term</span></a><br>
 | <span class="id" type="keyword">Sort</span> : <a class="idref" href="ut_term.html#X.Sorts"><span class="id" type="axiom">Sorts</span></a> -&gt; <a class="idref" href="ut_term.html#Term"><span class="id" type="inductive">Term</span></a><br>
 | <a name="ut_term_mod.App"><span class="id" type="constructor">App</span></a> : <a class="idref" href="ut_term.html#Term"><span class="id" type="inductive">Term</span></a> -&gt; <a class="idref" href="ut_term.html#Term"><span class="id" type="inductive">Term</span></a> -&gt; <a class="idref" href="ut_term.html#Term"><span class="id" type="inductive">Term</span></a><br>
 | <a name="ut_term_mod.Pi"><span class="id" type="constructor">Pi</span></a> : <a class="idref" href="ut_term.html#Term"><span class="id" type="inductive">Term</span></a> -&gt; <a class="idref" href="ut_term.html#Term"><span class="id" type="inductive">Term</span></a> -&gt; <a class="idref" href="ut_term.html#Term"><span class="id" type="inductive">Term</span></a><br>
 | <a name="ut_term_mod.La"><span class="id" type="constructor">La</span></a> :<a class="idref" href="ut_term.html#Term"><span class="id" type="inductive">Term</span></a> -&gt; <a class="idref" href="ut_term.html#Term"><span class="id" type="inductive">Term</span></a> -&gt; <a class="idref" href="ut_term.html#Term"><span class="id" type="inductive">Term</span></a><br>
.</span><div class="output"><pre>Term is defined
Term_rect is defined
Term_ind is defined
Term_rec is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Notation</span> <a name="ut_term_mod.:UT_scope:x_'%C2%B7'_x"><span class="id" type="notation">"</span></a>x · y" := (<a class="idref" href="ut_term.html#ut_term_mod.App"><span class="id" type="constructor">App</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 15, <span class="id" type="tactic">left</span> <span class="id" type="keyword">associativity</span>) : <span class="id" type="var">UT_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Notation</span> <a name="ut_term_mod.:UT_scope:'!'_x"><span class="id" type="notation">"</span></a>! s" := (<span class="id" type="keyword">Sort</span> <span class="id" type="var">s</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 1) : <span class="id" type="var">UT_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Notation</span> <a name="ut_term_mod.:UT_scope:'#'_x"><span class="id" type="notation">"</span></a># v" := (<a class="idref" href="ut_term.html#ut_term_mod.Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">v</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 1) : <span class="id" type="var">UT_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>
<span class="id" type="keyword">Notation</span> <a name="ut_term_mod.:UT_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">"</span></a>'Π' ( U ) , V " := (<a class="idref" href="ut_term.html#ut_term_mod.Pi"><span class="id" type="constructor">Pi</span></a> <span class="id" type="var">U</span> <span class="id" type="var">V</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 20, <span class="id" type="var">U</span>, <span class="id" type="var">V</span> <span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 30) : <span class="id" type="var">UT_scope</span>.</span><div class="output"><pre>Identifier 'Π' now a keyword

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Notation</span> <a name="ut_term_mod.:UT_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">"</span></a>'λ' [ U ] , v " := (<a class="idref" href="ut_term.html#ut_term_mod.La"><span class="id" type="constructor">La</span></a> <span class="id" type="var">U</span> <span class="id" type="var">v</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 20, <span class="id" type="var">U</span> , <span class="id" type="var">v</span> <span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 30) : <span class="id" type="var">UT_scope</span>.</span><div class="output"><pre>Identifier 'λ' now a keyword

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Reserved Notation</span> " t ↑ x # n " (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 5, <span class="id" type="var">x</span> <span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 0, <span class="id" type="tactic">left</span> <span class="id" type="keyword">associativity</span>).</span><div class="output"><pre></pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Delimit</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">UT_scope</span> <span class="id" type="keyword">with</span> <span class="id" type="var">UT</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Open</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">UT_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>

<br>
</span><div class="output"><pre></pre></div>
</div>

<div>
In order to deal with variable bindings and captures, we need a lift
function to deal with free and bounded variables.

<div> </div>

   <span class="inlinecode"><a class="idref" href="f_equivalence.html#M"><span class="id" type="variable">M</span></a></span> <span class="inlinecode">↑</span> <span class="inlinecode"><a class="idref" href="env.html#n"><span class="id" type="variable">n</span></a></span> <span class="inlinecode">#</span> <span class="inlinecode"><a class="idref" href="f_env.html#m"><span class="id" type="variable">m</span></a></span> recursivly add <span class="inlinecode"><a class="idref" href="env.html#n"><span class="id" type="variable">n</span></a></span> to all variables that are
   above <span class="inlinecode"><a class="idref" href="f_env.html#m"><span class="id" type="variable">m</span></a></span> in <span class="inlinecode"><a class="idref" href="f_equivalence.html#M"><span class="id" type="variable">M</span></a></span>. 
</div>
<div>
<span class="command">
<span class="id" type="keyword">Fixpoint</span> <a name="ut_term_mod.lift_rec"><span class="id" type="definition">lift_rec</span></a> (<span class="id" type="var">n</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) (<span class="id" type="var">k</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) (<span class="id" type="var">T</span>:<a class="idref" href="ut_term.html#ut_term_mod.Term"><span class="id" type="inductive">Term</span></a>) {<span class="id" type="keyword">struct</span> <span class="id" type="var">T</span>} := <span class="id" type="keyword">match</span> <a class="idref" href="ut_term.html#T"><span class="id" type="variable">T</span></a> <span class="id" type="keyword">with</span><br>
   | <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'#'_x"><span class="id" type="notation">#</span></a> <span class="id" type="var">x</span> =&gt;  <span class="id" type="keyword">if</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <a class="idref" href="ut_term.html#k"><span class="id" type="variable">k</span></a> <span class="id" type="var">x</span> <span class="id" type="keyword">then</span> <a class="idref" href="ut_term.html#ut_term_mod.Var"><span class="id" type="constructor">Var</span></a> (<a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">x</span>) <span class="id" type="keyword">else</span> <a class="idref" href="ut_term.html#ut_term_mod.Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">x</span><br>
   | <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'!'_x"><span class="id" type="notation">!</span></a> <span class="id" type="var">s</span> =&gt; <span class="id" type="keyword">Sort</span> <span class="id" type="var">s</span><br>
   | <span class="id" type="var">M</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%C2%B7'_x"><span class="id" type="notation">·</span></a> <span class="id" type="var">N</span> =&gt;  <a class="idref" href="ut_term.html#ut_term_mod.App"><span class="id" type="constructor">App</span></a> (<span class="id" type="var">M</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#k"><span class="id" type="variable">k</span></a>) (<span class="id" type="var">N</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#k"><span class="id" type="variable">k</span></a>)<br>
   | <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">Π</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">(</span></a> <span class="id" type="var">A</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">),</span></a> <span class="id" type="var">B</span> =&gt; <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">Π</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">(</span></a><span class="id" type="var">A</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">),</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">(</span></a><span class="id" type="var">B</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="ut_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">)</span></a><br>
   | <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">λ</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">[</span></a> <span class="id" type="var">A</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">],</span></a> <span class="id" type="var">M</span> =&gt; <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">λ</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">[</span></a><span class="id" type="var">A</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">],</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">(</span></a><span class="id" type="var">M</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="ut_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">)</span></a> <br>
 <span class="id" type="keyword">end</span>  <br>
   <span class="id" type="keyword">where</span> <a name="ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">"</span></a>t ↑ n # k" := (<a class="idref" href="ut_term.html#lift_rec"><span class="id" type="definition">lift_rec</span></a> <span class="id" type="var">n</span> <span class="id" type="var">k</span> <span class="id" type="var">t</span>) : <span class="id" type="var">UT_scope</span>.</span><div class="output"><pre>lift_rec is recursively defined (decreasing on 3rd argument)

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Notation</span> <a name="ut_term_mod.:UT_scope:x_'%E2%86%91'_x"><span class="id" type="notation">"</span></a> t ↑ n " := (<a class="idref" href="ut_term.html#ut_term_mod.lift_rec"><span class="id" type="definition">lift_rec</span></a> <span class="id" type="var">n</span> 0 <span class="id" type="var">t</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 5, <span class="id" type="var">n</span> <span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 0, <span class="id" type="tactic">left</span> <span class="id" type="keyword">associativity</span>) : <span class="id" type="var">UT_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>

<br>
</span><div class="output"><pre></pre></div>
</div>

<div>
Some basic properties of the lift function. That is everything we will
ever need to handle de Bruijn indexes 
</div>
<div>
<span class="command">

<br>
<span class="id" type="keyword">Lemma</span> <a name="ut_term_mod.inv_lift"><span class="id" type="lemma">inv_lift</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> , <a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#m"><span class="id" type="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="ut_term.html#N"><span class="id" type="variable">N</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#m"><span class="id" type="variable">m</span></a> -&gt; <a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="ut_term.html#N"><span class="id" type="variable">N</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 9)
  
  ============================
   forall (M N : Term) (n m : nat), M ↑ n # m = N ↑ n # m -&gt; M = N

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intros</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">induction</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">destruct</span> <span class="id" type="var">N</span>; <span class="id" type="tactic">intros</span>;<br>
<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">try</span> (<span class="id" type="tactic">discriminate</span> || <span class="id" type="tactic">intuition</span>); (<span class="id" type="tactic">try</span> (<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">m</span> <span class="id" type="var">v</span>) ; <span class="id" type="tactic">discriminate</span>)).</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 213)
  
  v : Vars
  v0 : Vars
  n : nat
  m : nat
  H : (if le_gt_dec m v then #(n + v) else #v) =
      (if le_gt_dec m v0 then #(n + v0) else #v0)
  ============================
   #v = #v0

subgoal 2 (ID 301) is:
 M1 · M2 = N1 · N2
subgoal 3 (ID 359) is:
 Π (M1), M2 = Π (N1), N2
subgoal 4 (ID 417) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">m</span> <span class="id" type="var">v</span>); <span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">m</span> <span class="id" type="var">v0</span>) ; <span class="id" type="tactic">injection</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 909)
  
  v : Vars
  v0 : Vars
  n : nat
  m : nat
  l : m &lt;= v
  l0 : m &lt;= v0
  H : #(n + v) = #(n + v0)
  H0 : n + v = n + v0
  ============================
   #v = #v0

subgoal 2 (ID 918) is:
 #v = #(n + v)
subgoal 3 (ID 924) is:
 #(n + v0) = #v0
subgoal 4 (ID 301) is:
 M1 · M2 = N1 · N2
subgoal 5 (ID 359) is:
 Π (M1), M2 = Π (N1), N2
subgoal 6 (ID 417) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_reg_l"><span class="id" type="lemma">plus_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H0</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 918)
  
  v : Vars
  n : nat
  m : nat
  l : m &lt;= v
  g : m &gt; n + v
  H : #(n + v) = #(n + v)
  ============================
   #v = #(n + v)

subgoal 2 (ID 924) is:
 #(n + v0) = #v0
subgoal 3 (ID 301) is:
 M1 · M2 = N1 · N2
subgoal 4 (ID 359) is:
 Π (M1), M2 = Π (N1), N2
subgoal 5 (ID 417) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">m</span>). </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 997)
  
  v : Vars
  n : nat
  m : nat
  l : m &lt;= v
  g : m &gt; n + v
  H : #(n + v) = #(n + v)
  ============================
   m &lt; m

subgoal 2 (ID 924) is:
 #(n + v0) = #v0
subgoal 3 (ID 301) is:
 M1 · M2 = N1 · N2
subgoal 4 (ID 359) is:
 Π (M1), M2 = Π (N1), N2
subgoal 5 (ID 417) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 998)
  
  v : Vars
  n : nat
  m : nat
  l : m &lt;= v
  g : m &gt; n + v
  H : #(n + v) = #(n + v)
  ============================
   m &lt;= v

subgoal 2 (ID 999) is:
 v &lt; m
subgoal 3 (ID 924) is:
 #(n + v0) = #v0
subgoal 4 (ID 301) is:
 M1 · M2 = N1 · N2
subgoal 5 (ID 359) is:
 Π (M1), M2 = Π (N1), N2
subgoal 6 (ID 417) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 999)
  
  v : Vars
  n : nat
  m : nat
  l : m &lt;= v
  g : m &gt; n + v
  H : #(n + v) = #(n + v)
  ============================
   v &lt; m

subgoal 2 (ID 924) is:
 #(n + v0) = #v0
subgoal 3 (ID 301) is:
 M1 · M2 = N1 · N2
subgoal 4 (ID 359) is:
 Π (M1), M2 = Π (N1), N2
subgoal 5 (ID 417) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">induction</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 924)
  
  v0 : Vars
  n : nat
  m : nat
  l : m &lt;= v0
  g : m &gt; n + v0
  H : #(n + v0) = #(n + v0)
  ============================
   #(n + v0) = #v0

subgoal 2 (ID 301) is:
 M1 · M2 = N1 · N2
subgoal 3 (ID 359) is:
 Π (M1), M2 = Π (N1), N2
subgoal 4 (ID 417) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v0</span>). </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 1037)
  
  v0 : Vars
  n : nat
  m : nat
  l : m &lt;= v0
  g : m &gt; n + v0
  H : #(n + v0) = #(n + v0)
  ============================
   v0 &lt; v0

subgoal 2 (ID 301) is:
 M1 · M2 = N1 · N2
subgoal 3 (ID 359) is:
 Π (M1), M2 = Π (N1), N2
subgoal 4 (ID 417) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">m</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1038)
  
  v0 : Vars
  n : nat
  m : nat
  l : m &lt;= v0
  g : m &gt; n + v0
  H : #(n + v0) = #(n + v0)
  ============================
   v0 &lt; m

subgoal 2 (ID 1039) is:
 m &lt;= v0
subgoal 3 (ID 301) is:
 M1 · M2 = N1 · N2
subgoal 4 (ID 359) is:
 Π (M1), M2 = Π (N1), N2
subgoal 5 (ID 417) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">induction</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>4 subgoals, subgoal 1 (ID 1039)
  
  v0 : Vars
  n : nat
  m : nat
  l : m &lt;= v0
  g : m &gt; n + v0
  H : #(n + v0) = #(n + v0)
  ============================
   m &lt;= v0

subgoal 2 (ID 301) is:
 M1 · M2 = N1 · N2
subgoal 3 (ID 359) is:
 Π (M1), M2 = Π (N1), N2
subgoal 4 (ID 417) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 301)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (n m : nat), M1 ↑ n # m = N ↑ n # m -&gt; M1 = N
  IHM2 : forall (N : Term) (n m : nat), M2 ↑ n # m = N ↑ n # m -&gt; M2 = N
  N1 : Term
  N2 : Term
  n : nat
  m : nat
  H : M1 ↑ n # m · M2 ↑ n # m = N1 ↑ n # m · N2 ↑ n # m
  ============================
   M1 · M2 = N1 · N2

subgoal 2 (ID 359) is:
 Π (M1), M2 = Π (N1), N2
subgoal 3 (ID 417) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">injection</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">rewrite</span> (<span class="id" type="var">IHM1</span> <span class="id" type="var">N1</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">H1</span>); <span class="id" type="tactic">rewrite</span> (<span class="id" type="var">IHM2</span> <span class="id" type="var">N2</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">H0</span>); <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 359)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (n m : nat), M1 ↑ n # m = N ↑ n # m -&gt; M1 = N
  IHM2 : forall (N : Term) (n m : nat), M2 ↑ n # m = N ↑ n # m -&gt; M2 = N
  N1 : Term
  N2 : Term
  n : nat
  m : nat
  H : Π (M1 ↑ n # m), M2 ↑ n # (S m) = Π (N1 ↑ n # m), N2 ↑ n # (S m)
  ============================
   Π (M1), M2 = Π (N1), N2

subgoal 2 (ID 417) is:
 λ [M1], M2 = λ [N1], N2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">injection</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">rewrite</span> (<span class="id" type="var">IHM1</span> <span class="id" type="var">N1</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">H1</span>); <span class="id" type="tactic">rewrite</span> (<span class="id" type="var">IHM2</span> <span class="id" type="var">N2</span> <span class="id" type="var">n</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">m</span>) <span class="id" type="var">H0</span>); <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 417)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (n m : nat), M1 ↑ n # m = N ↑ n # m -&gt; M1 = N
  IHM2 : forall (N : Term) (n m : nat), M2 ↑ n # m = N ↑ n # m -&gt; M2 = N
  N1 : Term
  N2 : Term
  n : nat
  m : nat
  H : λ [M1 ↑ n # m], M2 ↑ n # (S m) = λ [N1 ↑ n # m], N2 ↑ n # (S m)
  ============================
   λ [M1], M2 = λ [N1], N2

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">injection</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">rewrite</span> (<span class="id" type="var">IHM1</span> <span class="id" type="var">N1</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">H1</span>); <span class="id" type="tactic">rewrite</span> (<span class="id" type="var">IHM2</span> <span class="id" type="var">N2</span> <span class="id" type="var">n</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">m</span>) <span class="id" type="var">H0</span>); <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>inv_lift is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="ut_term_mod.lift_rec0"><span class="id" type="lemma">lift_rec0</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">n</span>, <a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> 0 <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 1119)
  
  ============================
   forall (M : Term) (n : nat), M ↑ 0 # n = M

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">induction</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1153)
  
  v : Vars
  n : nat
  ============================
   (if le_gt_dec n v then #v else #v) = #v

subgoal 2 (ID 1154) is:
 !s = !s
subgoal 3 (ID 1155) is:
 M1 ↑ 0 # n · M2 ↑ 0 # n = M1 · M2
subgoal 4 (ID 1156) is:
 Π (M1 ↑ 0 # n), M2 ↑ 0 # (S n) = Π (M1), M2
subgoal 5 (ID 1157) is:
 λ [M1 ↑ 0 # n], M2 ↑ 0 # (S n) = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">n</span> <span class="id" type="var">v</span>); <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 1154)
  
  s : Sorts
  n : nat
  ============================
   !s = !s

subgoal 2 (ID 1155) is:
 M1 ↑ 0 # n · M2 ↑ 0 # n = M1 · M2
subgoal 3 (ID 1156) is:
 Π (M1 ↑ 0 # n), M2 ↑ 0 # (S n) = Π (M1), M2
subgoal 4 (ID 1157) is:
 λ [M1 ↑ 0 # n], M2 ↑ 0 # (S n) = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 1155)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 0 # n = M1
  IHM2 : forall n : nat, M2 ↑ 0 # n = M2
  n : nat
  ============================
   M1 ↑ 0 # n · M2 ↑ 0 # n = M1 · M2

subgoal 2 (ID 1156) is:
 Π (M1 ↑ 0 # n), M2 ↑ 0 # (S n) = Π (M1), M2
subgoal 3 (ID 1157) is:
 λ [M1 ↑ 0 # n], M2 ↑ 0 # (S n) = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>; <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 1156)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 0 # n = M1
  IHM2 : forall n : nat, M2 ↑ 0 # n = M2
  n : nat
  ============================
   Π (M1 ↑ 0 # n), M2 ↑ 0 # (S n) = Π (M1), M2

subgoal 2 (ID 1157) is:
 λ [M1 ↑ 0 # n], M2 ↑ 0 # (S n) = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>; <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 1157)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 0 # n = M1
  IHM2 : forall n : nat, M2 ↑ 0 # n = M2
  n : nat
  ============================
   λ [M1 ↑ 0 # n], M2 ↑ 0 # (S n) = λ [M1], M2

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>; <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>lift_rec0 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="ut_term_mod.lift0"><span class="id" type="lemma">lift0</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span>, <a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x"><span class="id" type="notation">↑</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a> .</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 1182)
  
  ============================
   forall M : Term, M ↑ 0 = M

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intros</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="ut_term.html#ut_term_mod.lift_rec0"><span class="id" type="lemma">lift_rec0</span></a>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>lift0 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="ut_term_mod.liftP1"><span class="id" type="lemma">liftP1</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span>  <span class="id" type="var">k</span>, <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="ut_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="ut_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="ut_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 1189)
  
  ============================
   forall (M : Term) (i j k : nat), M ↑ j # i ↑ k # (j + i) = M ↑ (j + k) # i

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intros</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">induction</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">intros</span>;<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1233)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  ============================
   (if le_gt_dec i v then #(j + v) else #v) ↑ k # (j + i) =
   (if le_gt_dec i v then #(j + k + v) else #v)

subgoal 2 (ID 1234) is:
 !s = !s
subgoal 3 (ID 1235) is:
 M1 ↑ j # i ↑ k # (j + i) · M2 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i · M2 ↑ (j + k) # i
subgoal 4 (ID 1236) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 5 (ID 1237) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">v</span>); <span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1248)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  l : i &lt;= v
  ============================
   (if le_gt_dec (j + i) (j + v) then #(k + (j + v)) else #(j + v)) =
   #(j + k + v)

subgoal 2 (ID 1249) is:
 (if le_gt_dec (j + i) v then #(k + v) else #v) = #v
subgoal 3 (ID 1234) is:
 !s = !s
subgoal 4 (ID 1235) is:
 M1 ↑ j # i ↑ k # (j + i) · M2 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i · M2 ↑ (j + k) # i
subgoal 5 (ID 1236) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 6 (ID 1237) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>) (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>)); <span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1260)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  l : i &lt;= v
  l0 : j + i &lt;= j + v
  ============================
   #(k + (j + v)) = #(j + k + v)

subgoal 2 (ID 1261) is:
 #(j + v) = #(j + k + v)
subgoal 3 (ID 1249) is:
 (if le_gt_dec (j + i) v then #(k + v) else #v) = #v
subgoal 4 (ID 1234) is:
 !s = !s
subgoal 5 (ID 1235) is:
 M1 ↑ j # i ↑ k # (j + i) · M2 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i · M2 ↑ (j + k) # i
subgoal 6 (ID 1236) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 7 (ID 1237) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_assoc"><span class="id" type="lemma">plus_assoc</span></a>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1262)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  l : i &lt;= v
  l0 : j + i &lt;= j + v
  ============================
   #(k + j + v) = #(j + k + v)

subgoal 2 (ID 1261) is:
 #(j + v) = #(j + k + v)
subgoal 3 (ID 1249) is:
 (if le_gt_dec (j + i) v then #(k + v) else #v) = #v
subgoal 4 (ID 1234) is:
 !s = !s
subgoal 5 (ID 1235) is:
 M1 ↑ j # i ↑ k # (j + i) · M2 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i · M2 ↑ (j + k) # i
subgoal 6 (ID 1236) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 7 (ID 1237) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">replace</span> (<span class="id" type="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>) <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">k</span>) <span class="id" type="tactic">by</span> (<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a>). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1266)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  l : i &lt;= v
  l0 : j + i &lt;= j + v
  ============================
   #(j + k + v) = #(j + k + v)

subgoal 2 (ID 1261) is:
 #(j + v) = #(j + k + v)
subgoal 3 (ID 1249) is:
 (if le_gt_dec (j + i) v then #(k + v) else #v) = #v
subgoal 4 (ID 1234) is:
 !s = !s
subgoal 5 (ID 1235) is:
 M1 ↑ j # i ↑ k # (j + i) · M2 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i · M2 ↑ (j + k) # i
subgoal 6 (ID 1236) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 7 (ID 1237) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1261)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  l : i &lt;= v
  g : j + i &gt; j + v
  ============================
   #(j + v) = #(j + k + v)

subgoal 2 (ID 1249) is:
 (if le_gt_dec (j + i) v then #(k + v) else #v) = #v
subgoal 3 (ID 1234) is:
 !s = !s
subgoal 4 (ID 1235) is:
 M1 ↑ j # i ↑ k # (j + i) · M2 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i · M2 ↑ (j + k) # i
subgoal 5 (ID 1236) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 6 (ID 1237) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Gt.html#plus_gt_reg_l"><span class="id" type="lemma">plus_gt_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1269)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  l : i &lt;= v
  g : i &gt; v
  ============================
   #(j + v) = #(j + k + v)

subgoal 2 (ID 1249) is:
 (if le_gt_dec (j + i) v then #(k + v) else #v) = #v
subgoal 3 (ID 1234) is:
 !s = !s
subgoal 4 (ID 1235) is:
 M1 ↑ j # i ↑ k # (j + i) · M2 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i · M2 ↑ (j + k) # i
subgoal 5 (ID 1236) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 6 (ID 1237) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>).</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1270)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  l : i &lt;= v
  g : i &gt; v
  ============================
   v &lt; v

subgoal 2 (ID 1249) is:
 (if le_gt_dec (j + i) v then #(k + v) else #v) = #v
subgoal 3 (ID 1234) is:
 !s = !s
subgoal 4 (ID 1235) is:
 M1 ↑ j # i ↑ k # (j + i) · M2 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i · M2 ↑ (j + k) # i
subgoal 5 (ID 1236) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 6 (ID 1237) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1249)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  g : i &gt; v
  ============================
   (if le_gt_dec (j + i) v then #(k + v) else #v) = #v

subgoal 2 (ID 1234) is:
 !s = !s
subgoal 3 (ID 1235) is:
 M1 ↑ j # i ↑ k # (j + i) · M2 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i · M2 ↑ (j + k) # i
subgoal 4 (ID 1236) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 5 (ID 1237) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1282)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  g : i &gt; v
  l : j + i &lt;= v
  ============================
   #(k + v) = #v

subgoal 2 (ID 1234) is:
 !s = !s
subgoal 3 (ID 1235) is:
 M1 ↑ j # i ↑ k # (j + i) · M2 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i · M2 ↑ (j + k) # i
subgoal 4 (ID 1236) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 5 (ID 1237) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>).</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1305)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  g : i &gt; v
  l : j + i &lt;= v
  ============================
   v &lt; v

subgoal 2 (ID 1234) is:
 !s = !s
subgoal 3 (ID 1235) is:
 M1 ↑ j # i ↑ k # (j + i) · M2 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i · M2 ↑ (j + k) # i
subgoal 4 (ID 1236) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 5 (ID 1237) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1307)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  g : i &gt; v
  l : j + i &lt;= v
  ============================
   i &lt;= v

subgoal 2 (ID 1234) is:
 !s = !s
subgoal 3 (ID 1235) is:
 M1 ↑ j # i ↑ k # (j + i) · M2 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i · M2 ↑ (j + k) # i
subgoal 4 (ID 1236) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 5 (ID 1237) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">induction</span> <span class="id" type="var">j</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 1234)
  
  s : Sorts
  i : nat
  j : nat
  k : nat
  ============================
   !s = !s

subgoal 2 (ID 1235) is:
 M1 ↑ j # i ↑ k # (j + i) · M2 ↑ j # i ↑ k # (j + i) =
 M1 ↑ (j + k) # i · M2 ↑ (j + k) # i
subgoal 3 (ID 1236) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 4 (ID 1237) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 1235)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i j k : nat, M1 ↑ j # i ↑ k # (j + i) = M1 ↑ (j + k) # i
  IHM2 : forall i j k : nat, M2 ↑ j # i ↑ k # (j + i) = M2 ↑ (j + k) # i
  i : nat
  j : nat
  k : nat
  ============================
   M1 ↑ j # i ↑ k # (j + i) · M2 ↑ j # i ↑ k # (j + i) =
   M1 ↑ (j + k) # i · M2 ↑ (j + k) # i

subgoal 2 (ID 1236) is:
 Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)
subgoal 3 (ID 1237) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>;<span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 1236)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i j k : nat, M1 ↑ j # i ↑ k # (j + i) = M1 ↑ (j + k) # i
  IHM2 : forall i j k : nat, M2 ↑ j # i ↑ k # (j + i) = M2 ↑ (j + k) # i
  i : nat
  j : nat
  k : nat
  ============================
   Π (M1 ↑ j # i ↑ k # (j + i)), M2 ↑ j # (S i) ↑ k # (S (j + i)) =
   Π (M1 ↑ (j + k) # i), M2 ↑ (j + k) # (S i)

subgoal 2 (ID 1237) is:
 λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
 λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">rewrite</span> &lt;-<span class="id" type="var">IHM2</span> ;<span class="id" type="tactic">replace</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 1237)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i j k : nat, M1 ↑ j # i ↑ k # (j + i) = M1 ↑ (j + k) # i
  IHM2 : forall i j k : nat, M2 ↑ j # i ↑ k # (j + i) = M2 ↑ (j + k) # i
  i : nat
  j : nat
  k : nat
  ============================
   λ [M1 ↑ j # i ↑ k # (j + i)], M2 ↑ j # (S i) ↑ k # (S (j + i)) =
   λ [M1 ↑ (j + k) # i], M2 ↑ (j + k) # (S i)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">IHM2</span> ;<span class="id" type="tactic">replace</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>liftP1 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="ut_term_mod.liftP2"><span class="id" type="lemma">liftP2</span></a>: <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span> <span class="id" type="var">k</span> <span class="id" type="var">n</span>, <a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> -&gt;<br>
  <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="ut_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 1396)
  
  ============================
   forall (M : Term) (i j k n : nat),
   i &lt;= n -&gt; M ↑ j # i ↑ k # (j + n) = M ↑ k # n ↑ j # i

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intro</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">induction</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1450)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  ============================
   (if le_gt_dec i v then #(j + v) else #v) ↑ k # (j + n) =
   (if le_gt_dec n v then #(k + v) else #v) ↑ j # i

subgoal 2 (ID 1451) is:
 !s = !s
subgoal 3 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 4 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 5 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">v</span>); <span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">n</span> <span class="id" type="var">v</span>).</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 1473)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  ============================
   #(j + v) ↑ k # (j + n) = #(k + v) ↑ j # i

subgoal 2 (ID 1474) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 3 (ID 1483) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 4 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1451) is:
 !s = !s
subgoal 6 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 7 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 8 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 1485)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  ============================
   (if le_gt_dec (j + n) (j + v) then #(k + (j + v)) else #(j + v)) =
   (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))

subgoal 2 (ID 1474) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 3 (ID 1483) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 4 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1451) is:
 !s = !s
subgoal 6 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 7 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 8 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 1494)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  l1 : j + n &lt;= j + v
  ============================
   #(k + (j + v)) =
   (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))

subgoal 2 (ID 1495) is:
 #(j + v) = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 3 (ID 1474) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1483) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 5 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 6 (ID 1451) is:
 !s = !s
subgoal 7 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 8 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 9 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>.</span><div class="output"><pre>10 subgoals, subgoal 1 (ID 1504)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  l1 : j + n &lt;= j + v
  l2 : i &lt;= k + v
  ============================
   #(k + (j + v)) = #(j + (k + v))

subgoal 2 (ID 1505) is:
 #(k + (j + v)) = #(k + v)
subgoal 3 (ID 1495) is:
 #(j + v) = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 4 (ID 1474) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1483) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 6 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 7 (ID 1451) is:
 !s = !s
subgoal 8 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 9 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 10 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> 2! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_assoc"><span class="id" type="lemma">plus_assoc</span></a>. </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 1507)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  l1 : j + n &lt;= j + v
  l2 : i &lt;= k + v
  ============================
   #(k + j + v) = #(j + k + v)

subgoal 2 (ID 1505) is:
 #(k + (j + v)) = #(k + v)
subgoal 3 (ID 1495) is:
 #(j + v) = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 4 (ID 1474) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1483) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 6 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 7 (ID 1451) is:
 !s = !s
subgoal 8 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 9 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 10 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">replace</span> (<span class="id" type="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>) <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">k</span>) <span class="id" type="tactic">by</span> (<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a>). </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 1511)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  l1 : j + n &lt;= j + v
  l2 : i &lt;= k + v
  ============================
   #(j + k + v) = #(j + k + v)

subgoal 2 (ID 1505) is:
 #(k + (j + v)) = #(k + v)
subgoal 3 (ID 1495) is:
 #(j + v) = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 4 (ID 1474) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1483) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 6 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 7 (ID 1451) is:
 !s = !s
subgoal 8 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 9 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 10 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>9 subgoals, subgoal 1 (ID 1505)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  l1 : j + n &lt;= j + v
  g : i &gt; k + v
  ============================
   #(k + (j + v)) = #(k + v)

subgoal 2 (ID 1495) is:
 #(j + v) = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 3 (ID 1474) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1483) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 5 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 6 (ID 1451) is:
 !s = !s
subgoal 7 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 8 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 9 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 1513)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  l1 : j + n &lt;= j + v
  g : i &gt; k + v
  ============================
   v &lt; v

subgoal 2 (ID 1495) is:
 #(j + v) = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 3 (ID 1474) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1483) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 5 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 6 (ID 1451) is:
 !s = !s
subgoal 7 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 8 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 9 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>. </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 1514)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  l1 : j + n &lt;= j + v
  g : i &gt; k + v
  ============================
   v &lt; i

subgoal 2 (ID 1515) is:
 i &lt;= v
subgoal 3 (ID 1495) is:
 #(j + v) = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 4 (ID 1474) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1483) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 6 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 7 (ID 1451) is:
 !s = !s
subgoal 8 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 9 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 10 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">induction</span> <span class="id" type="var">k</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 1515)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  l1 : j + n &lt;= j + v
  g : i &gt; k + v
  ============================
   i &lt;= v

subgoal 2 (ID 1495) is:
 #(j + v) = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 3 (ID 1474) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1483) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 5 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 6 (ID 1451) is:
 !s = !s
subgoal 7 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 8 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 9 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 1495)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  g : j + n &gt; j + v
  ============================
   #(j + v) = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))

subgoal 2 (ID 1474) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 3 (ID 1483) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 4 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1451) is:
 !s = !s
subgoal 6 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 7 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 8 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Gt.html#plus_gt_reg_l"><span class="id" type="lemma">plus_gt_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 1554)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  g : n &gt; v
  ============================
   #(j + v) = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))

subgoal 2 (ID 1474) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 3 (ID 1483) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 4 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1451) is:
 !s = !s
subgoal 6 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 7 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 8 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>).</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 1555)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt;= v
  g : n &gt; v
  ============================
   v &lt; v

subgoal 2 (ID 1474) is:
 #(j + v) ↑ k # (j + n) = #v ↑ j # i
subgoal 3 (ID 1483) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 4 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1451) is:
 !s = !s
subgoal 6 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 7 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 8 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1474)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  g : n &gt; v
  ============================
   #(j + v) ↑ k # (j + n) = #v ↑ j # i

subgoal 2 (ID 1483) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 3 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1451) is:
 !s = !s
subgoal 5 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 6 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 7 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1558)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  g : n &gt; v
  ============================
   (if le_gt_dec (j + n) (j + v) then #(k + (j + v)) else #(j + v)) =
   (if le_gt_dec i v then #(j + v) else #v)

subgoal 2 (ID 1483) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 3 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1451) is:
 !s = !s
subgoal 5 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 6 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 7 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 1567)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  g : n &gt; v
  l0 : j + n &lt;= j + v
  ============================
   #(k + (j + v)) = (if le_gt_dec i v then #(j + v) else #v)

subgoal 2 (ID 1568) is:
 #(j + v) = (if le_gt_dec i v then #(j + v) else #v)
subgoal 3 (ID 1483) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 4 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1451) is:
 !s = !s
subgoal 6 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 7 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 8 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_le_reg_l"><span class="id" type="lemma">plus_le_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 1570)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  g : n &gt; v
  l0 : n &lt;= v
  ============================
   #(k + (j + v)) = (if le_gt_dec i v then #(j + v) else #v)

subgoal 2 (ID 1568) is:
 #(j + v) = (if le_gt_dec i v then #(j + v) else #v)
subgoal 3 (ID 1483) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 4 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1451) is:
 !s = !s
subgoal 6 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 7 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 8 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>).</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 1571)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  g : n &gt; v
  l0 : n &lt;= v
  ============================
   v &lt; v

subgoal 2 (ID 1568) is:
 #(j + v) = (if le_gt_dec i v then #(j + v) else #v)
subgoal 3 (ID 1483) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 4 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1451) is:
 !s = !s
subgoal 6 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 7 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 8 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1568)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  g : n &gt; v
  g0 : j + n &gt; j + v
  ============================
   #(j + v) = (if le_gt_dec i v then #(j + v) else #v)

subgoal 2 (ID 1483) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 3 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1451) is:
 !s = !s
subgoal 5 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 6 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 7 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 1582)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  g : n &gt; v
  g0 : j + n &gt; j + v
  l0 : i &lt;= v
  ============================
   #(j + v) = #(j + v)

subgoal 2 (ID 1583) is:
 #(j + v) = #v
subgoal 3 (ID 1483) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 4 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1451) is:
 !s = !s
subgoal 6 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 7 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 8 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1583)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  g : n &gt; v
  g0 : j + n &gt; j + v
  g1 : i &gt; v
  ============================
   #(j + v) = #v

subgoal 2 (ID 1483) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 3 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1451) is:
 !s = !s
subgoal 5 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 6 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 7 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1584)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  g : n &gt; v
  g0 : j + n &gt; j + v
  g1 : i &gt; v
  ============================
   v &lt; v

subgoal 2 (ID 1483) is:
 #v ↑ k # (j + n) = #(k + v) ↑ j # i
subgoal 3 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1451) is:
 !s = !s
subgoal 5 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 6 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 7 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1483)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt;= v
  ============================
   #v ↑ k # (j + n) = #(k + v) ↑ j # i

subgoal 2 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 3 (ID 1451) is:
 !s = !s
subgoal 4 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 5 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 6 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1587)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt;= v
  ============================
   (if le_gt_dec (j + n) v then #(k + v) else #v) =
   (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))

subgoal 2 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 3 (ID 1451) is:
 !s = !s
subgoal 4 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 5 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 6 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1596)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt;= v
  l0 : j + n &lt;= v
  ============================
   #(k + v) = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))

subgoal 2 (ID 1597) is:
 #v = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 3 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1451) is:
 !s = !s
subgoal 5 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 6 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 7 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1598)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt;= v
  l0 : j + n &lt;= v
  ============================
   n &lt; n

subgoal 2 (ID 1597) is:
 #v = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 3 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1451) is:
 !s = !s
subgoal 5 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 6 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 7 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 1599)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt;= v
  l0 : j + n &lt;= v
  ============================
   n &lt; i

subgoal 2 (ID 1600) is:
 i &lt;= n
subgoal 3 (ID 1597) is:
 #v = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 4 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 5 (ID 1451) is:
 !s = !s
subgoal 6 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 7 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 8 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1600)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt;= v
  l0 : j + n &lt;= v
  ============================
   i &lt;= n

subgoal 2 (ID 1597) is:
 #v = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))
subgoal 3 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1451) is:
 !s = !s
subgoal 5 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 6 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 7 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1597)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt;= v
  g0 : j + n &gt; v
  ============================
   #v = (if le_gt_dec i (k + v) then #(j + (k + v)) else #(k + v))

subgoal 2 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 3 (ID 1451) is:
 !s = !s
subgoal 4 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 5 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 6 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>).</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1603)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt;= v
  g0 : j + n &gt; v
  ============================
   v &lt; v

subgoal 2 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 3 (ID 1451) is:
 !s = !s
subgoal 4 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 5 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 6 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1604)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt;= v
  g0 : j + n &gt; v
  ============================
   v &lt; n

subgoal 2 (ID 1605) is:
 n &lt;= v
subgoal 3 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 4 (ID 1451) is:
 !s = !s
subgoal 5 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 6 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 7 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1605)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt;= v
  g0 : j + n &gt; v
  ============================
   n &lt;= v

subgoal 2 (ID 1484) is:
 #v ↑ k # (j + n) = #v ↑ j # i
subgoal 3 (ID 1451) is:
 !s = !s
subgoal 4 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 5 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 6 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1484)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  g0 : n &gt; v
  ============================
   #v ↑ k # (j + n) = #v ↑ j # i

subgoal 2 (ID 1451) is:
 !s = !s
subgoal 3 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 4 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 5 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1608)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  g0 : n &gt; v
  ============================
   (if le_gt_dec (j + n) v then #(k + v) else #v) =
   (if le_gt_dec i v then #(j + v) else #v)

subgoal 2 (ID 1451) is:
 !s = !s
subgoal 3 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 4 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 5 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1617)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  g0 : n &gt; v
  l : j + n &lt;= v
  ============================
   #(k + v) = (if le_gt_dec i v then #(j + v) else #v)

subgoal 2 (ID 1618) is:
 #v = (if le_gt_dec i v then #(j + v) else #v)
subgoal 3 (ID 1451) is:
 !s = !s
subgoal 4 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 5 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 6 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1619)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  g0 : n &gt; v
  l : j + n &lt;= v
  ============================
   v &lt; v

subgoal 2 (ID 1618) is:
 #v = (if le_gt_dec i v then #(j + v) else #v)
subgoal 3 (ID 1451) is:
 !s = !s
subgoal 4 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 5 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 6 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1620)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  g0 : n &gt; v
  l : j + n &lt;= v
  ============================
   v &lt; n

subgoal 2 (ID 1621) is:
 n &lt;= v
subgoal 3 (ID 1618) is:
 #v = (if le_gt_dec i v then #(j + v) else #v)
subgoal 4 (ID 1451) is:
 !s = !s
subgoal 5 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 6 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 7 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1621)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  g0 : n &gt; v
  l : j + n &lt;= v
  ============================
   n &lt;= v

subgoal 2 (ID 1618) is:
 #v = (if le_gt_dec i v then #(j + v) else #v)
subgoal 3 (ID 1451) is:
 !s = !s
subgoal 4 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 5 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 6 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">induction</span> <span class="id" type="var">j</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1618)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  g0 : n &gt; v
  g1 : j + n &gt; v
  ============================
   #v = (if le_gt_dec i v then #(j + v) else #v)

subgoal 2 (ID 1451) is:
 !s = !s
subgoal 3 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 4 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 5 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1656)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  g0 : n &gt; v
  g1 : j + n &gt; v
  l : i &lt;= v
  ============================
   #v = #(j + v)

subgoal 2 (ID 1657) is:
 #v = #v
subgoal 3 (ID 1451) is:
 !s = !s
subgoal 4 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 5 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 6 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>).</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1658)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  g0 : n &gt; v
  g1 : j + n &gt; v
  l : i &lt;= v
  ============================
   i &lt; i

subgoal 2 (ID 1657) is:
 #v = #v
subgoal 3 (ID 1451) is:
 !s = !s
subgoal 4 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 5 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 6 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1657)
  
  v : Vars
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  g0 : n &gt; v
  g1 : j + n &gt; v
  g2 : i &gt; v
  ============================
   #v = #v

subgoal 2 (ID 1451) is:
 !s = !s
subgoal 3 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 4 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 5 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 1451)
  
  s : Sorts
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  ============================
   !s = !s

subgoal 2 (ID 1452) is:
 M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
 M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i
subgoal 3 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 4 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 1452)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i j k n : nat,
         i &lt;= n -&gt; M1 ↑ j # i ↑ k # (j + n) = M1 ↑ k # n ↑ j # i
  IHM2 : forall i j k n : nat,
         i &lt;= n -&gt; M2 ↑ j # i ↑ k # (j + n) = M2 ↑ k # n ↑ j # i
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  ============================
   M1 ↑ j # i ↑ k # (j + n) · M2 ↑ j # i ↑ k # (j + n) =
   M1 ↑ k # n ↑ j # i · M2 ↑ k # n ↑ j # i

subgoal 2 (ID 1453) is:
 Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)
subgoal 3 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>;  <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>; <span class="id" type="tactic">intuition</span>;  <span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 1453)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i j k n : nat,
         i &lt;= n -&gt; M1 ↑ j # i ↑ k # (j + n) = M1 ↑ k # n ↑ j # i
  IHM2 : forall i j k n : nat,
         i &lt;= n -&gt; M2 ↑ j # i ↑ k # (j + n) = M2 ↑ k # n ↑ j # i
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  ============================
   Π (M1 ↑ j # i ↑ k # (j + n)), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
   Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)

subgoal 2 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 1679)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i j k n : nat,
         i &lt;= n -&gt; M1 ↑ j # i ↑ k # (j + n) = M1 ↑ k # n ↑ j # i
  IHM2 : forall i j k n : nat,
         i &lt;= n -&gt; M2 ↑ j # i ↑ k # (j + n) = M2 ↑ k # n ↑ j # i
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  ============================
   Π (M1 ↑ k # n ↑ j # i), M2 ↑ j # (S i) ↑ k # (S (j + n)) =
   Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)

subgoal 2 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)) <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 1697)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i j k n : nat,
         i &lt;= n -&gt; M1 ↑ j # i ↑ k # (j + n) = M1 ↑ k # n ↑ j # i
  IHM2 : forall i j k n : nat,
         i &lt;= n -&gt; M2 ↑ j # i ↑ k # (j + n) = M2 ↑ k # n ↑ j # i
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  ============================
   Π (M1 ↑ k # n ↑ j # i), M2 ↑ j # (S i) ↑ k # (j + S n) =
   Π (M1 ↑ k # n ↑ j # i), M2 ↑ k # (S n) ↑ j # (S i)

subgoal 2 (ID 1454) is:
 λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
 λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> (<span class="id" type="var">IHM2</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>) <span class="id" type="var">j</span> <span class="id" type="var">k</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 1454)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i j k n : nat,
         i &lt;= n -&gt; M1 ↑ j # i ↑ k # (j + n) = M1 ↑ k # n ↑ j # i
  IHM2 : forall i j k n : nat,
         i &lt;= n -&gt; M2 ↑ j # i ↑ k # (j + n) = M2 ↑ k # n ↑ j # i
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  ============================
   λ [M1 ↑ j # i ↑ k # (j + n)], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
   λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 1729)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i j k n : nat,
         i &lt;= n -&gt; M1 ↑ j # i ↑ k # (j + n) = M1 ↑ k # n ↑ j # i
  IHM2 : forall i j k n : nat,
         i &lt;= n -&gt; M2 ↑ j # i ↑ k # (j + n) = M2 ↑ k # n ↑ j # i
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  ============================
   λ [M1 ↑ k # n ↑ j # i], M2 ↑ j # (S i) ↑ k # (S (j + n)) =
   λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)) <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 1747)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i j k n : nat,
         i &lt;= n -&gt; M1 ↑ j # i ↑ k # (j + n) = M1 ↑ k # n ↑ j # i
  IHM2 : forall i j k n : nat,
         i &lt;= n -&gt; M2 ↑ j # i ↑ k # (j + n) = M2 ↑ k # n ↑ j # i
  i : nat
  j : nat
  k : nat
  n : nat
  H : i &lt;= n
  ============================
   λ [M1 ↑ k # n ↑ j # i], M2 ↑ j # (S i) ↑ k # (j + S n) =
   λ [M1 ↑ k # n ↑ j # i], M2 ↑ k # (S n) ↑ j # (S i)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> (<span class="id" type="var">IHM2</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>) <span class="id" type="var">j</span> <span class="id" type="var">k</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) ); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>liftP2 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="ut_term_mod.liftP3"><span class="id" type="lemma">liftP3</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">i</span> <span class="id" type="var">k</span> <span class="id" type="var">j</span> <span class="id" type="var">n</span> , <a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="ut_term.html#k"><span class="id" type="variable">k</span></a> -&gt; <a class="idref" href="ut_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">(</span></a><a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">)</span></a> -&gt;<br>
  <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="ut_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 1785)
  
  ============================
   forall (M : Term) (i k j n : nat),
   i &lt;= k -&gt; k &lt;= i + n -&gt; M ↑ n # i ↑ j # k = M ↑ (j + n) # i

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intro</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">induction</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1844)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   (if le_gt_dec i v then #(n + v) else #v) ↑ j # k =
   (if le_gt_dec i v then #(j + n + v) else #v)

subgoal 2 (ID 1845) is:
 !s = !s
subgoal 3 (ID 1846) is:
 M1 ↑ n # i ↑ j # k · M2 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i · M2 ↑ (j + n) # i
subgoal 4 (ID 1847) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 5 (ID 1848) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">v</span>); <span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1859)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  ============================
   (if le_gt_dec k (n + v) then #(j + (n + v)) else #(n + v)) = #(j + n + v)

subgoal 2 (ID 1860) is:
 (if le_gt_dec k v then #(j + v) else #v) = #v
subgoal 3 (ID 1845) is:
 !s = !s
subgoal 4 (ID 1846) is:
 M1 ↑ n # i ↑ j # k · M2 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i · M2 ↑ (j + n) # i
subgoal 5 (ID 1847) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 6 (ID 1848) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">k</span> (<span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>)); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1870)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  g : k &gt; n + v
  ============================
   #(n + v) = #(j + n + v)

subgoal 2 (ID 1860) is:
 (if le_gt_dec k v then #(j + v) else #v) = #v
subgoal 3 (ID 1845) is:
 !s = !s
subgoal 4 (ID 1846) is:
 M1 ↑ n # i ↑ j # k · M2 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i · M2 ↑ (j + n) # i
subgoal 5 (ID 1847) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 6 (ID 1848) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)). </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1918)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  g : k &gt; n + v
  ============================
   i + n &lt; i + n

subgoal 2 (ID 1860) is:
 (if le_gt_dec k v then #(j + v) else #v) = #v
subgoal 3 (ID 1845) is:
 !s = !s
subgoal 4 (ID 1846) is:
 M1 ↑ n # i ↑ j # k · M2 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i · M2 ↑ (j + n) # i
subgoal 5 (ID 1847) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 6 (ID 1848) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">k</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1919)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  g : k &gt; n + v
  ============================
   i + n &lt; k

subgoal 2 (ID 1920) is:
 k &lt;= i + n
subgoal 3 (ID 1860) is:
 (if le_gt_dec k v then #(j + v) else #v) = #v
subgoal 4 (ID 1845) is:
 !s = !s
subgoal 5 (ID 1846) is:
 M1 ↑ n # i ↑ j # k · M2 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i · M2 ↑ (j + n) # i
subgoal 6 (ID 1847) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 7 (ID 1848) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 1921)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  g : k &gt; n + v
  ============================
   i + n &lt;= n + v

subgoal 2 (ID 1922) is:
 n + v &lt; k
subgoal 3 (ID 1920) is:
 k &lt;= i + n
subgoal 4 (ID 1860) is:
 (if le_gt_dec k v then #(j + v) else #v) = #v
subgoal 5 (ID 1845) is:
 !s = !s
subgoal 6 (ID 1846) is:
 M1 ↑ n # i ↑ j # k · M2 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i · M2 ↑ (j + n) # i
subgoal 7 (ID 1847) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 8 (ID 1848) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 1923)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  g : k &gt; n + v
  ============================
   n + i &lt;= n + v

subgoal 2 (ID 1922) is:
 n + v &lt; k
subgoal 3 (ID 1920) is:
 k &lt;= i + n
subgoal 4 (ID 1860) is:
 (if le_gt_dec k v then #(j + v) else #v) = #v
subgoal 5 (ID 1845) is:
 !s = !s
subgoal 6 (ID 1846) is:
 M1 ↑ n # i ↑ j # k · M2 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i · M2 ↑ (j + n) # i
subgoal 7 (ID 1847) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 8 (ID 1848) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1922)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  g : k &gt; n + v
  ============================
   n + v &lt; k

subgoal 2 (ID 1920) is:
 k &lt;= i + n
subgoal 3 (ID 1860) is:
 (if le_gt_dec k v then #(j + v) else #v) = #v
subgoal 4 (ID 1845) is:
 !s = !s
subgoal 5 (ID 1846) is:
 M1 ↑ n # i ↑ j # k · M2 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i · M2 ↑ (j + n) # i
subgoal 6 (ID 1847) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 7 (ID 1848) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1920)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  g : k &gt; n + v
  ============================
   k &lt;= i + n

subgoal 2 (ID 1860) is:
 (if le_gt_dec k v then #(j + v) else #v) = #v
subgoal 3 (ID 1845) is:
 !s = !s
subgoal 4 (ID 1846) is:
 M1 ↑ n # i ↑ j # k · M2 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i · M2 ↑ (j + n) # i
subgoal 5 (ID 1847) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 6 (ID 1848) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1860)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  ============================
   (if le_gt_dec k v then #(j + v) else #v) = #v

subgoal 2 (ID 1845) is:
 !s = !s
subgoal 3 (ID 1846) is:
 M1 ↑ n # i ↑ j # k · M2 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i · M2 ↑ (j + n) # i
subgoal 4 (ID 1847) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 5 (ID 1848) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">k</span> <span class="id" type="var">v</span>); <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1950)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt;= v
  ============================
   #(j + v) = #v

subgoal 2 (ID 1845) is:
 !s = !s
subgoal 3 (ID 1846) is:
 M1 ↑ n # i ↑ j # k · M2 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i · M2 ↑ (j + n) # i
subgoal 4 (ID 1847) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 5 (ID 1848) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">k</span>).</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1976)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt;= v
  ============================
   k &lt; k

subgoal 2 (ID 1845) is:
 !s = !s
subgoal 3 (ID 1846) is:
 M1 ↑ n # i ↑ j # k · M2 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i · M2 ↑ (j + n) # i
subgoal 4 (ID 1847) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 5 (ID 1848) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1977)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt;= v
  ============================
   k &lt; i

subgoal 2 (ID 1978) is:
 i &lt;= k
subgoal 3 (ID 1845) is:
 !s = !s
subgoal 4 (ID 1846) is:
 M1 ↑ n # i ↑ j # k · M2 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i · M2 ↑ (j + n) # i
subgoal 5 (ID 1847) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 6 (ID 1848) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 1979)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt;= v
  ============================
   k &lt;= v

subgoal 2 (ID 1980) is:
 v &lt; i
subgoal 3 (ID 1978) is:
 i &lt;= k
subgoal 4 (ID 1845) is:
 !s = !s
subgoal 5 (ID 1846) is:
 M1 ↑ n # i ↑ j # k · M2 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i · M2 ↑ (j + n) # i
subgoal 6 (ID 1847) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 7 (ID 1848) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 1980)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt;= v
  ============================
   v &lt; i

subgoal 2 (ID 1978) is:
 i &lt;= k
subgoal 3 (ID 1845) is:
 !s = !s
subgoal 4 (ID 1846) is:
 M1 ↑ n # i ↑ j # k · M2 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i · M2 ↑ (j + n) # i
subgoal 5 (ID 1847) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 6 (ID 1848) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 1978)
  
  v : Vars
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt;= v
  ============================
   i &lt;= k

subgoal 2 (ID 1845) is:
 !s = !s
subgoal 3 (ID 1846) is:
 M1 ↑ n # i ↑ j # k · M2 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i · M2 ↑ (j + n) # i
subgoal 4 (ID 1847) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 5 (ID 1848) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 1845)
  
  s : Sorts
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   !s = !s

subgoal 2 (ID 1846) is:
 M1 ↑ n # i ↑ j # k · M2 ↑ n # i ↑ j # k =
 M1 ↑ (j + n) # i · M2 ↑ (j + n) # i
subgoal 3 (ID 1847) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 4 (ID 1848) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 1846)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ n # i ↑ j # k = M1 ↑ (j + n) # i
  IHM2 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ n # i ↑ j # k = M2 ↑ (j + n) # i
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   M1 ↑ n # i ↑ j # k · M2 ↑ n # i ↑ j # k =
   M1 ↑ (j + n) # i · M2 ↑ (j + n) # i

subgoal 2 (ID 1847) is:
 Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
 Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)
subgoal 3 (ID 1848) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 1847)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ n # i ↑ j # k = M1 ↑ (j + n) # i
  IHM2 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ n # i ↑ j # k = M2 ↑ (j + n) # i
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   Π (M1 ↑ n # i ↑ j # k), M2 ↑ n # (S i) ↑ j # (S k) =
   Π (M1 ↑ (j + n) # i), M2 ↑ (j + n) # (S i)

subgoal 2 (ID 1848) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 2022)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ n # i ↑ j # k = M1 ↑ (j + n) # i
  IHM2 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ n # i ↑ j # k = M2 ↑ (j + n) # i
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   S k &lt;= S i + n

subgoal 2 (ID 1848) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <span class="id" type="var">n</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)). </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 2225)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ n # i ↑ j # k = M1 ↑ (j + n) # i
  IHM2 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ n # i ↑ j # k = M2 ↑ (j + n) # i
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   S k &lt;= S (i + n)

subgoal 2 (ID 1848) is:
 λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
 λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 1848)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ n # i ↑ j # k = M1 ↑ (j + n) # i
  IHM2 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ n # i ↑ j # k = M2 ↑ (j + n) # i
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   λ [M1 ↑ n # i ↑ j # k], M2 ↑ n # (S i) ↑ j # (S k) =
   λ [M1 ↑ (j + n) # i], M2 ↑ (j + n) # (S i)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 2258)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ n # i ↑ j # k = M1 ↑ (j + n) # i
  IHM2 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ n # i ↑ j # k = M2 ↑ (j + n) # i
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   S k &lt;= S i + n

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <span class="id" type="var">n</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)). </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 2461)
  
  M1 : Term
  M2 : Term
  IHM1 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ n # i ↑ j # k = M1 ↑ (j + n) # i
  IHM2 : forall i k j n : nat,
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ n # i ↑ j # k = M2 ↑ (j + n) # i
  i : nat
  k : nat
  j : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   S k &lt;= S (i + n)

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>liftP3 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="ut_term_mod.lift_lift"><span class="id" type="lemma">lift_lift</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span>, <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x"><span class="id" type="notation">(</span></a><a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#m"><span class="id" type="variable">m</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x"><span class="id" type="notation">(</span></a><a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="ut_term.html#m"><span class="id" type="variable">m</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x"><span class="id" type="notation">)</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 2479)
  
  ============================
   forall (M : Term) (n m : nat), M ↑ m ↑ n = M ↑ (n + m)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intros</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 2482)
  
  M : Term
  n : nat
  m : nat
  ============================
   M ↑ m ↑ n = M ↑ (n + m)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="ut_term.html#ut_term_mod.liftP3"><span class="id" type="lemma">liftP3</span></a>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>lift_lift is defined

</pre></div>
<span class="command"><br>

<br>
</span><div class="output"><pre></pre></div>
</div>

<div>
We will consider the usual implicit substitution without variable capture
(this is where the lift operator comes in handy).
  <span class="inlinecode"></span> <span class="inlinecode"><a class="idref" href="f_equivalence.html#M"><span class="id" type="variable">M</span></a></span> <span class="inlinecode">[</span> <span class="inlinecode"><a class="idref" href="env.html#n"><span class="id" type="variable">n</span></a></span> <span class="inlinecode">←</span> <span class="inlinecode"><a class="idref" href="f_equivalence.html#N"><span class="id" type="variable">N</span></a></span> <span class="inlinecode">]</span> <span class="inlinecode"></span> replace the variable <span class="inlinecode"><a class="idref" href="env.html#n"><span class="id" type="variable">n</span></a></span> in <span class="inlinecode"><a class="idref" href="f_equivalence.html#M"><span class="id" type="variable">M</span></a></span> by the term <span class="inlinecode"><a class="idref" href="f_equivalence.html#N"><span class="id" type="variable">N</span></a></span>.
  
</div>
<div>
<span class="command">
<span class="id" type="keyword">Reserved Notation</span> "t [ x ← u ]" (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 5, <span class="id" type="var">x</span> <span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 0, <span class="id" type="tactic">left</span> <span class="id" type="keyword">associativity</span>).</span><div class="output"><pre></pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Fixpoint</span> <a name="ut_term_mod.subst_rec"><span class="id" type="definition">subst_rec</span></a> <span class="id" type="var">U</span> <span class="id" type="var">T</span> <span class="id" type="var">n</span> {<span class="id" type="keyword">struct</span> <span class="id" type="var">T</span>} :=<br>
 <span class="id" type="keyword">match</span> <a class="idref" href="ut_term.html#T"><span class="id" type="variable">T</span></a> <span class="id" type="keyword">with</span><br>
  | <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'#'_x"><span class="id" type="notation">#</span></a> <span class="id" type="var">x</span> =&gt; <span class="id" type="keyword">match</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">x</span> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a>) <span class="id" type="keyword">with</span><br>
      | <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Specif.html#inleft"><span class="id" type="constructor">inleft</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Specif.html#left"><span class="id" type="constructor">left</span></a> <span class="id" type="var">_</span>) =&gt; <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'#'_x"><span class="id" type="notation">#</span></a> <span class="id" type="var">x</span> <br>
      | <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Specif.html#inleft"><span class="id" type="constructor">inleft</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Specif.html#right"><span class="id" type="constructor">right</span></a> <span class="id" type="var">_</span>) =&gt; <a class="idref" href="ut_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a>  <br>
      | <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Specif.html#inright"><span class="id" type="constructor">inright</span></a> <span class="id" type="var">_</span> =&gt; <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'#'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a> 1<a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'#'_x"><span class="id" type="notation">)</span></a> <br>
      <span class="id" type="keyword">end</span><br>
  | <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'!'_x"><span class="id" type="notation">!</span></a> <span class="id" type="var">s</span> =&gt; <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'!'_x"><span class="id" type="notation">!</span></a> <span class="id" type="var">s</span><br>
  | <span class="id" type="var">M</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%C2%B7'_x"><span class="id" type="notation">·</span></a> <span class="id" type="var">N</span> =&gt; <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%C2%B7'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">M</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="ut_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%C2%B7'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%C2%B7'_x"><span class="id" type="notation">·</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%C2%B7'_x"><span class="id" type="notation">(</span></a> <span class="id" type="var">N</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="ut_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%C2%B7'_x"><span class="id" type="notation">)</span></a> <br>
  | <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">Π</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">(</span></a> <span class="id" type="var">A</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">),</span></a> <span class="id" type="var">B</span> =&gt; <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">Π</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">(</span></a> <span class="id" type="var">A</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="ut_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">),</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">(</span></a><span class="id" type="var">B</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="ut_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%A0'_'('_x_')'_','_x"><span class="id" type="notation">)</span></a> <br>
  | <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">λ</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">[</span></a> <span class="id" type="var">A</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">],</span></a> <span class="id" type="var">M</span> =&gt; <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">λ</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">[</span></a> <span class="id" type="var">A</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="ut_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">],</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">(</span></a><span class="id" type="var">M</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="ut_term.html#U"><span class="id" type="variable">U</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'%CE%BB'_'%5B'_x_'%5D'_','_x"><span class="id" type="notation">)</span></a> <br>
<span class="id" type="keyword">end</span><br>
    <span class="id" type="keyword">where</span> <a name="ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">"</span></a> t [ n ← w ] " := (<a class="idref" href="ut_term.html#subst_rec"><span class="id" type="definition">subst_rec</span></a> <span class="id" type="var">w</span> <span class="id" type="var">t</span> <span class="id" type="var">n</span>) : <span class="id" type="var">UT_scope</span>.</span><div class="output"><pre>subst_rec is recursively defined (decreasing on 2nd argument)

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Notation</span> <a name="ut_term_mod.:UT_scope:x_'%5B'_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">"</span></a> t [ ← w ] " := (<a class="idref" href="ut_term.html#ut_term_mod.subst_rec"><span class="id" type="definition">subst_rec</span></a> <span class="id" type="var">w</span> <span class="id" type="var">t</span> 0) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 5) : <span class="id" type="var">UT_scope</span>.</span><div class="output"><pre></pre></div>
<span class="command"><br>

<br>
</span><div class="output"><pre></pre></div>
</div>

<div>
Some basic properties of the substitution function. Again, we will only need
a few functions to deal with indexes. 
</div>
<div>
<span class="command">

<br>
<span class="id" type="keyword">Lemma</span> <a name="ut_term_mod.substP1"><span class="id" type="lemma">substP1</span></a>: <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span> <span class="id" type="var">k</span> , <br>
  <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a> <a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="ut_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="ut_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="ut_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="ut_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a>)<a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="ut_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="ut_term.html#N"><span class="id" type="variable">N</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 2505)
  
  ============================
   forall (M N : Term) (i j k : nat),
   M [j ← N] ↑ k # (j + i) = M ↑ k # (S (j + i)) [j ← N ↑ k # i]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intros</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">induction</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">intros</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 2537)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   #v [j ← N] ↑ k # (j + i) = #v ↑ k # (S (j + i)) [j ← N ↑ k # i]

subgoal 2 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span> (<a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'#'_x"><span class="id" type="notation">#</span></a><span class="id" type="var">v</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><span class="id" type="var">j</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <span class="id" type="var">N</span><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <span class="id" type="var">k</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a>).</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 2554)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ j
   | inright _ =&gt; #(v - 1)
   end ↑ k # (j + i) = #v ↑ k # (S (j + i)) [j ← N ↑ k # i]

subgoal 2 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">change</span> (<a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'#'_x"><span class="id" type="notation">#</span></a><span class="id" type="var">v</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <span class="id" type="var">k</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)<a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="keyword">with</span>  (<span class="id" type="keyword">if</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)) <span class="id" type="var">v</span> <span class="id" type="keyword">then</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'#'_x"><span class="id" type="notation">#(</span></a><span class="id" type="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'#'_x"><span class="id" type="notation">)</span></a> <span class="id" type="keyword">else</span> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'#'_x"><span class="id" type="notation">#</span></a><span class="id" type="var">v</span>).</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 2557)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ j
   | inright _ =&gt; #(v - 1)
   end ↑ k # (j + i) =
   (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]

subgoal 2 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">j</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 2571)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  ============================
   #v ↑ k # (j + i) =
   (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]

subgoal 2 (ID 2572) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 3 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)) <span class="id" type="var">v</span>).</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 2582)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  l0 : S (j + i) &lt;= v
  ============================
   #v ↑ k # (j + i) = #(k + v) [j ← N ↑ k # i]

subgoal 2 (ID 2583) is:
 #v ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 2572) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 2584)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  l0 : S (j + i) &lt;= v
  ============================
   v &lt; v

subgoal 2 (ID 2583) is:
 #v ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 2572) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">j</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 2586)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  l0 : S (j + i) &lt;= v
  ============================
   j &lt;= v

subgoal 2 (ID 2583) is:
 #v ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 2572) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Le.html#le_trans"><span class="id" type="lemma">le_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 2583)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  ============================
   #v ↑ k # (j + i) = #v [j ← N ↑ k # i]

subgoal 2 (ID 2572) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 3 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 2621)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  ============================
   (if le_gt_dec (j + i) v then #(k + v) else #v) =
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ k # i ↑ j
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 2572) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 3 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>) <span class="id" type="var">v</span>).</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 2630)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v
  ============================
   #(k + v) =
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ k # i ↑ j
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 2631) is:
 #v =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 2572) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 2632)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v
  ============================
   v &lt; v

subgoal 2 (ID 2631) is:
 #v =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 2572) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">j</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 2634)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v
  ============================
   j &lt;= v

subgoal 2 (ID 2631) is:
 #v =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 2572) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Le.html#le_trans"><span class="id" type="lemma">le_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 2631)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  g0 : j + i &gt; v
  ============================
   #v =
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ k # i ↑ j
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 2572) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 3 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">j</span>) <span class="id" type="keyword">as</span> [[] | ]. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 2678)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  g0 : j + i &gt; v
  l0 : v &lt; j
  ============================
   #v = #v

subgoal 2 (ID 2679) is:
 #v = N ↑ k # i ↑ j
subgoal 3 (ID 2680) is:
 #v = #(v - 1)
subgoal 4 (ID 2572) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 6 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 9 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 2679)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  g0 : j + i &gt; v
  e : v = j
  ============================
   #v = N ↑ k # i ↑ j

subgoal 2 (ID 2680) is:
 #v = #(v - 1)
subgoal 3 (ID 2572) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 2687)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; j
  g : S (j + i) &gt; j
  g0 : j + i &gt; j
  ============================
   #j = N ↑ k # i ↑ j

subgoal 2 (ID 2680) is:
 #v = #(v - 1)
subgoal 3 (ID 2572) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>);<span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 2680)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : v &lt; j
  g : S (j + i) &gt; v
  g0 : j + i &gt; v
  l0 : j &lt; v
  ============================
   #v = #(v - 1)

subgoal 2 (ID 2572) is:
 N ↑ j ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 3 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>); <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 2572)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  e : v = j
  ============================
   N ↑ j ↑ k # (j + i) =
   (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]

subgoal 2 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 3 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)) <span class="id" type="var">v</span>). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 2700)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  e : v = j
  l : S (j + i) &lt;= v
  ============================
   N ↑ j ↑ k # (j + i) = #(k + v) [j ← N ↑ k # i]

subgoal 2 (ID 2701) is:
 N ↑ j ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 2706)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : S (j + i) &lt;= j
  ============================
   N ↑ j ↑ k # (j + i) = #(k + j) [j ← N ↑ k # i]

subgoal 2 (ID 2701) is:
 N ↑ j ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 2707)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : S (j + i) &lt;= j
  ============================
   j &lt; j

subgoal 2 (ID 2701) is:
 N ↑ j ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 2708)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : S (j + i) &lt;= j
  ============================
   j &lt; S (j + i)

subgoal 2 (ID 2709) is:
 S (j + i) &lt;= j
subgoal 3 (ID 2701) is:
 N ↑ j ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 4 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 2709)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : S (j + i) &lt;= j
  ============================
   S (j + i) &lt;= j

subgoal 2 (ID 2701) is:
 N ↑ j ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 2701)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  e : v = j
  g : S (j + i) &gt; v
  ============================
   N ↑ j ↑ k # (j + i) = #v [j ← N ↑ k # i]

subgoal 2 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 3 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 2749)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  e : v = j
  g : S (j + i) &gt; v
  ============================
   N ↑ j ↑ k # (j + i) =
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ k # i ↑ j
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 3 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">j</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 2763)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  e : v = j
  g : S (j + i) &gt; v
  l : v &lt; j
  ============================
   N ↑ j ↑ k # (j + i) = #v

subgoal 2 (ID 2764) is:
 N ↑ j ↑ k # (j + i) = N ↑ k # i ↑ j
subgoal 3 (ID 2765) is:
 N ↑ j ↑ k # (j + i) = #(v - 1)
subgoal 4 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 2771)
  
  N : Term
  i : nat
  j : nat
  k : nat
  g : S (j + i) &gt; j
  l : j &lt; j
  ============================
   N ↑ j ↑ k # (j + i) = #j

subgoal 2 (ID 2764) is:
 N ↑ j ↑ k # (j + i) = N ↑ k # i ↑ j
subgoal 3 (ID 2765) is:
 N ↑ j ↑ k # (j + i) = #(v - 1)
subgoal 4 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 5 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 2764)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  e : v = j
  g : S (j + i) &gt; v
  e0 : v = j
  ============================
   N ↑ j ↑ k # (j + i) = N ↑ k # i ↑ j

subgoal 2 (ID 2765) is:
 N ↑ j ↑ k # (j + i) = #(v - 1)
subgoal 3 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="ut_term.html#ut_term_mod.liftP2"><span class="id" type="lemma">liftP2</span></a>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 2765)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  e : v = j
  g : S (j + i) &gt; v
  l : j &lt; v
  ============================
   N ↑ j ↑ k # (j + i) = #(v - 1)

subgoal 2 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 3 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 2788)
  
  N : Term
  i : nat
  j : nat
  k : nat
  g : S (j + i) &gt; j
  l : j &lt; j
  ============================
   N ↑ j ↑ k # (j + i) = #(j - 1)

subgoal 2 (ID 2573) is:
 #(v - 1) ↑ k # (j + i) =
 (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]
subgoal 3 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 2573)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  ============================
   #(v - 1) ↑ k # (j + i) =
   (if le_gt_dec (S (j + i)) v then #(k + v) else #v) [j ← N ↑ k # i]

subgoal 2 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)) <span class="id" type="var">v</span>).</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 2798)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  ============================
   #(v - 1) ↑ k # (j + i) = #(k + v) [j ← N ↑ k # i]

subgoal 2 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 2800)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  ============================
   (if le_gt_dec (j + i) (v - 1) then #(k + (v - 1)) else #(v - 1)) =
   match lt_eq_lt_dec (k + v) j with
   | inleft (left _) =&gt; #(k + v)
   | inleft (right _) =&gt; N ↑ k # i ↑ j
   | inright _ =&gt; #(k + v - 1)
   end

subgoal 2 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>) (<span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a>1)). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 2809)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  l1 : j + i &lt;= v - 1
  ============================
   #(k + (v - 1)) =
   match lt_eq_lt_dec (k + v) j with
   | inleft (left _) =&gt; #(k + v)
   | inleft (right _) =&gt; N ↑ k # i ↑ j
   | inright _ =&gt; #(k + v - 1)
   end

subgoal 2 (ID 2810) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 3 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>) <span class="id" type="var">j</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>9 subgoals, subgoal 1 (ID 2824)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  l1 : j + i &lt;= v - 1
  l2 : k + v &lt; j
  ============================
   #(k + (v - 1)) = #(k + v)

subgoal 2 (ID 2825) is:
 #(k + (v - 1)) = N ↑ k # i ↑ j
subgoal 3 (ID 2826) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 4 (ID 2810) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 5 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 6 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 9 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>). </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 2827)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  l1 : j + i &lt;= v - 1
  l2 : k + v &lt; j
  ============================
   j &lt; j

subgoal 2 (ID 2825) is:
 #(k + (v - 1)) = N ↑ k # i ↑ j
subgoal 3 (ID 2826) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 4 (ID 2810) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 5 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 6 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 9 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 2828)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  l1 : j + i &lt;= v - 1
  l2 : k + v &lt; j
  ============================
   j &lt; v

subgoal 2 (ID 2829) is:
 v &lt;= j
subgoal 3 (ID 2825) is:
 #(k + (v - 1)) = N ↑ k # i ↑ j
subgoal 4 (ID 2826) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 5 (ID 2810) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 6 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 7 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 9 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 10 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 2829)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  l1 : j + i &lt;= v - 1
  l2 : k + v &lt; j
  ============================
   v &lt;= j

subgoal 2 (ID 2825) is:
 #(k + (v - 1)) = N ↑ k # i ↑ j
subgoal 3 (ID 2826) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 4 (ID 2810) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 5 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 6 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 9 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">induction</span> <span class="id" type="var">k</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 2825)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  l1 : j + i &lt;= v - 1
  e : k + v = j
  ============================
   #(k + (v - 1)) = N ↑ k # i ↑ j

subgoal 2 (ID 2826) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 3 (ID 2810) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 4 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 5 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 2883)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  l : k + v &lt; v
  l0 : S (k + v + i) &lt;= v
  l1 : k + v + i &lt;= v - 1
  ============================
   #(k + (v - 1)) = N ↑ k # i ↑ (k + v)

subgoal 2 (ID 2826) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 3 (ID 2810) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 4 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 5 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 2884)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  l : k + v &lt; v
  l0 : S (k + v + i) &lt;= v
  l1 : k + v + i &lt;= v - 1
  ============================
   v &lt; v

subgoal 2 (ID 2826) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 3 (ID 2810) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 4 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 5 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)). </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 2885)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  l : k + v &lt; v
  l0 : S (k + v + i) &lt;= v
  l1 : k + v + i &lt;= v - 1
  ============================
   v &lt; S (k + v + i)

subgoal 2 (ID 2886) is:
 S (k + v + i) &lt;= v
subgoal 3 (ID 2826) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 4 (ID 2810) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 5 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 6 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 9 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 2886)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  l : k + v &lt; v
  l0 : S (k + v + i) &lt;= v
  l1 : k + v + i &lt;= v - 1
  ============================
   S (k + v + i) &lt;= v

subgoal 2 (ID 2826) is:
 #(k + (v - 1)) = #(k + v - 1)
subgoal 3 (ID 2810) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 4 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 5 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 2826)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  l1 : j + i &lt;= v - 1
  l2 : j &lt; k + v
  ============================
   #(k + (v - 1)) = #(k + v - 1)

subgoal 2 (ID 2810) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 3 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 2950)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; 0
  l0 : S (j + i) &lt;= 0
  l1 : j + i &lt;= 0 - 1
  l2 : j &lt; k + 0
  ============================
   #(k + (0 - 1)) = #(k + 0 - 1)

subgoal 2 (ID 2956) is:
 #(k + (S v - 1)) = #(k + S v - 1)
subgoal 3 (ID 2810) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 4 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 5 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_O"><span class="id" type="abbreviation">lt_n_O</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 2956)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  l0 : S (j + i) &lt;= S v
  l1 : j + i &lt;= S v - 1
  l2 : j &lt; k + S v
  ============================
   #(k + (S v - 1)) = #(k + S v - 1)

subgoal 2 (ID 2810) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 3 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- 2! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 2960)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  l0 : S (j + i) &lt;= S v
  l1 : j + i &lt;= S v - 1
  l2 : j &lt; k + S v
  ============================
   #(k + pred (S v)) = #(pred (k + S v))

subgoal 2 (ID 2810) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 3 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">replace</span> (<span class="id" type="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">v</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>)) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 2964)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  l0 : S (j + i) &lt;= S v
  l1 : j + i &lt;= S v - 1
  l2 : j &lt; k + S v
  ============================
   #(k + pred (S v)) = #(pred (S (k + v)))

subgoal 2 (ID 2810) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 3 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 2979)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  l0 : S (j + i) &lt;= S v
  l1 : j + i &lt;= S v - 1
  l2 : j &lt; k + S v
  ============================
   #(k + v) = #(k + v)

subgoal 2 (ID 2810) is:
 #(v - 1) =
 match lt_eq_lt_dec (k + v) j with
 | inleft (left _) =&gt; #(k + v)
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(k + v - 1)
 end
subgoal 3 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 2810)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  g : j + i &gt; v - 1
  ============================
   #(v - 1) =
   match lt_eq_lt_dec (k + v) j with
   | inleft (left _) =&gt; #(k + v)
   | inleft (right _) =&gt; N ↑ k # i ↑ j
   | inright _ =&gt; #(k + v - 1)
   end

subgoal 2 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 2980)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  g : j + i &gt; v - 1
  ============================
   v &lt; v

subgoal 2 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 2981)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  g : j + i &gt; v - 1
  ============================
   v &lt; S (j + i)

subgoal 2 (ID 2982) is:
 S (j + i) &lt;= v
subgoal 3 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 2991)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; 0
  l0 : S (j + i) &lt;= 0
  g : j + i &gt; 0 - 1
  ============================
   0 &lt; S (j + i)

subgoal 2 (ID 2996) is:
 S v &lt; S (j + i)
subgoal 3 (ID 2982) is:
 S (j + i) &lt;= v
subgoal 4 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 5 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_O"><span class="id" type="abbreviation">lt_n_O</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 2996)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  l0 : S (j + i) &lt;= S v
  g : j + i &gt; S v - 1
  ============================
   S v &lt; S (j + i)

subgoal 2 (ID 2982) is:
 S (j + i) &lt;= v
subgoal 3 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3000)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  l0 : S (j + i) &lt;= S v
  g : j + i &gt; pred (S v)
  ============================
   S v &lt; S (j + i)

subgoal 2 (ID 2982) is:
 S (j + i) &lt;= v
subgoal 3 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3001)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  l0 : S (j + i) &lt;= S v
  g : j + i &gt; v
  ============================
   S v &lt; S (j + i)

subgoal 2 (ID 2982) is:
 S (j + i) &lt;= v
subgoal 3 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 2982)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  l0 : S (j + i) &lt;= v
  g : j + i &gt; v - 1
  ============================
   S (j + i) &lt;= v

subgoal 2 (ID 2799) is:
 #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]
subgoal 3 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 2799)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  ============================
   #(v - 1) ↑ k # (j + i) = #v [j ← N ↑ k # i]

subgoal 2 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3014)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  ============================
   (if le_gt_dec (j + i) (v - 1) then #(k + (v - 1)) else #(v - 1)) =
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ k # i ↑ j
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>) (<span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a>1)). </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3023)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v - 1
  ============================
   #(k + (v - 1)) =
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ k # i ↑ j
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 3024) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">j</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3038)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v - 1
  l1 : v &lt; j
  ============================
   #(k + (v - 1)) = #v

subgoal 2 (ID 3039) is:
 #(k + (v - 1)) = N ↑ k # i ↑ j
subgoal 3 (ID 3040) is:
 #(k + (v - 1)) = #(v - 1)
subgoal 4 (ID 3024) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 5 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 8 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>); <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3039)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v - 1
  e : v = j
  ============================
   #(k + (v - 1)) = N ↑ k # i ↑ j

subgoal 2 (ID 3040) is:
 #(k + (v - 1)) = #(v - 1)
subgoal 3 (ID 3024) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3050)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; j
  g : S (j + i) &gt; j
  l0 : j + i &lt;= j - 1
  ============================
   #(k + (j - 1)) = N ↑ k # i ↑ j

subgoal 2 (ID 3040) is:
 #(k + (v - 1)) = #(v - 1)
subgoal 3 (ID 3024) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3040)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v - 1
  l1 : j &lt; v
  ============================
   #(k + (v - 1)) = #(v - 1)

subgoal 2 (ID 3024) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3052)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v - 1
  l1 : j &lt; v
  ============================
   v &lt; v

subgoal 2 (ID 3024) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>)). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3053)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v - 1
  l1 : j &lt; v
  ============================
   v &lt; S (j + i)

subgoal 2 (ID 3054) is:
 S (j + i) &lt;= v
subgoal 3 (ID 3024) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3054)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  l0 : j + i &lt;= v - 1
  l1 : j &lt; v
  ============================
   S (j + i) &lt;= v

subgoal 2 (ID 3024) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3064)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; 0
  g : S (j + i) &gt; 0
  l0 : j + i &lt;= 0 - 1
  l1 : j &lt; 0
  ============================
   S (j + i) &lt;= 0

subgoal 2 (ID 3070) is:
 S (j + i) &lt;= S v
subgoal 3 (ID 3024) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_O"><span class="id" type="abbreviation">lt_n_O</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3070)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  g : S (j + i) &gt; S v
  l0 : j + i &lt;= S v - 1
  l1 : j &lt; S v
  ============================
   S (j + i) &lt;= S v

subgoal 2 (ID 3024) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3074)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  g : S (j + i) &gt; S v
  l0 : j + i &lt;= pred (S v)
  l1 : j &lt; S v
  ============================
   S (j + i) &lt;= S v

subgoal 2 (ID 3024) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3075)
  
  v : nat
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; S v
  g : S (j + i) &gt; S v
  l0 : j + i &lt;= v
  l1 : j &lt; S v
  ============================
   S (j + i) &lt;= S v

subgoal 2 (ID 3024) is:
 #(v - 1) =
 match lt_eq_lt_dec v j with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ k # i ↑ j
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3024)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  g0 : j + i &gt; v - 1
  ============================
   #(v - 1) =
   match lt_eq_lt_dec v j with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ k # i ↑ j
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a>) <span class="id" type="keyword">as</span> [[] | ]. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3101)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  g0 : j + i &gt; v - 1
  l0 : v &lt; j
  ============================
   #(v - 1) = #v

subgoal 2 (ID 3102) is:
 #(v - 1) = N ↑ k # i ↑ j
subgoal 3 (ID 3103) is:
 #(v - 1) = #(v - 1)
subgoal 4 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 7 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>); <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3102)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  g0 : j + i &gt; v - 1
  e : v = j
  ============================
   #(v - 1) = N ↑ k # i ↑ j

subgoal 2 (ID 3103) is:
 #(v - 1) = #(v - 1)
subgoal 3 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3113)
  
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; j
  g : S (j + i) &gt; j
  g0 : j + i &gt; j - 1
  ============================
   #(j - 1) = N ↑ k # i ↑ j

subgoal 2 (ID 3103) is:
 #(v - 1) = #(v - 1)
subgoal 3 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 6 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">j</span>); <span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3103)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  k : nat
  l : j &lt; v
  g : S (j + i) &gt; v
  g0 : j + i &gt; v - 1
  l0 : j &lt; v
  ============================
   #(v - 1) = #(v - 1)

subgoal 2 (ID 2541) is:
 !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 5 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 2541)
  
  s : Sorts
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   !s [j ← N] ↑ k # (j + i) = !s ↑ k # (S (j + i)) [j ← N ↑ k # i]

subgoal 2 (ID 2545) is:
 (M1 · M2) [j ← N] ↑ k # (j + i) =
 (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 4 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 2545)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j k : nat),
         M1 [j ← N] ↑ k # (j + i) = M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM2 : forall (N : Term) (i j k : nat),
         M2 [j ← N] ↑ k # (j + i) = M2 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   (M1 · M2) [j ← N] ↑ k # (j + i) =
   (M1 · M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]

subgoal 2 (ID 2549) is:
 (Π (M1), M2) [j ← N] ↑ k # (j + i) =
 (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
subgoal 3 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 2549)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j k : nat),
         M1 [j ← N] ↑ k # (j + i) = M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM2 : forall (N : Term) (i j k : nat),
         M2 [j ← N] ↑ k # (j + i) = M2 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   (Π (M1), M2) [j ← N] ↑ k # (j + i) =
   (Π (M1), M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]

subgoal 2 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 3133)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j k : nat),
         M1 [j ← N] ↑ k # (j + i) = M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM2 : forall (N : Term) (i j k : nat),
         M2 [j ← N] ↑ k # (j + i) = M2 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   Π (M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]), M2 [(S j) ← N] ↑ k # (S (j + i)) =
   Π (M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]),
   M2 ↑ k # (S (S (j + i))) [(S j) ← N ↑ k # i]

subgoal 2 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>))) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)+</span></a><span class="id" type="var">i</span>)) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 3149)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j k : nat),
         M1 [j ← N] ↑ k # (j + i) = M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM2 : forall (N : Term) (i j k : nat),
         M2 [j ← N] ↑ k # (j + i) = M2 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   Π (M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]), M2 [(S j) ← N] ↑ k # (S (j + i)) =
   Π (M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]),
   M2 ↑ k # (S (S j + i)) [(S j) ← N ↑ k # i]

subgoal 2 (ID 2553) is:
 (λ [M1], M2) [j ← N] ↑ k # (j + i) =
 (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">IHM2</span> <span class="id" type="var">N</span> <span class="id" type="var">i</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">j</span>)  <span class="id" type="var">k</span> ); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 2553)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j k : nat),
         M1 [j ← N] ↑ k # (j + i) = M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM2 : forall (N : Term) (i j k : nat),
         M2 [j ← N] ↑ k # (j + i) = M2 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   (λ [M1], M2) [j ← N] ↑ k # (j + i) =
   (λ [M1], M2) ↑ k # (S (j + i)) [j ← N ↑ k # i]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3155)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j k : nat),
         M1 [j ← N] ↑ k # (j + i) = M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM2 : forall (N : Term) (i j k : nat),
         M2 [j ← N] ↑ k # (j + i) = M2 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   λ [M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]], M2 [(S j) ← N] ↑ k # (S (j + i)) =
   λ [M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]],
   M2 ↑ k # (S (S (j + i))) [(S j) ← N ↑ k # i]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>))) <span class="id" type="keyword">with</span> ((<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)+</span></a><span class="id" type="var">i</span>))) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3171)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j k : nat),
         M1 [j ← N] ↑ k # (j + i) = M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  IHM2 : forall (N : Term) (i j k : nat),
         M2 [j ← N] ↑ k # (j + i) = M2 ↑ k # (S (j + i)) [j ← N ↑ k # i]
  N : Term
  i : nat
  j : nat
  k : nat
  ============================
   λ [M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]], M2 [(S j) ← N] ↑ k # (S (j + i)) =
   λ [M1 ↑ k # (S (j + i)) [j ← N ↑ k # i]],
   M2 ↑ k # (S (S j + i)) [(S j) ← N ↑ k # i]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">IHM2</span> <span class="id" type="var">N</span> <span class="id" type="var">i</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">j</span>)  <span class="id" type="var">k</span> ); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>substP1 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="ut_term_mod.substP2"><span class="id" type="lemma">substP2</span></a>: <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span> <span class="id" type="var">n</span>, <a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> -&gt;<br>
  <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="ut_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="ut_term.html#N"><span class="id" type="variable">N</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a> <a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="ut_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a> .</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3182)
  
  ============================
   forall (M N : Term) (i j n : nat),
   i &lt;= n -&gt; M ↑ j # i [(j + n) ← N] = M [n ← N] ↑ j # i

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intro</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">induction</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3236)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  ============================
   (if le_gt_dec i v then #(j + v) else #v) [(j + n) ← N] =
   match lt_eq_lt_dec v n with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ n
   | inright _ =&gt; #(v - 1)
   end ↑ j # i

subgoal 2 (ID 3237) is:
 !s = !s
subgoal 3 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 4 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 5 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">v</span>); <span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">n</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>10 subgoals, subgoal 1 (ID 3264)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  ============================
   #(j + v) [(j + n) ← N] = #v ↑ j # i

subgoal 2 (ID 3265) is:
 #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 3 (ID 3266) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 5 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 6 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 7 (ID 3237) is:
 !s = !s
subgoal 8 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 9 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 10 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>10 subgoals, subgoal 1 (ID 3283)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = (if le_gt_dec i v then #(j + v) else #v)

subgoal 2 (ID 3265) is:
 #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 3 (ID 3266) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 5 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 6 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 7 (ID 3237) is:
 !s = !s
subgoal 8 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 9 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 10 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">v</span>). </span><div class="output"><pre>11 subgoals, subgoal 1 (ID 3292)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  l1 : i &lt;= v
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #(j + v)

subgoal 2 (ID 3293) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #v
subgoal 3 (ID 3265) is:
 #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3266) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 6 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 7 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 8 (ID 3237) is:
 !s = !s
subgoal 9 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 10 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 11 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>) (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>13 subgoals, subgoal 1 (ID 3307)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  l1 : i &lt;= v
  l2 : j + v &lt; j + n
  ============================
   #(j + v) = #(j + v)

subgoal 2 (ID 3308) is:
 N ↑ (j + n) = #(j + v)
subgoal 3 (ID 3309) is:
 #(j + v - 1) = #(j + v)
subgoal 4 (ID 3293) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #v
subgoal 5 (ID 3265) is:
 #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 6 (ID 3266) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 7 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 8 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 9 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 10 (ID 3237) is:
 !s = !s
subgoal 11 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 12 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 13 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>12 subgoals, subgoal 1 (ID 3308)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  l1 : i &lt;= v
  e : j + v = j + n
  ============================
   N ↑ (j + n) = #(j + v)

subgoal 2 (ID 3309) is:
 #(j + v - 1) = #(j + v)
subgoal 3 (ID 3293) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #v
subgoal 4 (ID 3265) is:
 #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3266) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 7 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 8 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 9 (ID 3237) is:
 !s = !s
subgoal 10 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 11 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 12 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_reg_l"><span class="id" type="lemma">plus_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">e</span>. </span><div class="output"><pre>12 subgoals, subgoal 1 (ID 3312)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  l1 : i &lt;= v
  e : v = n
  ============================
   N ↑ (j + n) = #(j + v)

subgoal 2 (ID 3309) is:
 #(j + v - 1) = #(j + v)
subgoal 3 (ID 3293) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #v
subgoal 4 (ID 3265) is:
 #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3266) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 7 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 8 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 9 (ID 3237) is:
 !s = !s
subgoal 10 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 11 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 12 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>. </span><div class="output"><pre>12 subgoals, subgoal 1 (ID 3319)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  l0 : n &lt; n
  l1 : i &lt;= n
  ============================
   N ↑ (j + n) = #(j + n)

subgoal 2 (ID 3309) is:
 #(j + v - 1) = #(j + v)
subgoal 3 (ID 3293) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #v
subgoal 4 (ID 3265) is:
 #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3266) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 7 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 8 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 9 (ID 3237) is:
 !s = !s
subgoal 10 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 11 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 12 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>11 subgoals, subgoal 1 (ID 3309)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  l1 : i &lt;= v
  l2 : j + n &lt; j + v
  ============================
   #(j + v - 1) = #(j + v)

subgoal 2 (ID 3293) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #v
subgoal 3 (ID 3265) is:
 #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3266) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 6 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 7 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 8 (ID 3237) is:
 !s = !s
subgoal 9 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 10 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 11 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_lt_reg_l"><span class="id" type="lemma">plus_lt_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l2</span>. </span><div class="output"><pre>11 subgoals, subgoal 1 (ID 3322)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  l1 : i &lt;= v
  l2 : n &lt; v
  ============================
   #(j + v - 1) = #(j + v)

subgoal 2 (ID 3293) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #v
subgoal 3 (ID 3265) is:
 #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3266) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 6 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 7 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 8 (ID 3237) is:
 !s = !s
subgoal 9 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 10 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 11 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_asym"><span class="id" type="lemma">lt_asym</span></a> <span class="id" type="var">v</span> <span class="id" type="var">n</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>10 subgoals, subgoal 1 (ID 3293)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  g : i &gt; v
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #v

subgoal 2 (ID 3265) is:
 #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 3 (ID 3266) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 5 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 6 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 7 (ID 3237) is:
 !s = !s
subgoal 8 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 9 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 10 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 3325)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : v &lt; n
  g : i &gt; v
  ============================
   i &lt; i

subgoal 2 (ID 3265) is:
 #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 3 (ID 3266) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 5 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 6 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 7 (ID 3237) is:
 !s = !s
subgoal 8 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 9 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 10 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 3265)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  e : v = n
  ============================
   #(j + v) [(j + n) ← N] = N ↑ n ↑ j # i

subgoal 2 (ID 3266) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 3 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 4 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3237) is:
 !s = !s
subgoal 7 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 8 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 9 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>.</span><div class="output"><pre>9 subgoals, subgoal 1 (ID 3332)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  ============================
   #(j + n) [(j + n) ← N] = N ↑ n ↑ j # i

subgoal 2 (ID 3266) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 3 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 4 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3237) is:
 !s = !s
subgoal 7 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 8 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 9 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>9 subgoals, subgoal 1 (ID 3333)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  ============================
   match lt_eq_lt_dec (j + n) (j + n) with
   | inleft (left _) =&gt; #(j + n)
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(j + n - 1)
   end = N ↑ n ↑ j # i

subgoal 2 (ID 3266) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 3 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 4 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3237) is:
 !s = !s
subgoal 7 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 8 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 9 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>) (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>11 subgoals, subgoal 1 (ID 3347)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  l0 : j + n &lt; j + n
  ============================
   #(j + n) = N ↑ n ↑ j # i

subgoal 2 (ID 3348) is:
 N ↑ (j + n) = N ↑ n ↑ j # i
subgoal 3 (ID 3349) is:
 #(j + n - 1) = N ↑ n ↑ j # i
subgoal 4 (ID 3266) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 6 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 7 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 8 (ID 3237) is:
 !s = !s
subgoal 9 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 10 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 11 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l0</span>.</span><div class="output"><pre>10 subgoals, subgoal 1 (ID 3348)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  e : j + n = j + n
  ============================
   N ↑ (j + n) = N ↑ n ↑ j # i

subgoal 2 (ID 3349) is:
 #(j + n - 1) = N ↑ n ↑ j # i
subgoal 3 (ID 3266) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 5 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 6 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 7 (ID 3237) is:
 !s = !s
subgoal 8 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 9 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 10 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">symmetry</span>.</span><div class="output"><pre>10 subgoals, subgoal 1 (ID 3353)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  e : j + n = j + n
  ============================
   N ↑ n ↑ j # i = N ↑ (j + n)

subgoal 2 (ID 3349) is:
 #(j + n - 1) = N ↑ n ↑ j # i
subgoal 3 (ID 3266) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 5 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 6 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 7 (ID 3237) is:
 !s = !s
subgoal 8 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 9 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 10 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="ut_term.html#ut_term_mod.liftP3"><span class="id" type="lemma">liftP3</span></a>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>9 subgoals, subgoal 1 (ID 3349)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  l0 : j + n &lt; j + n
  ============================
   #(j + n - 1) = N ↑ n ↑ j # i

subgoal 2 (ID 3266) is:
 #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 3 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 4 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3237) is:
 !s = !s
subgoal 7 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 8 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 9 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l0</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3266)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  ============================
   #(j + v) [(j + n) ← N] = #(v - 1) ↑ j # i

subgoal 2 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 3 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3237) is:
 !s = !s
subgoal 6 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 7 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3366)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = (if le_gt_dec i (v - 1) then #(j + (v - 1)) else #(v - 1))

subgoal 2 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 3 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3237) is:
 !s = !s
subgoal 6 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 7 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">i</span> (<span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a>1)). </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 3375)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  l1 : i &lt;= v - 1
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #(j + (v - 1))

subgoal 2 (ID 3376) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 3 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 4 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3237) is:
 !s = !s
subgoal 7 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 8 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 9 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>) (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>))<span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>11 subgoals, subgoal 1 (ID 3390)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  l1 : i &lt;= v - 1
  l2 : j + v &lt; j + n
  ============================
   #(j + v) = #(j + (v - 1))

subgoal 2 (ID 3391) is:
 N ↑ (j + n) = #(j + (v - 1))
subgoal 3 (ID 3392) is:
 #(j + v - 1) = #(j + (v - 1))
subgoal 4 (ID 3376) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 5 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 6 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 7 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 8 (ID 3237) is:
 !s = !s
subgoal 9 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 10 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 11 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_lt_reg_l"><span class="id" type="lemma">plus_lt_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l2</span>. </span><div class="output"><pre>11 subgoals, subgoal 1 (ID 3394)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  l1 : i &lt;= v - 1
  l2 : v &lt; n
  ============================
   #(j + v) = #(j + (v - 1))

subgoal 2 (ID 3391) is:
 N ↑ (j + n) = #(j + (v - 1))
subgoal 3 (ID 3392) is:
 #(j + v - 1) = #(j + (v - 1))
subgoal 4 (ID 3376) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 5 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 6 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 7 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 8 (ID 3237) is:
 !s = !s
subgoal 9 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 10 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 11 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_asym"><span class="id" type="lemma">lt_asym</span></a>  <span class="id" type="var">v</span> <span class="id" type="var">n</span> ); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>10 subgoals, subgoal 1 (ID 3391)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  l1 : i &lt;= v - 1
  e : j + v = j + n
  ============================
   N ↑ (j + n) = #(j + (v - 1))

subgoal 2 (ID 3392) is:
 #(j + v - 1) = #(j + (v - 1))
subgoal 3 (ID 3376) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 4 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 5 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 6 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 7 (ID 3237) is:
 !s = !s
subgoal 8 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 9 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 10 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_reg_l"><span class="id" type="lemma">plus_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">e</span>; <span class="id" type="tactic">subst</span>. </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 3405)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= n
  l0 : n &lt; n
  l1 : i &lt;= n - 1
  ============================
   N ↑ (j + n) = #(j + (n - 1))

subgoal 2 (ID 3392) is:
 #(j + v - 1) = #(j + (v - 1))
subgoal 3 (ID 3376) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 4 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 5 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 6 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 7 (ID 3237) is:
 !s = !s
subgoal 8 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 9 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 10 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>9 subgoals, subgoal 1 (ID 3392)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  l1 : i &lt;= v - 1
  l2 : j + n &lt; j + v
  ============================
   #(j + v - 1) = #(j + (v - 1))

subgoal 2 (ID 3376) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 3 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 4 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3237) is:
 !s = !s
subgoal 7 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 8 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 9 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 3416)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= 0
  l0 : n &lt; 0
  l1 : i &lt;= 0 - 1
  l2 : j + n &lt; j + 0
  ============================
   #(j + 0 - 1) = #(j + (0 - 1))

subgoal 2 (ID 3422) is:
 #(j + S v - 1) = #(j + (S v - 1))
subgoal 3 (ID 3376) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 4 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 5 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 6 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 7 (ID 3237) is:
 !s = !s
subgoal 8 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 9 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 10 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_O"><span class="id" type="abbreviation">lt_n_O</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l0</span>. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 3422)
  
  v : nat
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= S v
  l0 : n &lt; S v
  l1 : i &lt;= S v - 1
  l2 : j + n &lt; j + S v
  ============================
   #(j + S v - 1) = #(j + (S v - 1))

subgoal 2 (ID 3376) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 3 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 4 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3237) is:
 !s = !s
subgoal 7 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 8 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 9 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- 2! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a>. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 3426)
  
  v : nat
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= S v
  l0 : n &lt; S v
  l1 : i &lt;= S v - 1
  l2 : j + n &lt; j + S v
  ============================
   #(pred (j + S v)) = #(j + pred (S v))

subgoal 2 (ID 3376) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 3 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 4 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3237) is:
 !s = !s
subgoal 7 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 8 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 9 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">replace</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">v</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>)) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>9 subgoals, subgoal 1 (ID 3430)
  
  v : nat
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= S v
  l0 : n &lt; S v
  l1 : i &lt;= S v - 1
  l2 : j + n &lt; j + S v
  ============================
   #(pred (S (j + v))) = #(j + pred (S v))

subgoal 2 (ID 3376) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 3 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 4 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3237) is:
 !s = !s
subgoal 7 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 8 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 9 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 3446)
  
  v : nat
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= S v
  l0 : n &lt; S v
  l1 : i &lt;= S v - 1
  l2 : j + n &lt; j + S v
  ============================
   #(j + v) = #(j + v)

subgoal 2 (ID 3376) is:
 match lt_eq_lt_dec (j + v) (j + n) with
 | inleft (left _) =&gt; #(j + v)
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(j + v - 1)
 end = #(v - 1)
subgoal 3 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 4 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3237) is:
 !s = !s
subgoal 7 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 8 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 9 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3376)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  g : i &gt; v - 1
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #(v - 1)

subgoal 2 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 3 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3237) is:
 !s = !s
subgoal 6 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 7 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#gt"><span class="id" type="definition">gt</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3447)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  g : v - 1 &lt; i
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #(v - 1)

subgoal 2 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 3 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3237) is:
 !s = !s
subgoal 6 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 7 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#lt"><span class="id" type="definition">lt</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3448)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  g : S (v - 1) &lt;= i
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #(v - 1)

subgoal 2 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 3 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3237) is:
 !s = !s
subgoal 6 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 7 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3450)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  g : S (pred v) &lt;= i
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #(v - 1)

subgoal 2 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 3 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3237) is:
 !s = !s
subgoal 6 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 7 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#S_pred"><span class="id" type="lemma">S_pred</span></a>  <span class="id" type="var">v</span> <span class="id" type="var">n</span> <span class="id" type="var">l0</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">g</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3452)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  g : v &lt;= i
  ============================
   match lt_eq_lt_dec (j + v) (j + n) with
   | inleft (left _) =&gt; #(j + v)
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(j + v - 1)
   end = #(v - 1)

subgoal 2 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 3 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3237) is:
 !s = !s
subgoal 6 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 7 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3453)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  g : v &lt;= i
  ============================
   n &lt; n

subgoal 2 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 3 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3237) is:
 !s = !s
subgoal 6 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 7 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3455)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  l : i &lt;= v
  l0 : n &lt; v
  g : v &lt;= i
  ============================
   v &lt;= n

subgoal 2 (ID 3280) is:
 #v [(j + n) ← N] = #v ↑ j # i
subgoal 3 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3237) is:
 !s = !s
subgoal 6 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 7 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Le.html#le_trans"><span class="id" type="lemma">le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3280)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  ============================
   #v [(j + n) ← N] = #v ↑ j # i

subgoal 2 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 3 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3237) is:
 !s = !s
subgoal 5 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 6 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 7 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3458)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  ============================
   match lt_eq_lt_dec v (j + n) with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(v - 1)
   end = (if le_gt_dec i v then #(j + v) else #v)

subgoal 2 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 3 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3237) is:
 !s = !s
subgoal 5 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 6 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 7 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">v</span>). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3467)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  l0 : i &lt;= v
  ============================
   match lt_eq_lt_dec v (j + n) with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(v - 1)
   end = #(j + v)

subgoal 2 (ID 3468) is:
 match lt_eq_lt_dec v (j + n) with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(v - 1)
 end = #v
subgoal 3 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3237) is:
 !s = !s
subgoal 6 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 7 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3469)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  l0 : i &lt;= v
  ============================
   i &lt; i

subgoal 2 (ID 3468) is:
 match lt_eq_lt_dec v (j + n) with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N ↑ (j + n)
 | inright _ =&gt; #(v - 1)
 end = #v
subgoal 3 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3237) is:
 !s = !s
subgoal 6 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 7 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3468)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  g0 : i &gt; v
  ============================
   match lt_eq_lt_dec v (j + n) with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(v - 1)
   end = #v

subgoal 2 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 3 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3237) is:
 !s = !s
subgoal 5 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 6 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 7 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)) <span class="id" type="keyword">as</span> [[] | ]. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 3485)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  g0 : i &gt; v
  l0 : v &lt; j + n
  ============================
   #v = #v

subgoal 2 (ID 3486) is:
 N ↑ (j + n) = #v
subgoal 3 (ID 3487) is:
 #(v - 1) = #v
subgoal 4 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 5 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 6 (ID 3237) is:
 !s = !s
subgoal 7 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 8 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 9 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3486)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  g0 : i &gt; v
  e : v = j + n
  ============================
   N ↑ (j + n) = #v

subgoal 2 (ID 3487) is:
 #(v - 1) = #v
subgoal 3 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3237) is:
 !s = !s
subgoal 6 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 7 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3495)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; j + n
  l : j + n &lt; n
  g0 : i &gt; j + n
  ============================
   N ↑ (j + n) = #(j + n)

subgoal 2 (ID 3487) is:
 #(v - 1) = #v
subgoal 3 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3237) is:
 !s = !s
subgoal 6 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 7 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3496)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; j + n
  l : j + n &lt; n
  g0 : i &gt; j + n
  ============================
   n &lt; n

subgoal 2 (ID 3487) is:
 #(v - 1) = #v
subgoal 3 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3237) is:
 !s = !s
subgoal 6 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 7 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3487)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  g0 : i &gt; v
  l0 : j + n &lt; v
  ============================
   #(v - 1) = #v

subgoal 2 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 3 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3237) is:
 !s = !s
subgoal 5 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 6 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 7 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3508)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  g0 : i &gt; v
  l0 : j + n &lt; v
  ============================
   n &lt; n

subgoal 2 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 3 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3237) is:
 !s = !s
subgoal 5 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 6 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 7 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3509)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  g0 : i &gt; v
  l0 : j + n &lt; v
  ============================
   n &lt; v

subgoal 2 (ID 3510) is:
 v &lt; n
subgoal 3 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 4 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 5 (ID 3237) is:
 !s = !s
subgoal 6 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 7 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 8 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>); <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3510)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : v &lt; n
  g0 : i &gt; v
  l0 : j + n &lt; v
  ============================
   v &lt; n

subgoal 2 (ID 3281) is:
 #v [(j + n) ← N] = N ↑ n ↑ j # i
subgoal 3 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 4 (ID 3237) is:
 !s = !s
subgoal 5 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 6 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 7 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3281)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  e : v = n
  ============================
   #v [(j + n) ← N] = N ↑ n ↑ j # i

subgoal 2 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 3 (ID 3237) is:
 !s = !s
subgoal 4 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 5 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 6 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3524)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  e : v = n
  ============================
   match lt_eq_lt_dec v (j + n) with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(v - 1)
   end = N ↑ n ↑ j # i

subgoal 2 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 3 (ID 3237) is:
 !s = !s
subgoal 4 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 5 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 6 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3529)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; n
  ============================
   match lt_eq_lt_dec n (j + n) with
   | inleft (left _) =&gt; #n
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(n - 1)
   end = N ↑ n ↑ j # i

subgoal 2 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 3 (ID 3237) is:
 !s = !s
subgoal 4 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 5 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 6 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>). </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3530)
  
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; n
  ============================
   n &lt; n

subgoal 2 (ID 3282) is:
 #v [(j + n) ← N] = #(v - 1) ↑ j # i
subgoal 3 (ID 3237) is:
 !s = !s
subgoal 4 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 5 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 6 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3282)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt; v
  ============================
   #v [(j + n) ← N] = #(v - 1) ↑ j # i

subgoal 2 (ID 3237) is:
 !s = !s
subgoal 3 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 4 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 5 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3533)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt; v
  ============================
   match lt_eq_lt_dec v (j + n) with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ (j + n)
   | inright _ =&gt; #(v - 1)
   end = (if le_gt_dec i (v - 1) then #(j + (v - 1)) else #(v - 1))

subgoal 2 (ID 3237) is:
 !s = !s
subgoal 3 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 4 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 5 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>). </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3534)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt; v
  ============================
   n &lt; n

subgoal 2 (ID 3237) is:
 !s = !s
subgoal 3 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 4 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 5 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3536)
  
  v : Vars
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  g : i &gt; v
  l : n &lt; v
  ============================
   v &lt;= n

subgoal 2 (ID 3237) is:
 !s = !s
subgoal 3 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 4 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 5 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Le.html#le_trans"><span class="id" type="lemma">le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 3237)
  
  s : Sorts
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  ============================
   !s = !s

subgoal 2 (ID 3238) is:
 M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
 M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i
subgoal 3 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 4 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 3238)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M1 ↑ j # i [(j + n) ← N] = M1 [n ← N] ↑ j # i
  IHM2 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M2 ↑ j # i [(j + n) ← N] = M2 [n ← N] ↑ j # i
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  ============================
   M1 ↑ j # i [(j + n) ← N] · M2 ↑ j # i [(j + n) ← N] =
   M1 [n ← N] ↑ j # i · M2 [n ← N] ↑ j # i

subgoal 2 (ID 3239) is:
 Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
 Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)
subgoal 3 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 3239)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M1 ↑ j # i [(j + n) ← N] = M1 [n ← N] ↑ j # i
  IHM2 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M2 ↑ j # i [(j + n) ← N] = M2 [n ← N] ↑ j # i
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  ============================
   Π (M1 ↑ j # i [(j + n) ← N]), M2 ↑ j # (S i) [(S (j + n)) ← N] =
   Π (M1 [n ← N] ↑ j # i), M2 [(S n) ← N] ↑ j # (S i)

subgoal 2 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>;<br>
<span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">IHM2</span> <span class="id" type="var">N</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>) <span class="id" type="var">j</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 3602)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M1 ↑ j # i [(j + n) ← N] = M1 [n ← N] ↑ j # i
  IHM2 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M2 ↑ j # i [(j + n) ← N] = M2 [n ← N] ↑ j # i
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  ============================
   Π (M1 [n ← N] ↑ j # i), M2 ↑ j # (S i) [(S (j + n)) ← N] =
   Π (M1 [n ← N] ↑ j # i), M2 ↑ j # (S i) [(j + S n) ← N]

subgoal 2 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)) <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 3632)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M1 ↑ j # i [(j + n) ← N] = M1 [n ← N] ↑ j # i
  IHM2 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M2 ↑ j # i [(j + n) ← N] = M2 [n ← N] ↑ j # i
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  ============================
   Π (M1 [n ← N] ↑ j # i), M2 ↑ j # (S i) [(j + S n) ← N] =
   Π (M1 [n ← N] ↑ j # i), M2 ↑ j # (S i) [(j + S n) ← N]

subgoal 2 (ID 3240) is:
 λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
 λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3240)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M1 ↑ j # i [(j + n) ← N] = M1 [n ← N] ↑ j # i
  IHM2 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M2 ↑ j # i [(j + n) ← N] = M2 [n ← N] ↑ j # i
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  ============================
   λ [M1 ↑ j # i [(j + n) ← N]], M2 ↑ j # (S i) [(S (j + n)) ← N] =
   λ [M1 [n ← N] ↑ j # i], M2 [(S n) ← N] ↑ j # (S i)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>;<br>
<span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">IHM2</span> <span class="id" type="var">N</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>) <span class="id" type="var">j</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3665)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M1 ↑ j # i [(j + n) ← N] = M1 [n ← N] ↑ j # i
  IHM2 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M2 ↑ j # i [(j + n) ← N] = M2 [n ← N] ↑ j # i
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  ============================
   λ [M1 [n ← N] ↑ j # i], M2 ↑ j # (S i) [(S (j + n)) ← N] =
   λ [M1 [n ← N] ↑ j # i], M2 ↑ j # (S i) [(j + S n) ← N]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)) <span class="id" type="keyword">with</span> (<span class="id" type="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3695)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M1 ↑ j # i [(j + n) ← N] = M1 [n ← N] ↑ j # i
  IHM2 : forall (N : Term) (i j n : nat),
         i &lt;= n -&gt; M2 ↑ j # i [(j + n) ← N] = M2 [n ← N] ↑ j # i
  N : Term
  i : nat
  j : nat
  n : nat
  H : i &lt;= n
  ============================
   λ [M1 [n ← N] ↑ j # i], M2 ↑ j # (S i) [(j + S n) ← N] =
   λ [M1 [n ← N] ↑ j # i], M2 ↑ j # (S i) [(j + S n) ← N]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>substP2 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="ut_term_mod.substP3"><span class="id" type="lemma">substP3</span></a>: <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">i</span>  <span class="id" type="var">k</span> <span class="id" type="var">n</span>, <a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="ut_term.html#k"><span class="id" type="variable">k</span></a> -&gt; <a class="idref" href="ut_term.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'&lt;='_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> -&gt;<br>
  <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="ut_term.html#k"><span class="id" type="variable">k</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="ut_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3719)
  
  ============================
   forall (M N : Term) (i k n : nat),
   i &lt;= k -&gt; k &lt;= i + n -&gt; M ↑ (S n) # i [k ← N] = M ↑ n # i

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intro</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">induction</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3778)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   (if le_gt_dec i v then #(S (n + v)) else #v) [k ← N] =
   (if le_gt_dec i v then #(n + v) else #v)

subgoal 2 (ID 3779) is:
 !s = !s
subgoal 3 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 4 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 5 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">v</span>).</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3791)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  ============================
   #(S (n + v)) [k ← N] = #(n + v)

subgoal 2 (ID 3792) is:
 #v [k ← N] = #v
subgoal 3 (ID 3779) is:
 !s = !s
subgoal 4 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 5 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 6 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">unfold</span> <a class="idref" href="ut_term.html#ut_term_mod.subst_rec"><span class="id" type="definition">subst_rec</span></a>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3793)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  ============================
   match lt_eq_lt_dec (S (n + v)) k with
   | inleft (left _) =&gt; #(S (n + v))
   | inleft (right _) =&gt; N ↑ k
   | inright _ =&gt; #(S (n + v) - 1)
   end = #(n + v)

subgoal 2 (ID 3792) is:
 #v [k ← N] = #v
subgoal 3 (ID 3779) is:
 !s = !s
subgoal 4 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 5 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 6 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>)) <span class="id" type="var">k</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3807)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : S (n + v) &lt; k
  ============================
   #(S (n + v)) = #(n + v)

subgoal 2 (ID 3808) is:
 N ↑ k = #(n + v)
subgoal 3 (ID 3809) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 4 (ID 3792) is:
 #v [k ← N] = #v
subgoal 5 (ID 3779) is:
 !s = !s
subgoal 6 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 7 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 8 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3810)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : S (n + v) &lt; k
  ============================
   i + n &lt; i + n

subgoal 2 (ID 3808) is:
 N ↑ k = #(n + v)
subgoal 3 (ID 3809) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 4 (ID 3792) is:
 #v [k ← N] = #v
subgoal 5 (ID 3779) is:
 !s = !s
subgoal 6 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 7 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 8 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">k</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3811)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : S (n + v) &lt; k
  ============================
   i + n &lt; k

subgoal 2 (ID 3808) is:
 N ↑ k = #(n + v)
subgoal 3 (ID 3809) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 4 (ID 3792) is:
 #v [k ← N] = #v
subgoal 5 (ID 3779) is:
 !s = !s
subgoal 6 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 7 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 8 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>). </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 3869)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : S (n + v) &lt; k
  ============================
   i + n &lt;= v + n

subgoal 2 (ID 3870) is:
 v + n &lt; k
subgoal 3 (ID 3808) is:
 N ↑ k = #(n + v)
subgoal 4 (ID 3809) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 5 (ID 3792) is:
 #v [k ← N] = #v
subgoal 6 (ID 3779) is:
 !s = !s
subgoal 7 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 8 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 9 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 3870)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : S (n + v) &lt; k
  ============================
   v + n &lt; k

subgoal 2 (ID 3808) is:
 N ↑ k = #(n + v)
subgoal 3 (ID 3809) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 4 (ID 3792) is:
 #v [k ← N] = #v
subgoal 5 (ID 3779) is:
 !s = !s
subgoal 6 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 7 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 8 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3808)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  e : S (n + v) = k
  ============================
   N ↑ k = #(n + v)

subgoal 2 (ID 3809) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 3 (ID 3792) is:
 #v [k ← N] = #v
subgoal 4 (ID 3779) is:
 !s = !s
subgoal 5 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 6 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 7 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3918)
  
  v : Vars
  N : Term
  i : nat
  n : nat
  l : i &lt;= v
  H : i &lt;= S (n + v)
  H0 : S (n + v) &lt;= i + n
  ============================
   N ↑ (S (n + v)) = #(n + v)

subgoal 2 (ID 3809) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 3 (ID 3792) is:
 #v [k ← N] = #v
subgoal 4 (ID 3779) is:
 !s = !s
subgoal 5 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 6 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 7 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">replace</span> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>) <span class="id" type="keyword">with</span> (<span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">i</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H0</span> <span class="id" type="tactic">by</span> (<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a>) . </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3923)
  
  v : Vars
  N : Term
  i : nat
  n : nat
  l : i &lt;= v
  H : i &lt;= S (n + v)
  H0 : S (n + v) &lt;= n + i
  ============================
   N ↑ (S (n + v)) = #(n + v)

subgoal 2 (ID 3809) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 3 (ID 3792) is:
 #v [k ← N] = #v
subgoal 4 (ID 3779) is:
 !s = !s
subgoal 5 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 6 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 7 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>)) <span class="id" type="keyword">with</span> (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">v</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H0</span> <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3929)
  
  v : Vars
  N : Term
  i : nat
  n : nat
  l : i &lt;= v
  H : i &lt;= S (n + v)
  H0 : n + S v &lt;= n + i
  ============================
   N ↑ (S (n + v)) = #(n + v)

subgoal 2 (ID 3809) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 3 (ID 3792) is:
 #v [k ← N] = #v
subgoal 4 (ID 3779) is:
 !s = !s
subgoal 5 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 6 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 7 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_le_reg_l"><span class="id" type="lemma">plus_le_reg_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H0</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3945)
  
  v : Vars
  N : Term
  i : nat
  n : nat
  l : i &lt;= v
  H : i &lt;= S (n + v)
  H0 : S v &lt;= i
  ============================
   N ↑ (S (n + v)) = #(n + v)

subgoal 2 (ID 3809) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 3 (ID 3792) is:
 #v [k ← N] = #v
subgoal 4 (ID 3779) is:
 !s = !s
subgoal 5 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 6 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 7 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3946)
  
  v : Vars
  N : Term
  i : nat
  n : nat
  l : i &lt;= v
  H : i &lt;= S (n + v)
  H0 : S v &lt;= i
  ============================
   i &lt; i

subgoal 2 (ID 3809) is:
 #(S (n + v) - 1) = #(n + v)
subgoal 3 (ID 3792) is:
 #v [k ← N] = #v
subgoal 4 (ID 3779) is:
 !s = !s
subgoal 5 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 6 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 7 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3809)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : k &lt; S (n + v)
  ============================
   #(S (n + v) - 1) = #(n + v)

subgoal 2 (ID 3792) is:
 #v [k ← N] = #v
subgoal 3 (ID 3779) is:
 !s = !s
subgoal 4 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 5 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 6 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3949)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : k &lt; S (n + v)
  ============================
   #(n + v - 0) = #(n + v)

subgoal 2 (ID 3792) is:
 #v [k ← N] = #v
subgoal 3 (ID 3779) is:
 !s = !s
subgoal 4 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 5 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 6 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#minus_n_O"><span class="id" type="lemma">minus_n_O</span></a>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3950)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  l : i &lt;= v
  l0 : k &lt; S (n + v)
  ============================
   #(n + v) = #(n + v)

subgoal 2 (ID 3792) is:
 #v [k ← N] = #v
subgoal 3 (ID 3779) is:
 !s = !s
subgoal 4 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 5 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 6 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3792)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  ============================
   #v [k ← N] = #v

subgoal 2 (ID 3779) is:
 !s = !s
subgoal 3 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 4 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 5 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3951)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  ============================
   match lt_eq_lt_dec v k with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ k
   | inright _ =&gt; #(v - 1)
   end = #v

subgoal 2 (ID 3779) is:
 !s = !s
subgoal 3 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 4 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 5 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">k</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 3965)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : v &lt; k
  ============================
   #v = #v

subgoal 2 (ID 3966) is:
 N ↑ k = #v
subgoal 3 (ID 3967) is:
 #(v - 1) = #v
subgoal 4 (ID 3779) is:
 !s = !s
subgoal 5 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 6 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 7 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">reflexivity</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3966)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  e : v = k
  ============================
   N ↑ k = #v

subgoal 2 (ID 3967) is:
 #(v - 1) = #v
subgoal 3 (ID 3779) is:
 !s = !s
subgoal 4 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 5 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 6 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3973)
  
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; k
  ============================
   N ↑ k = #k

subgoal 2 (ID 3967) is:
 #(v - 1) = #v
subgoal 3 (ID 3779) is:
 !s = !s
subgoal 4 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 5 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 6 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 3974)
  
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; k
  ============================
   i &lt; i

subgoal 2 (ID 3967) is:
 #(v - 1) = #v
subgoal 3 (ID 3779) is:
 !s = !s
subgoal 4 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 5 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 6 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">k</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3967)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt; v
  ============================
   #(v - 1) = #v

subgoal 2 (ID 3779) is:
 !s = !s
subgoal 3 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 4 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 5 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">k</span>). </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3977)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt; v
  ============================
   k &lt; k

subgoal 2 (ID 3779) is:
 !s = !s
subgoal 3 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 4 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 5 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 3979)
  
  v : Vars
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  g : i &gt; v
  l : k &lt; v
  ============================
   v &lt; k

subgoal 2 (ID 3779) is:
 !s = !s
subgoal 3 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 4 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 5 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 3779)
  
  s : Sorts
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   !s = !s

subgoal 2 (ID 3780) is:
 M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i
subgoal 3 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 4 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 3780)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ (S n) # i [k ← N] = M1 ↑ n # i
  IHM2 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ (S n) # i [k ← N] = M2 ↑ n # i
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   M1 ↑ (S n) # i [k ← N] · M2 ↑ (S n) # i [k ← N] = M1 ↑ n # i · M2 ↑ n # i

subgoal 2 (ID 3781) is:
 Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
 Π (M1 ↑ n # i), M2 ↑ n # (S i)
subgoal 3 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 3781)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ (S n) # i [k ← N] = M1 ↑ n # i
  IHM2 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ (S n) # i [k ← N] = M2 ↑ n # i
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   Π (M1 ↑ (S n) # i [k ← N]), M2 ↑ (S n) # (S i) [(S k) ← N] =
   Π (M1 ↑ n # i), M2 ↑ n # (S i)

subgoal 2 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">IHM2</span> <span class="id" type="var">N</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>) (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">k</span>) <span class="id" type="var">n</span>); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 4023)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ (S n) # i [k ← N] = M1 ↑ n # i
  IHM2 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ (S n) # i [k ← N] = M2 ↑ n # i
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   S k &lt;= S i + n

subgoal 2 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <span class="id" type="var">n</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)). </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 4226)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ (S n) # i [k ← N] = M1 ↑ n # i
  IHM2 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ (S n) # i [k ← N] = M2 ↑ n # i
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   S k &lt;= S (i + n)

subgoal 2 (ID 3782) is:
 λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
 λ [M1 ↑ n # i], M2 ↑ n # (S i)
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 3782)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ (S n) # i [k ← N] = M1 ↑ n # i
  IHM2 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ (S n) # i [k ← N] = M2 ↑ n # i
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   λ [M1 ↑ (S n) # i [k ← N]], M2 ↑ (S n) # (S i) [(S k) ← N] =
   λ [M1 ↑ n # i], M2 ↑ n # (S i)

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">IHM2</span> <span class="id" type="var">N</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>) (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">k</span>) <span class="id" type="var">n</span>); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 4259)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ (S n) # i [k ← N] = M1 ↑ n # i
  IHM2 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ (S n) # i [k ← N] = M2 ↑ n # i
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   S k &lt;= S i + n

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <span class="id" type="var">n</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>)). </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 4462)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M1 ↑ (S n) # i [k ← N] = M1 ↑ n # i
  IHM2 : forall (N : Term) (i k n : nat),
         i &lt;= k -&gt; k &lt;= i + n -&gt; M2 ↑ (S n) # i [k ← N] = M2 ↑ n # i
  N : Term
  i : nat
  k : nat
  n : nat
  H : i &lt;= k
  H0 : k &lt;= i + n
  ============================
   S k &lt;= S (i + n)

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>substP3 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="ut_term_mod.substP4"><span class="id" type="lemma">substP4</span></a>: <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">P</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span>, <br>
   <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="ut_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">])</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="ut_term.html#j"><span class="id" type="variable">j</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="ut_term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><a class="idref" href="ut_term.html#j"><span class="id" type="variable">j</span></a>) <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="ut_term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">])</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="ut_term.html#i"><span class="id" type="variable">i</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="ut_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="ut_term.html#j"><span class="id" type="variable">j</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="ut_term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]]</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 4482)
  
  ============================
   forall (M N P : Term) (i j : nat),
   M [i ← N] [(i + j) ← P] = M [(S (i + j)) ← P] [i ← N [j ← P]]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intro</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">induction</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 4531)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  ============================
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N ↑ i
   | inright _ =&gt; #(v - 1)
   end [(i + j) ← P] =
   match lt_eq_lt_dec v (S (i + j)) with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; P ↑ (S (i + j))
   | inright _ =&gt; #(v - 1)
   end [i ← N [j ← P]]

subgoal 2 (ID 4532) is:
 !s = !s
subgoal 3 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 4 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 5 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">i</span>) <span class="id" type="keyword">as</span> [[] | ] ; <span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>))) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>13 subgoals, subgoal 1 (ID 4565)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  ============================
   #v [(i + j) ← P] = #v [i ← N [j ← P]]

subgoal 2 (ID 4566) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 4567) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 4581) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 5 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 8 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 9 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 10 (ID 4532) is:
 !s = !s
subgoal 11 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 12 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 13 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>13 subgoals, subgoal 1 (ID 4600)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  ============================
   match lt_eq_lt_dec v (i + j) with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; P ↑ (i + j)
   | inright _ =&gt; #(v - 1)
   end =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 4566) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 4567) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 4581) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 5 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 8 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 9 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 10 (ID 4532) is:
 !s = !s
subgoal 11 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 12 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 13 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) <span class="id" type="keyword">as</span> [[] | ]. </span><div class="output"><pre>15 subgoals, subgoal 1 (ID 4614)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : v &lt; i + j
  ============================
   #v =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 4615) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 4616) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 4566) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 4567) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 4581) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 7 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 8 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 9 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 10 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 11 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 12 (ID 4532) is:
 !s = !s
subgoal 13 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 14 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 15 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">i</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>17 subgoals, subgoal 1 (ID 4630)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : v &lt; i + j
  l2 : v &lt; i
  ============================
   #v = #v

subgoal 2 (ID 4631) is:
 #v = N [j ← P] ↑ i
subgoal 3 (ID 4632) is:
 #v = #(v - 1)
subgoal 4 (ID 4615) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 5 (ID 4616) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 6 (ID 4566) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 7 (ID 4567) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 8 (ID 4581) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 9 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 10 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 11 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 12 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 13 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 14 (ID 4532) is:
 !s = !s
subgoal 15 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 16 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 17 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>16 subgoals, subgoal 1 (ID 4631)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : v &lt; i + j
  e : v = i
  ============================
   #v = N [j ← P] ↑ i

subgoal 2 (ID 4632) is:
 #v = #(v - 1)
subgoal 3 (ID 4615) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 4616) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 5 (ID 4566) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 4567) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 4581) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 8 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 9 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 10 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 11 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 12 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 13 (ID 4532) is:
 !s = !s
subgoal 14 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 15 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 16 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>16 subgoals, subgoal 1 (ID 4639)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; i
  l0 : i &lt; S (i + j)
  l1 : i &lt; i + j
  ============================
   #i = N [j ← P] ↑ i

subgoal 2 (ID 4632) is:
 #v = #(v - 1)
subgoal 3 (ID 4615) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 4616) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 5 (ID 4566) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 4567) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 4581) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 8 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 9 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 10 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 11 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 12 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 13 (ID 4532) is:
 !s = !s
subgoal 14 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 15 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 16 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l</span>. </span><div class="output"><pre>15 subgoals, subgoal 1 (ID 4632)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : v &lt; i + j
  l2 : i &lt; v
  ============================
   #v = #(v - 1)

subgoal 2 (ID 4615) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 4616) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 4566) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 4567) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 4581) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 7 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 8 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 9 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 10 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 11 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 12 (ID 4532) is:
 !s = !s
subgoal 13 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 14 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 15 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> ( <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_asym"><span class="id" type="lemma">lt_asym</span></a> <span class="id" type="var">v</span> <span class="id" type="var">i</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>14 subgoals, subgoal 1 (ID 4615)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  e : v = i + j
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 4616) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 4566) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 4567) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 4581) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 6 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 7 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 8 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 9 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 10 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 11 (ID 4532) is:
 !s = !s
subgoal 12 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 13 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 14 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>14 subgoals, subgoal 1 (ID 4649)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i + j &lt; i
  l0 : i + j &lt; S (i + j)
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec (i + j) i with
   | inleft (left _) =&gt; #(i + j)
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(i + j - 1)
   end

subgoal 2 (ID 4616) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 4566) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 4567) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 4581) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 6 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 7 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 8 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 9 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 10 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 11 (ID 4532) is:
 !s = !s
subgoal 12 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 13 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 14 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l</span>. </span><div class="output"><pre>14 subgoals, subgoal 1 (ID 4651)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : j + i &lt; i
  l0 : i + j &lt; S (i + j)
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec (i + j) i with
   | inleft (left _) =&gt; #(i + j)
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(i + j - 1)
   end

subgoal 2 (ID 4616) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 4566) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 4567) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 4581) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 6 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 7 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 8 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 9 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 10 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 11 (ID 4532) is:
 !s = !s
subgoal 12 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 13 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 14 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>14 subgoals, subgoal 1 (ID 4652)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : j + i &lt; i
  l0 : i + j &lt; S (i + j)
  ============================
   i &lt; i

subgoal 2 (ID 4616) is:
 #(v - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 4566) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 4567) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 4581) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 6 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 7 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 8 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 9 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 10 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 11 (ID 4532) is:
 !s = !s
subgoal 12 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 13 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 14 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">induction</span> <span class="id" type="var">j</span>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>13 subgoals, subgoal 1 (ID 4616)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : i + j &lt; v
  ============================
   #(v - 1) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 4566) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 4567) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 4581) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 5 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 8 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 9 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 10 (ID 4532) is:
 !s = !s
subgoal 11 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 12 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 13 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>13 subgoals, subgoal 1 (ID 4703)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : i + j &lt; v
  ============================
   i &lt; i

subgoal 2 (ID 4566) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 4567) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 4581) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 5 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 8 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 9 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 10 (ID 4532) is:
 !s = !s
subgoal 11 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 12 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 13 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>;<span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>13 subgoals, subgoal 1 (ID 4704)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : i + j &lt; v
  ============================
   i &lt;= v

subgoal 2 (ID 4566) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 4567) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 4581) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 5 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 8 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 9 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 10 (ID 4532) is:
 !s = !s
subgoal 11 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 12 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 13 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>; <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>13 subgoals, subgoal 1 (ID 4726)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : v &lt; S (i + j)
  l1 : j + i &lt; v
  ============================
   i &lt;= v

subgoal 2 (ID 4566) is:
 #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 4567) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 4581) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 5 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 8 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 9 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 10 (ID 4532) is:
 !s = !s
subgoal 11 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 12 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 13 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">induction</span> <span class="id" type="var">j</span>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>12 subgoals, subgoal 1 (ID 4566)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  e : v = S (i + j)
  ============================
   #v [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 4567) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 4581) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 4 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 7 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 8 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 9 (ID 4532) is:
 !s = !s
subgoal 10 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 11 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 12 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>12 subgoals, subgoal 1 (ID 4822)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : S (i + j) &lt; i
  ============================
   #(S (i + j)) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 4567) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 4581) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 4 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 7 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 8 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 9 (ID 4532) is:
 !s = !s
subgoal 10 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 11 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 12 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>12 subgoals, subgoal 1 (ID 4823)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : S (i + j) &lt; i
  ============================
   i &lt; i

subgoal 2 (ID 4567) is:
 #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 4581) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 4 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 7 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 8 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 9 (ID 4532) is:
 !s = !s
subgoal 10 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 11 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 12 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>11 subgoals, subgoal 1 (ID 4567)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : S (i + j) &lt; v
  ============================
   #v [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]

subgoal 2 (ID 4581) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 3 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 6 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 7 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 8 (ID 4532) is:
 !s = !s
subgoal 9 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 10 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 11 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>11 subgoals, subgoal 1 (ID 4865)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : S (i + j) &lt; v
  ============================
   i &lt; i

subgoal 2 (ID 4581) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 3 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 6 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 7 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 8 (ID 4532) is:
 !s = !s
subgoal 9 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 10 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 11 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)); <span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>11 subgoals, subgoal 1 (ID 4867)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : v &lt; i
  l0 : S (i + j) &lt; v
  ============================
   S (i + j) &lt; i

subgoal 2 (ID 4581) is:
 N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 3 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 6 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 7 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 8 (ID 4532) is:
 !s = !s
subgoal 9 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 10 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 11 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>10 subgoals, subgoal 1 (ID 4581)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  e : v = i
  l : v &lt; S (i + j)
  ============================
   N ↑ i [(i + j) ← P] = #v [i ← N [j ← P]]

subgoal 2 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 5 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 4532) is:
 !s = !s
subgoal 8 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 9 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 10 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 4965)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  e : v = i
  l : v &lt; S (i + j)
  ============================
   N ↑ i [(i + j) ← P] =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 5 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 4532) is:
 !s = !s
subgoal 8 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 9 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 10 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>. </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 4970)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  ============================
   N ↑ i [(i + j) ← P] =
   match lt_eq_lt_dec i i with
   | inleft (left _) =&gt; #i
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(i - 1)
   end

subgoal 2 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 5 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 4532) is:
 !s = !s
subgoal 8 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 9 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 10 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">i</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>12 subgoals, subgoal 1 (ID 4984)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  l0 : i &lt; i
  ============================
   N ↑ i [(i + j) ← P] = #i

subgoal 2 (ID 4985) is:
 N ↑ i [(i + j) ← P] = N [j ← P] ↑ i
subgoal 3 (ID 4986) is:
 N ↑ i [(i + j) ← P] = #(i - 1)
subgoal 4 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 7 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 8 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 9 (ID 4532) is:
 !s = !s
subgoal 10 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 11 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 12 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>); <span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>11 subgoals, subgoal 1 (ID 4985)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  e : i = i
  ============================
   N ↑ i [(i + j) ← P] = N [j ← P] ↑ i

subgoal 2 (ID 4986) is:
 N ↑ i [(i + j) ← P] = #(i - 1)
subgoal 3 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 6 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 7 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 8 (ID 4532) is:
 !s = !s
subgoal 9 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 10 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 11 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="ut_term.html#ut_term_mod.substP2"><span class="id" type="lemma">substP2</span></a>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>10 subgoals, subgoal 1 (ID 4986)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  l0 : i &lt; i
  ============================
   N ↑ i [(i + j) ← P] = #(i - 1)

subgoal 2 (ID 4582) is:
 N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 5 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 4532) is:
 !s = !s
subgoal 8 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 9 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 10 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>9 subgoals, subgoal 1 (ID 4582)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  e : v = i
  e0 : v = S (i + j)
  ============================
   N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 4 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 4532) is:
 !s = !s
subgoal 7 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 8 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 9 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 5001)
  
  N : Term
  P : Term
  i : nat
  j : nat
  e0 : i = S (i + j)
  ============================
   N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 4 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 4532) is:
 !s = !s
subgoal 7 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 8 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 9 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">e0</span>. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 5003)
  
  N : Term
  P : Term
  i : nat
  j : nat
  e0 : i = S (j + i)
  ============================
   N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 4 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 4532) is:
 !s = !s
subgoal 7 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 8 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 9 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#succ_plus_discr"><span class="id" type="lemma">succ_plus_discr</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">e0</span>. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 5005)
  
  N : Term
  P : Term
  i : nat
  j : nat
  e0 : False
  ============================
   N ↑ i [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 4583) is:
 N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 4 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 4532) is:
 !s = !s
subgoal 7 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 8 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 9 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> <span class="id" type="var">e0</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 4583)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  e : v = i
  l : S (i + j) &lt; v
  ============================
   N ↑ i [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]

subgoal 2 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 3 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 4532) is:
 !s = !s
subgoal 6 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 7 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 8 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 5010)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : S (i + j) &lt; i
  ============================
   N ↑ i [(i + j) ← P] = #(i - 1) [i ← N [j ← P]]

subgoal 2 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 3 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 4532) is:
 !s = !s
subgoal 6 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 7 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 8 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 5011)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : S (i + j) &lt; i
  ============================
   i &lt; i

subgoal 2 (ID 4597) is:
 #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]
subgoal 3 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 4532) is:
 !s = !s
subgoal 6 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 7 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 8 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 4597)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  ============================
   #(v - 1) [(i + j) ← P] = #v [i ← N [j ← P]]

subgoal 2 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 4532) is:
 !s = !s
subgoal 5 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5039)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  ============================
   match lt_eq_lt_dec (v - 1) (i + j) with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; P ↑ (i + j)
   | inright _ =&gt; #(v - 1 - 1)
   end =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 4532) is:
 !s = !s
subgoal 5 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a>1) (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) <span class="id" type="keyword">as</span>  [[] | ]. </span><div class="output"><pre>9 subgoals, subgoal 1 (ID 5053)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : v - 1 &lt; i + j
  ============================
   #(v - 1) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 5054) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 5055) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 4532) is:
 !s = !s
subgoal 7 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 8 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 9 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">i</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>11 subgoals, subgoal 1 (ID 5069)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : v - 1 &lt; i + j
  l2 : v &lt; i
  ============================
   #(v - 1) = #v

subgoal 2 (ID 5070) is:
 #(v - 1) = N [j ← P] ↑ i
subgoal 3 (ID 5071) is:
 #(v - 1) = #(v - 1)
subgoal 4 (ID 5054) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 5 (ID 5055) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 6 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 7 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 8 (ID 4532) is:
 !s = !s
subgoal 9 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 10 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 11 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_asym"><span class="id" type="lemma">lt_asym</span></a> <span class="id" type="var">v</span> <span class="id" type="var">i</span>); <span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 5070)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : v - 1 &lt; i + j
  e : v = i
  ============================
   #(v - 1) = N [j ← P] ↑ i

subgoal 2 (ID 5071) is:
 #(v - 1) = #(v - 1)
subgoal 3 (ID 5054) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 5055) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 5 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 4532) is:
 !s = !s
subgoal 8 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 9 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 10 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>. </span><div class="output"><pre>10 subgoals, subgoal 1 (ID 5080)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; i
  l0 : i &lt; S (i + j)
  l1 : i - 1 &lt; i + j
  ============================
   #(i - 1) = N [j ← P] ↑ i

subgoal 2 (ID 5071) is:
 #(v - 1) = #(v - 1)
subgoal 3 (ID 5054) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 5055) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 5 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 6 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 7 (ID 4532) is:
 !s = !s
subgoal 8 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 9 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 10 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>9 subgoals, subgoal 1 (ID 5071)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : v - 1 &lt; i + j
  l2 : i &lt; v
  ============================
   #(v - 1) = #(v - 1)

subgoal 2 (ID 5054) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 5055) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 4 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 5 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 6 (ID 4532) is:
 !s = !s
subgoal 7 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 8 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 9 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 5054)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  e : v - 1 = i + j
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 5055) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 4532) is:
 !s = !s
subgoal 6 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 7 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 8 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">e</span> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 5083)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (v - 1)
  e : v - 1 = i + j
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 5055) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 4532) is:
 !s = !s
subgoal 6 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 7 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 8 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>.</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 5085)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (pred v)
  e : v - 1 = i + j
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 5055) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 4532) is:
 !s = !s
subgoal 6 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 7 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 8 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#S_pred"><span class="id" type="lemma">S_pred</span></a>  <span class="id" type="var">v</span> <span class="id" type="var">i</span> <span class="id" type="var">l</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">l0</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 5087)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; v
  e : v - 1 = i + j
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 5055) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec v i with
 | inleft (left _) =&gt; #v
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1)
 end
subgoal 3 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 4532) is:
 !s = !s
subgoal 6 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 7 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 8 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5055)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : i + j &lt; v - 1
  ============================
   #(v - 1 - 1) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 4532) is:
 !s = !s
subgoal 5 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_S"><span class="id" type="lemma">lt_n_S</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5090)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : S (i + j) &lt; S (v - 1)
  ============================
   #(v - 1 - 1) =
   match lt_eq_lt_dec v i with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1)
   end

subgoal 2 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 4532) is:
 !s = !s
subgoal 5 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>).</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5091)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : S (i + j) &lt; S (v - 1)
  ============================
   v &lt; v

subgoal 2 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 4532) is:
 !s = !s
subgoal 5 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5093)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : S (i + j) &lt; S (v - 1)
  ============================
   S (i + j) &lt; v

subgoal 2 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 4532) is:
 !s = !s
subgoal 5 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5095)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : S (i + j) &lt; S (pred v)
  ============================
   S (i + j) &lt; v

subgoal 2 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 4532) is:
 !s = !s
subgoal 5 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#S_pred"><span class="id" type="lemma">S_pred</span></a>  <span class="id" type="var">v</span> <span class="id" type="var">i</span> <span class="id" type="var">l</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5097)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : v &lt; S (i + j)
  l1 : S (i + j) &lt; v
  ============================
   S (i + j) &lt; v

subgoal 2 (ID 4598) is:
 #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 4532) is:
 !s = !s
subgoal 5 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 4598)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  e : v = S (i + j)
  ============================
   #(v - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 4532) is:
 !s = !s
subgoal 4 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5102)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  ============================
   #(S (i + j) - 1) [(i + j) ← P] = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 4532) is:
 !s = !s
subgoal 4 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5103)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  ============================
   match lt_eq_lt_dec (i + j - 0) (i + j) with
   | inleft (left _) =&gt; #(i + j - 0)
   | inleft (right _) =&gt; P ↑ (i + j)
   | inright _ =&gt; #(i + j - 0 - 1)
   end = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 4532) is:
 !s = !s
subgoal 4 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#minus_n_O"><span class="id" type="lemma">minus_n_O</span></a>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5104)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  ============================
   match lt_eq_lt_dec (i + j) (i + j) with
   | inleft (left _) =&gt; #(i + j)
   | inleft (right _) =&gt; P ↑ (i + j)
   | inright _ =&gt; #(i + j - 1)
   end = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 4532) is:
 !s = !s
subgoal 4 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>) (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 5118)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  l0 : i + j &lt; i + j
  ============================
   #(i + j) = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 5119) is:
 P ↑ (i + j) = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 5120) is:
 #(i + j - 1) = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 4 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 5 (ID 4532) is:
 !s = !s
subgoal 6 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 7 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 8 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) ; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5119)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  e : i + j = i + j
  ============================
   P ↑ (i + j) = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 5120) is:
 #(i + j - 1) = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 4532) is:
 !s = !s
subgoal 5 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">symmetry</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5123)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  e : i + j = i + j
  ============================
   P ↑ (S (i + j)) [i ← N [j ← P]] = P ↑ (i + j)

subgoal 2 (ID 5120) is:
 #(i + j - 1) = P ↑ (S (i + j)) [i ← N [j ← P]]
subgoal 3 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 4 (ID 4532) is:
 !s = !s
subgoal 5 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="ut_term.html#ut_term_mod.substP3"><span class="id" type="lemma">substP3</span></a>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5120)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  l0 : i + j &lt; i + j
  ============================
   #(i + j - 1) = P ↑ (S (i + j)) [i ← N [j ← P]]

subgoal 2 (ID 4599) is:
 #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]
subgoal 3 (ID 4532) is:
 !s = !s
subgoal 4 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) ; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 4599)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  ============================
   #(v - 1) [(i + j) ← P] = #(v - 1) [i ← N [j ← P]]

subgoal 2 (ID 4532) is:
 !s = !s
subgoal 3 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 4 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 5 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 5142)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  ============================
   match lt_eq_lt_dec (v - 1) (i + j) with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; P ↑ (i + j)
   | inright _ =&gt; #(v - 1 - 1)
   end =
   match lt_eq_lt_dec (v - 1) i with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1 - 1)
   end

subgoal 2 (ID 4532) is:
 !s = !s
subgoal 3 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 4 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 5 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a>1) (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) <span class="id" type="keyword">as</span>  [[] | ].</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5156)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : v - 1 &lt; i + j
  ============================
   #(v - 1) =
   match lt_eq_lt_dec (v - 1) i with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1 - 1)
   end

subgoal 2 (ID 5157) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 5158) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 4 (ID 4532) is:
 !s = !s
subgoal 5 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5159)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : v - 1 &lt; i + j
  ============================
   v &lt; v

subgoal 2 (ID 5157) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 5158) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 4 (ID 4532) is:
 !s = !s
subgoal 5 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_trans"><span class="id" type="lemma">lt_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) ;<span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5160)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : v - 1 &lt; i + j
  ============================
   v &lt; S (i + j)

subgoal 2 (ID 5157) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 5158) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 4 (ID 4532) is:
 !s = !s
subgoal 5 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_S"><span class="id" type="lemma">lt_n_S</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5163)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : S (v - 1) &lt; S (i + j)
  ============================
   v &lt; S (i + j)

subgoal 2 (ID 5157) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 5158) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 4 (ID 4532) is:
 !s = !s
subgoal 5 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5165)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : S (pred v) &lt; S (i + j)
  ============================
   v &lt; S (i + j)

subgoal 2 (ID 5157) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 5158) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 4 (ID 4532) is:
 !s = !s
subgoal 5 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#S_pred"><span class="id" type="lemma">S_pred</span></a> <span class="id" type="var">v</span> <span class="id" type="var">i</span> <span class="id" type="var">l</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5167)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : v &lt; S (i + j)
  ============================
   v &lt; S (i + j)

subgoal 2 (ID 5157) is:
 P ↑ (i + j) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 5158) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 4 (ID 4532) is:
 !s = !s
subgoal 5 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5157)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  e : v - 1 = i + j
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec (v - 1) i with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1 - 1)
   end

subgoal 2 (ID 5158) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 4532) is:
 !s = !s
subgoal 4 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#eq_S"><span class="id" type="definition">eq_S</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">e</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5169)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  e : S (v - 1) = S (i + j)
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec (v - 1) i with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1 - 1)
   end

subgoal 2 (ID 5158) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 4532) is:
 !s = !s
subgoal 4 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">e</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5171)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  e : S (pred v) = S (i + j)
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec (v - 1) i with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1 - 1)
   end

subgoal 2 (ID 5158) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 4532) is:
 !s = !s
subgoal 4 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#S_pred"><span class="id" type="lemma">S_pred</span></a> <span class="id" type="var">v</span> <span class="id" type="var">i</span> <span class="id" type="var">l</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">e</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5173)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  e : v = S (i + j)
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec (v - 1) i with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1 - 1)
   end

subgoal 2 (ID 5158) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 4532) is:
 !s = !s
subgoal 4 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">subst</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5179)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S (i + j)
  l0 : S (i + j) &lt; S (i + j)
  ============================
   P ↑ (i + j) =
   match lt_eq_lt_dec (S (i + j) - 1) i with
   | inleft (left _) =&gt; #(S (i + j) - 1)
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(S (i + j) - 1 - 1)
   end

subgoal 2 (ID 5158) is:
 #(v - 1 - 1) =
 match lt_eq_lt_dec (v - 1) i with
 | inleft (left _) =&gt; #(v - 1)
 | inleft (right _) =&gt; N [j ← P] ↑ i
 | inright _ =&gt; #(v - 1 - 1)
 end
subgoal 3 (ID 4532) is:
 !s = !s
subgoal 4 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>))); <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 5158)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : i + j &lt; v - 1
  ============================
   #(v - 1 - 1) =
   match lt_eq_lt_dec (v - 1) i with
   | inleft (left _) =&gt; #(v - 1)
   | inleft (right _) =&gt; N [j ← P] ↑ i
   | inright _ =&gt; #(v - 1 - 1)
   end

subgoal 2 (ID 4532) is:
 !s = !s
subgoal 3 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 4 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 5 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (<span class="id" type="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a>1) <span class="id" type="var">i</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5194)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : i + j &lt; v - 1
  l2 : v - 1 &lt; i
  ============================
   #(v - 1 - 1) = #(v - 1)

subgoal 2 (ID 5195) is:
 #(v - 1 - 1) = N [j ← P] ↑ i
subgoal 3 (ID 5196) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 4 (ID 4532) is:
 !s = !s
subgoal 5 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5197)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : i + j &lt; v - 1
  l2 : v - 1 &lt; i
  ============================
   v &lt; v

subgoal 2 (ID 5195) is:
 #(v - 1 - 1) = N [j ← P] ↑ i
subgoal 3 (ID 5196) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 4 (ID 4532) is:
 !s = !s
subgoal 5 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5198)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : i + j &lt; v - 1
  l2 : v - 1 &lt; i
  ============================
   v &lt;= i

subgoal 2 (ID 5195) is:
 #(v - 1 - 1) = N [j ← P] ↑ i
subgoal 3 (ID 5196) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 4 (ID 4532) is:
 !s = !s
subgoal 5 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 5209)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; 0
  l0 : S (i + j) &lt; 0
  l1 : i + j &lt; 0 - 1
  l2 : 0 - 1 &lt; i
  ============================
   0 &lt;= i

subgoal 2 (ID 5215) is:
 S v &lt;= i
subgoal 3 (ID 5195) is:
 #(v - 1 - 1) = N [j ← P] ↑ i
subgoal 4 (ID 5196) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 5 (ID 4532) is:
 !s = !s
subgoal 6 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 7 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 8 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_O"><span class="id" type="abbreviation">lt_n_O</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">l</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5215)
  
  v : nat
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S v
  l0 : S (i + j) &lt; S v
  l1 : i + j &lt; S v - 1
  l2 : S v - 1 &lt; i
  ============================
   S v &lt;= i

subgoal 2 (ID 5195) is:
 #(v - 1 - 1) = N [j ← P] ↑ i
subgoal 3 (ID 5196) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 4 (ID 4532) is:
 !s = !s
subgoal 5 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l2</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5219)
  
  v : nat
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S v
  l0 : S (i + j) &lt; S v
  l1 : i + j &lt; S v - 1
  l2 : pred (S v) &lt; i
  ============================
   S v &lt;= i

subgoal 2 (ID 5195) is:
 #(v - 1 - 1) = N [j ← P] ↑ i
subgoal 3 (ID 5196) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 4 (ID 4532) is:
 !s = !s
subgoal 5 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">l2</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5220)
  
  v : nat
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S v
  l0 : S (i + j) &lt; S v
  l1 : i + j &lt; S v - 1
  l2 : v &lt; i
  ============================
   S v &lt;= i

subgoal 2 (ID 5195) is:
 #(v - 1 - 1) = N [j ← P] ↑ i
subgoal 3 (ID 5196) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 4 (ID 4532) is:
 !s = !s
subgoal 5 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5195)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : i + j &lt; v - 1
  e : v - 1 = i
  ============================
   #(v - 1 - 1) = N [j ← P] ↑ i

subgoal 2 (ID 5196) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 3 (ID 4532) is:
 !s = !s
subgoal 4 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">v</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5230)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; 0
  l0 : S (i + j) &lt; 0
  l1 : i + j &lt; 0 - 1
  e : 0 - 1 = i
  ============================
   #(0 - 1 - 1) = N [j ← P] ↑ i

subgoal 2 (ID 5236) is:
 #(S v - 1 - 1) = N [j ← P] ↑ i
subgoal 3 (ID 5196) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 4 (ID 4532) is:
 !s = !s
subgoal 5 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 6 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 7 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_n_O"><span class="id" type="abbreviation">lt_n_O</span></a> <span class="id" type="var">i</span>); <span class="id" type="tactic">trivial</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5236)
  
  v : nat
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S v
  l0 : S (i + j) &lt; S v
  l1 : i + j &lt; S v - 1
  e : S v - 1 = i
  ============================
   #(S v - 1 - 1) = N [j ← P] ↑ i

subgoal 2 (ID 5196) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 3 (ID 4532) is:
 !s = !s
subgoal 4 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">e</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5239)
  
  v : nat
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S v
  l0 : S (i + j) &lt; S v
  l1 : i + j &lt; S v - 1
  e : pred (S v) = i
  ============================
   #(S v - 1 - 1) = N [j ← P] ↑ i

subgoal 2 (ID 5196) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 3 (ID 4532) is:
 !s = !s
subgoal 4 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">e</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5240)
  
  v : nat
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S v
  l0 : S (i + j) &lt; S v
  l1 : i + j &lt; S v - 1
  e : v = i
  ============================
   #(S v - 1 - 1) = N [j ← P] ↑ i

subgoal 2 (ID 5196) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 3 (ID 4532) is:
 !s = !s
subgoal 4 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5247)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S i
  l0 : S (i + j) &lt; S i
  l1 : i + j &lt; S i - 1
  ============================
   #(S i - 1 - 1) = N [j ← P] ↑ i

subgoal 2 (ID 5196) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 3 (ID 4532) is:
 !s = !s
subgoal 4 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Minus.html#pred_of_minus"><span class="id" type="lemma">pred_of_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5249)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S i
  l0 : S (i + j) &lt; S i
  l1 : i + j &lt; pred (S i)
  ============================
   #(S i - 1 - 1) = N [j ← P] ↑ i

subgoal 2 (ID 5196) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 3 (ID 4532) is:
 !s = !s
subgoal 4 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">l1</span>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5250)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S i
  l0 : S (i + j) &lt; S i
  l1 : i + j &lt; i
  ============================
   #(S i - 1 - 1) = N [j ← P] ↑ i

subgoal 2 (ID 5196) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 3 (ID 4532) is:
 !s = !s
subgoal 4 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">i</span>).</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5251)
  
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; S i
  l0 : S (i + j) &lt; S i
  l1 : i + j &lt; i
  ============================
   i &lt; i

subgoal 2 (ID 5196) is:
 #(v - 1 - 1) = #(v - 1 - 1)
subgoal 3 (ID 4532) is:
 !s = !s
subgoal 4 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 5 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 6 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_lt_trans"><span class="id" type="lemma">le_lt_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>); <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 5196)
  
  v : Vars
  N : Term
  P : Term
  i : nat
  j : nat
  l : i &lt; v
  l0 : S (i + j) &lt; v
  l1 : i + j &lt; v - 1
  l2 : i &lt; v - 1
  ============================
   #(v - 1 - 1) = #(v - 1 - 1)

subgoal 2 (ID 4532) is:
 !s = !s
subgoal 3 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 4 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 5 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 4532)
  
  s : Sorts
  N : Term
  P : Term
  i : nat
  j : nat
  ============================
   !s = !s

subgoal 2 (ID 4533) is:
 M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
 M1 [(S (i + j)) ← P] [i ← N [j ← P]] · M2 [(S (i + j)) ← P] [i ← N [j ← P]]
subgoal 3 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 4 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 4533)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N P : Term) (i j : nat),
         M1 [i ← N] [(i + j) ← P] = M1 [(S (i + j)) ← P] [i ← N [j ← P]]
  IHM2 : forall (N P : Term) (i j : nat),
         M2 [i ← N] [(i + j) ← P] = M2 [(S (i + j)) ← P] [i ← N [j ← P]]
  N : Term
  P : Term
  i : nat
  j : nat
  ============================
   M1 [i ← N] [(i + j) ← P] · M2 [i ← N] [(i + j) ← P] =
   M1 [(S (i + j)) ← P] [i ← N [j ← P]]
   · M2 [(S (i + j)) ← P] [i ← N [j ← P]]

subgoal 2 (ID 4534) is:
 Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
 Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
subgoal 3 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 4534)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N P : Term) (i j : nat),
         M1 [i ← N] [(i + j) ← P] = M1 [(S (i + j)) ← P] [i ← N [j ← P]]
  IHM2 : forall (N P : Term) (i j : nat),
         M2 [i ← N] [(i + j) ← P] = M2 [(S (i + j)) ← P] [i ← N [j ← P]]
  N : Term
  P : Term
  i : nat
  j : nat
  ============================
   Π (M1 [i ← N] [(i + j) ← P]), M2 [(S i) ← N] [(S (i + j)) ← P] =
   Π (M1 [(S (i + j)) ← P] [i ← N [j ← P]]),
   M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]

subgoal 2 (ID 4535) is:
 λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
 λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
 M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>))) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)+</span></a> <span class="id" type="var">j</span>)) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>;<br>
  <span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">IHM2</span> <span class="id" type="var">N</span> <span class="id" type="var">P</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>)); <span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)+</span></a> <span class="id" type="var">j</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 4535)
  
  M1 : Term
  M2 : Term
  IHM1 : forall (N P : Term) (i j : nat),
         M1 [i ← N] [(i + j) ← P] = M1 [(S (i + j)) ← P] [i ← N [j ← P]]
  IHM2 : forall (N P : Term) (i j : nat),
         M2 [i ← N] [(i + j) ← P] = M2 [(S (i + j)) ← P] [i ← N [j ← P]]
  N : Term
  P : Term
  i : nat
  j : nat
  ============================
   λ [M1 [i ← N] [(i + j) ← P]], M2 [(S i) ← N] [(S (i + j)) ← P] =
   λ [M1 [(S (i + j)) ← P] [i ← N [j ← P]]],
   M2 [(S (S (i + j))) ← P] [(S i) ← N [j ← P]]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>; <span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>))) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)+</span></a><span class="id" type="var">j</span>)) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>;<br>
  <span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">IHM2</span> <span class="id" type="var">N</span> <span class="id" type="var">P</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>)); <span class="id" type="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a>(<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">j</span>)) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)+</span></a> <span class="id" type="var">j</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">intuition</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>substP4 is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">Lemma</span> <a name="ut_term_mod.subst_travers"><span class="id" type="lemma">subst_travers</span></a> : <br>
 <span class="id" type="keyword">forall</span>  <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">P</span> <span class="id" type="var">n</span>, <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[←</span></a> <a class="idref" href="ut_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="ut_term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a>1 <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="ut_term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">)[←</span></a> <a class="idref" href="ut_term.html#N"><span class="id" type="variable">N</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a><a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="ut_term.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 5300)
  
  ============================
   forall (M N P : Term) (n : nat),
   M [ ← N] [n ← P] = (M [(n + 1) ← P]) [ ← N [n ← P]]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">intros</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 5304)
  
  M : Term
  N : Term
  P : Term
  n : nat
  ============================
   M [ ← N] [n ← P] = (M [(n + 1) ← P]) [ ← N [n ← P]]

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">plus_comm</span></a>. </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 5305)
  
  M : Term
  N : Term
  P : Term
  n : nat
  ============================
   M [ ← N] [n ← P] = (M [(1 + n) ← P]) [ ← N [n ← P]]

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">change</span> <span class="id" type="var">n</span> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#O"><span class="id" type="constructor">O</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">n</span>). </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 5307)
  
  M : Term
  N : Term
  P : Term
  n : nat
  ============================
   M [ ← N] [(0 + n) ← P] = (M [(1 + (0 + n)) ← P]) [ ← N [(0 + n) ← P]]

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="ut_term.html#ut_term_mod.substP4"><span class="id" type="lemma">substP4</span></a>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>subst_travers is defined

</pre></div>
<span class="command"><br>

<br>
</span><div class="output"><pre></pre></div>
</div>

<div>
Tool function usefull when eta-conversion is used, but this is not the case
here. 
</div>
<div>
<span class="command">
<span class="id" type="keyword">Lemma</span> <a name="ut_term_mod.expand_term_with_subst"><span class="id" type="lemma">expand_term_with_subst</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">M</span> <span class="id" type="var">n</span>, <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">(</span></a><a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">↑</span></a> 1 <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%E2%86%91'_x_'#'_x"><span class="id" type="notation">)</span></a><a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">)</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">[</span></a> <a class="idref" href="ut_term.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">←</span></a> <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:'#'_x"><span class="id" type="notation">#</span></a>0 <a class="idref" href="ut_term.html#ut_term_mod.:UT_scope:x_'%5B'_x_'%E2%86%90'_x_'%5D'"><span class="id" type="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="ut_term.html#M"><span class="id" type="variable">M</span></a>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 5311)
  
  ============================
   forall (M : Term) (n : nat), M ↑ 1 # (S n) [n ← #0] = M

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">induction</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">intros</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 5340)
  
  v : Vars
  n : nat
  ============================
   #v ↑ 1 # (S n) [n ← #0] = #v

subgoal 2 (ID 5341) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 3 (ID 5342) is:
 (M1 · M2) ↑ 1 # (S n) [n ← #0] = M1 · M2
subgoal 4 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 5 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">unfold</span> <a class="idref" href="ut_term.html#ut_term_mod.lift_rec"><span class="id" type="definition">lift_rec</span></a>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 5345)
  
  v : Vars
  n : nat
  ============================
   (if le_gt_dec (S n) v then #(1 + v) else #v) [n ← #0] = #v

subgoal 2 (ID 5341) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 3 (ID 5342) is:
 (M1 · M2) ↑ 1 # (S n) [n ← #0] = M1 · M2
subgoal 4 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 5 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#le_gt_dec"><span class="id" type="definition">le_gt_dec</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) <span class="id" type="var">v</span>). </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5354)
  
  v : Vars
  n : nat
  l : S n &lt;= v
  ============================
   #(1 + v) [n ← #0] = #v

subgoal 2 (ID 5355) is:
 #v [n ← #0] = #v
subgoal 3 (ID 5341) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 4 (ID 5342) is:
 (M1 · M2) ↑ 1 # (S n) [n ← #0] = M1 · M2
subgoal 5 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 6 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">unfold</span> <a class="idref" href="ut_term.html#ut_term_mod.subst_rec"><span class="id" type="definition">subst_rec</span></a>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5356)
  
  v : Vars
  n : nat
  l : S n &lt;= v
  ============================
   match lt_eq_lt_dec (1 + v) n with
   | inleft (left _) =&gt; #(1 + v)
   | inleft (right _) =&gt; #0 ↑ n
   | inright _ =&gt; #(1 + v - 1)
   end = #v

subgoal 2 (ID 5355) is:
 #v [n ← #0] = #v
subgoal 3 (ID 5341) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 4 (ID 5342) is:
 (M1 · M2) ↑ 1 # (S n) [n ← #0] = M1 · M2
subgoal 5 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 6 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>) <span class="id" type="var">n</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>8 subgoals, subgoal 1 (ID 5370)
  
  v : Vars
  n : nat
  l : S n &lt;= v
  l0 : 1 + v &lt; n
  ============================
   #(1 + v) = #v

subgoal 2 (ID 5371) is:
 #0 ↑ n = #v
subgoal 3 (ID 5372) is:
 #(1 + v - 1) = #v
subgoal 4 (ID 5355) is:
 #v [n ← #0] = #v
subgoal 5 (ID 5341) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 6 (ID 5342) is:
 (M1 · M2) ↑ 1 # (S n) [n ← #0] = M1 · M2
subgoal 7 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 8 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#le_not_lt"><span class="id" type="lemma">le_not_lt</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 5374)
  
  v : Vars
  n : nat
  l : ~ v &lt; S n
  l0 : 1 + v &lt; n
  ============================
   #(1 + v) = #v

subgoal 2 (ID 5371) is:
 #0 ↑ n = #v
subgoal 3 (ID 5372) is:
 #(1 + v - 1) = #v
subgoal 4 (ID 5355) is:
 #v [n ← #0] = #v
subgoal 5 (ID 5341) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 6 (ID 5342) is:
 (M1 · M2) ↑ 1 # (S n) [n ← #0] = M1 · M2
subgoal 7 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 8 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">elim</span> <span class="id" type="var">l</span>. </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 5375)
  
  v : Vars
  n : nat
  l : ~ v &lt; S n
  l0 : 1 + v &lt; n
  ============================
   v &lt; S n

subgoal 2 (ID 5371) is:
 #0 ↑ n = #v
subgoal 3 (ID 5372) is:
 #(1 + v - 1) = #v
subgoal 4 (ID 5355) is:
 #v [n ← #0] = #v
subgoal 5 (ID 5341) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 6 (ID 5342) is:
 (M1 · M2) ↑ 1 # (S n) [n ← #0] = M1 · M2
subgoal 7 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 8 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5371)
  
  v : Vars
  n : nat
  l : S n &lt;= v
  e : 1 + v = n
  ============================
   #0 ↑ n = #v

subgoal 2 (ID 5372) is:
 #(1 + v - 1) = #v
subgoal 3 (ID 5355) is:
 #v [n ← #0] = #v
subgoal 4 (ID 5341) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 5 (ID 5342) is:
 (M1 · M2) ↑ 1 # (S n) [n ← #0] = M1 · M2
subgoal 6 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 7 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5397)
  
  v : Vars
  n : nat
  l : S n &lt;= v
  e : 1 + v = n
  ============================
   v &lt; v

subgoal 2 (ID 5372) is:
 #(1 + v - 1) = #v
subgoal 3 (ID 5355) is:
 #v [n ← #0] = #v
subgoal 4 (ID 5341) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 5 (ID 5342) is:
 (M1 · M2) ↑ 1 # (S n) [n ← #0] = M1 · M2
subgoal 6 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 7 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">v</span>)). </span><div class="output"><pre>8 subgoals, subgoal 1 (ID 5398)
  
  v : Vars
  n : nat
  l : S n &lt;= v
  e : 1 + v = n
  ============================
   v &lt; S (S v)

subgoal 2 (ID 5399) is:
 S (S v) &lt;= v
subgoal 3 (ID 5372) is:
 #(1 + v - 1) = #v
subgoal 4 (ID 5355) is:
 #v [n ← #0] = #v
subgoal 5 (ID 5341) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 6 (ID 5342) is:
 (M1 · M2) ↑ 1 # (S n) [n ← #0] = M1 · M2
subgoal 7 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 8 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">intuition</span>. </span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5399)
  
  v : Vars
  n : nat
  l : S n &lt;= v
  e : 1 + v = n
  ============================
   S (S v) &lt;= v

subgoal 2 (ID 5372) is:
 #(1 + v - 1) = #v
subgoal 3 (ID 5355) is:
 #v [n ← #0] = #v
subgoal 4 (ID 5341) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 5 (ID 5342) is:
 (M1 · M2) ↑ 1 # (S n) [n ← #0] = M1 · M2
subgoal 6 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 7 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">subst</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5372)
  
  v : Vars
  n : nat
  l : S n &lt;= v
  l0 : n &lt; 1 + v
  ============================
   #(1 + v - 1) = #v

subgoal 2 (ID 5355) is:
 #v [n ← #0] = #v
subgoal 3 (ID 5341) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 4 (ID 5342) is:
 (M1 · M2) ↑ 1 # (S n) [n ← #0] = M1 · M2
subgoal 5 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 6 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">change</span> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">v</span>) <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">v</span>). </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5414)
  
  v : Vars
  n : nat
  l : S n &lt;= v
  l0 : n &lt; 1 + v
  ============================
   #(S v - 1) = #v

subgoal 2 (ID 5355) is:
 #v [n ← #0] = #v
subgoal 3 (ID 5341) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 4 (ID 5342) is:
 (M1 · M2) ↑ 1 # (S n) [n ← #0] = M1 · M2
subgoal 5 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 6 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">destruct</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 5355)
  
  v : Vars
  n : nat
  g : S n &gt; v
  ============================
   #v [n ← #0] = #v

subgoal 2 (ID 5341) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 3 (ID 5342) is:
 (M1 · M2) ↑ 1 # (S n) [n ← #0] = M1 · M2
subgoal 4 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 5 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 5429)
  
  v : Vars
  n : nat
  g : S n &gt; v
  ============================
   match lt_eq_lt_dec v n with
   | inleft (left _) =&gt; #v
   | inleft (right _) =&gt; #(n + 0)
   | inright _ =&gt; #(v - 1)
   end = #v

subgoal 2 (ID 5341) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 3 (ID 5342) is:
 (M1 · M2) ↑ 1 # (S n) [n ← #0] = M1 · M2
subgoal 4 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 5 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" type="definition">lt_eq_lt_dec</span></a> <span class="id" type="var">v</span> <span class="id" type="var">n</span>) <span class="id" type="keyword">as</span> [[] | ].</span><div class="output"><pre>7 subgoals, subgoal 1 (ID 5443)
  
  v : Vars
  n : nat
  g : S n &gt; v
  l : v &lt; n
  ============================
   #v = #v

subgoal 2 (ID 5444) is:
 #(n + 0) = #v
subgoal 3 (ID 5445) is:
 #(v - 1) = #v
subgoal 4 (ID 5341) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 5 (ID 5342) is:
 (M1 · M2) ↑ 1 # (S n) [n ← #0] = M1 · M2
subgoal 6 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 7 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5444)
  
  v : Vars
  n : nat
  g : S n &gt; v
  e : v = n
  ============================
   #(n + 0) = #v

subgoal 2 (ID 5445) is:
 #(v - 1) = #v
subgoal 3 (ID 5341) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 4 (ID 5342) is:
 (M1 · M2) ↑ 1 # (S n) [n ← #0] = M1 · M2
subgoal 5 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 6 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5451)
  
  n : nat
  g : S n &gt; n
  ============================
   #(n + 0) = #n

subgoal 2 (ID 5445) is:
 #(v - 1) = #v
subgoal 3 (ID 5341) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 4 (ID 5342) is:
 (M1 · M2) ↑ 1 # (S n) [n ← #0] = M1 · M2
subgoal 5 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 6 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Peano.html#plus_n_O"><span class="id" type="lemma">plus_n_O</span></a>. </span><div class="output"><pre>6 subgoals, subgoal 1 (ID 5452)
  
  n : nat
  g : S n &gt; n
  ============================
   #n = #n

subgoal 2 (ID 5445) is:
 #(v - 1) = #v
subgoal 3 (ID 5341) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 4 (ID 5342) is:
 (M1 · M2) ↑ 1 # (S n) [n ← #0] = M1 · M2
subgoal 5 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 6 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>5 subgoals, subgoal 1 (ID 5445)
  
  v : Vars
  n : nat
  g : S n &gt; v
  l : n &lt; v
  ============================
   #(v - 1) = #v

subgoal 2 (ID 5341) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 3 (ID 5342) is:
 (M1 · M2) ↑ 1 # (S n) [n ← #0] = M1 · M2
subgoal 4 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 5 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_irrefl"><span class="id" type="lemma">lt_irrefl</span></a> <span class="id" type="var">n</span>). </span><div class="output"><pre>5 subgoals, subgoal 1 (ID 5453)
  
  v : Vars
  n : nat
  g : S n &gt; v
  l : n &lt; v
  ============================
   n &lt; n

subgoal 2 (ID 5341) is:
 !s ↑ 1 # (S n) [n ← #0] = !s
subgoal 3 (ID 5342) is:
 (M1 · M2) ↑ 1 # (S n) [n ← #0] = M1 · M2
subgoal 4 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 5 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.Lt.html#lt_le_trans"><span class="id" type="lemma">lt_le_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span>; <span class="id" type="tactic">intuition</span>.</span><div class="output"><pre>4 subgoals, subgoal 1 (ID 5341)
  
  s : Sorts
  n : nat
  ============================
   !s ↑ 1 # (S n) [n ← #0] = !s

subgoal 2 (ID 5342) is:
 (M1 · M2) ↑ 1 # (S n) [n ← #0] = M1 · M2
subgoal 3 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 4 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">trivial</span>.</span><div class="output"><pre>3 subgoals, subgoal 1 (ID 5342)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  n : nat
  ============================
   (M1 · M2) ↑ 1 # (S n) [n ← #0] = M1 · M2

subgoal 2 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 3 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 5463)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  n : nat
  ============================
   M1 ↑ 1 # (S n) [n ← #0] · M2 ↑ 1 # (S n) [n ← #0] = M1 · M2

subgoal 2 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 3 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 5464)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  n : nat
  ============================
   M1 · M2 ↑ 1 # (S n) [n ← #0] = M1 · M2

subgoal 2 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 3 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>. </span><div class="output"><pre>3 subgoals, subgoal 1 (ID 5465)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  n : nat
  ============================
   M1 · M2 = M1 · M2

subgoal 2 (ID 5343) is:
 (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2
subgoal 3 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>2 subgoals, subgoal 1 (ID 5343)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  n : nat
  ============================
   (Π (M1), M2) ↑ 1 # (S n) [n ← #0] = Π (M1), M2

subgoal 2 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 5467)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  n : nat
  ============================
   Π (M1 ↑ 1 # (S n) [n ← #0]), M2 ↑ 1 # (S (S n)) [(S n) ← #0] = Π (M1), M2

subgoal 2 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 5468)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  n : nat
  ============================
   Π (M1), M2 ↑ 1 # (S (S n)) [(S n) ← #0] = Π (M1), M2

subgoal 2 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>. </span><div class="output"><pre>2 subgoals, subgoal 1 (ID 5469)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  n : nat
  ============================
   Π (M1), M2 = Π (M1), M2

subgoal 2 (ID 5344) is:
 (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2
(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>1 subgoals, subgoal 1 (ID 5344)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  n : nat
  ============================
   (λ [M1], M2) ↑ 1 # (S n) [n ← #0] = λ [M1], M2

(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="tactic">simpl</span>. </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 5471)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  n : nat
  ============================
   λ [M1 ↑ 1 # (S n) [n ← #0]], M2 ↑ 1 # (S (S n)) [(S n) ← #0] = λ [M1], M2

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM1</span>. </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 5472)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  n : nat
  ============================
   λ [M1], M2 ↑ 1 # (S (S n)) [(S n) ← #0] = λ [M1], M2

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM2</span>. </span><div class="output"><pre>1 subgoals, subgoal 1 (ID 5473)
  
  M1 : Term
  M2 : Term
  IHM1 : forall n : nat, M1 ↑ 1 # (S n) [n ← #0] = M1
  IHM2 : forall n : nat, M2 ↑ 1 # (S n) [n ← #0] = M2
  n : nat
  ============================
   λ [M1], M2 = λ [M1], M2

(dependent evars:)

</pre></div>
<span class="command"><span class="id" type="tactic">reflexivity</span>.</span><div class="output"><pre>No more subgoals.
(dependent evars:)

</pre></div>
<span class="command"><br>
<span class="id" type="keyword">Qed</span>.</span><div class="output"><pre>expand_term_with_subst is defined

</pre></div>
<span class="command"><br>

<br>
<span class="id" type="keyword">End</span> <a class="idref" href="ut_term.html#"><span class="id" type="module">ut_term_mod</span></a>.</span><div class="output"><pre>Module Type ut_term_mod is defined

</pre></div>
<span class="command"><br>
</span><div class="output"><pre></pre></div>
</div>
</div>

<div>
<hr>
<a href="index.html">Index</a><hr>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div></body>
</html>
